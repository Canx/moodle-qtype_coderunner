define ("qtype_coderunner/ui_blockly",["jquery","qtype_coderunner/blockly/browser"],function(a,b){function c(a,c,d,e){var f,g,h;h=document.getElementById(a);this.textArea=h;this.templateParams=e;this.workspace=null;this.Code=b.Python;this.blocklyDiv=document.createElement("div");this.blocklyDiv.id="blockly_"+a;this.blocklyDiv.class="coderunner_blockly";this.blocklyDiv.tabindex=1;this.blocklyDiv.style.height=d+"px";this.blocklyDiv.style.width=c+"px";h.parentNode.insertBefore(this.blocklyDiv,h);g=new XMLHttpRequest;g.blocklyUi=this;g.overrideMimeType("text/xml");this.fail=!1;g.onload=function(){try{if(g.readyState===g.DONE&&200===g.status){g.blocklyUi.workspace=b.inject(g.blocklyUi.blocklyDiv,{toolbox:g.responseText})}if(""!=h.value){var a=b.Xml.textToDom(h.value);b.Xml.domToWorkspace(a,g.blocklyUi.workspace)}}catch(a){g.blocklyUi.fail=!0;console.log(a)}};f=window.location.protocol+"//"+window.location.host;f+="/question/type/coderunner/amd/src/blockly/toolbox.xml";g.open("GET",f,!0);g.send()}c.prototype.getElement=function(){return this.blocklyDiv};c.prototype.failed=function(){return this.fail};c.prototype.failMessage=function(){};c.prototype.sync=function(){var a=b.Xml.workspaceToDom(this.workspace),c=this.Code.workspaceToCode(this.workspace),d=b.Xml.textToDom("<code>"+c+"</code>");a.appendChild(d);this.textArea.value=new XMLSerializer().serializeToString(a)};c.prototype.destroy=function(){};c.prototype.resize=function(a,c){this.blocklyDiv.style.height=c+"px";this.blocklyDiv.style.width=a+"px";b.svgResize(this.workspace)};c.prototype.hasFocus=function(){};return{Constructor:c}});
//# sourceMappingURL=ui_blockly.min.js.map
