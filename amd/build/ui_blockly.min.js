define ("qtype_coderunner/ui_blockly",["jquery","require","qtype_coderunner/blockly/browser"],function(a,b,c){function d(a,d,e,f){var g,h,i,j,k,l,l=this,k=f.locale,m=f.toolbox;j=document.getElementById(a);this.textArea=j;this.blocklyDiv=document.createElement("div");this.blocklyDiv.id="blockly_"+a;this.blocklyDiv.class="coderunner_blockly";this.blocklyDiv.tabindex=1;this.blocklyDiv.style.height=e+"px";this.blocklyDiv.style.width=d+"px";j.parentNode.insertBefore(this.blocklyDiv,j);h=new XMLHttpRequest;h.overrideMimeType("text/xml");g=window.location.protocol+"//"+window.location.host;g+="/question/type/coderunner/amd/src/blockly/toolbox.xml";h.open("GET",g,!0);h.send();h.onload=function(){l.fail=!1;try{if(k){b(["./blockly/msg/"+k],function(a){n(a)})}else{n()}}catch(a){l.fail=!0;console.log(a)}};var n=function(a){if(h.readyState===h.DONE&&200===h.status){if(a){c.setLocale(a)}if(m){i=c.Xml.textToDom(m)}else{i=c.Xml.textToDom(h.responseText)}l.workspace=c.inject(l.blocklyDiv,{toolbox:i})}if(""!=j.value){var b=c.Xml.textToDom(j.value);c.Xml.domToWorkspace(b,l.workspace)}}}d.prototype.getElement=function(){return this.blocklyDiv};d.prototype.failed=function(){return this.fail};d.prototype.failMessage=function(){};d.prototype.sync=function(){var a=c.Xml.workspaceToDom(this.workspace),b=c.Python.workspaceToCode(this.workspace),d=c.Xml.textToDom("<code>"+b+"</code>");a.appendChild(d);this.textArea.value=new XMLSerializer().serializeToString(a)};d.prototype.destroy=function(){if(this.workspace){this.workspace.dispose()}if(this.blocklyDiv){this.blocklyDiv.parentNode.removeChild(this.blocklyDiv);this.blocklyDiv=null}};d.prototype.resize=function(a,b){this.blocklyDiv.style.height=b+"px";this.blocklyDiv.style.width=a+"px";if(this.workspace){c.svgResize(this.workspace)}};d.prototype.hasFocus=function(){};return{Constructor:d}});
//# sourceMappingURL=ui_blockly.min.js.map
