'use strict';goog.provide("Blockly.utils.dom");goog.require("Blockly.utils.userAgent");Blockly.utils.dom.SVG_NS="http://www.w3.org/2000/svg";Blockly.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml";Blockly.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink";Blockly.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16};Blockly.utils.dom.cacheWidths_=null;Blockly.utils.dom.cacheReference_=0;Blockly.utils.dom.canvasContext_=null;Blockly.utils.dom.createSvgElement=function(a,b,c){var d=document.createElementNS(Blockly.utils.dom.SVG_NS,a);for(var e in b){d.setAttribute(e,b[e])}if(document.body.runtimeStyle){d.runtimeStyle=d.currentStyle=d.style}if(c){c.appendChild(d)}return d};Blockly.utils.dom.addClass=function(a,b){var c=a.getAttribute("class")||"";if(-1!=(" "+c+" ").indexOf(" "+b+" ")){return!1}if(c){c+=" "}a.setAttribute("class",c+b);return!0};Blockly.utils.dom.removeClass=function(a,b){var c=a.getAttribute("class");if(-1==(" "+c+" ").indexOf(" "+b+" ")){return!1}for(var d=c.split(/\s+/),e=0;e<d.length;e++){if(!d[e]||d[e]==b){d.splice(e,1);e--}}if(d.length){a.setAttribute("class",d.join(" "))}else{a.removeAttribute("class")}return!0};Blockly.utils.dom.hasClass=function(a,b){var c=a.getAttribute("class");return-1!=(" "+c+" ").indexOf(" "+b+" ")};Blockly.utils.dom.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};Blockly.utils.dom.insertAfter=function(a,b){var c=b.nextSibling,d=b.parentNode;if(!d){throw Error("Reference node has no parent.")}if(c){d.insertBefore(a,c)}else{d.appendChild(a)}};Blockly.utils.dom.containsNode=function(a,b){return!!(a.compareDocumentPosition(b)&Blockly.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)};Blockly.utils.dom.setCssTransform=function(a,b){a.style.transform=b;a.style["-webkit-transform"]=b};Blockly.utils.dom.startTextWidthCache=function(){Blockly.utils.dom.cacheReference_++;if(!Blockly.utils.dom.cacheWidths_){Blockly.utils.dom.cacheWidths_={}}};Blockly.utils.dom.stopTextWidthCache=function(){Blockly.utils.dom.cacheReference_--;if(!Blockly.utils.dom.cacheReference_){Blockly.utils.dom.cacheWidths_=null}};Blockly.utils.dom.getTextWidth=function(a){var b=a.textContent+"\n"+a.className.baseVal,c;if(Blockly.utils.dom.cacheWidths_){c=Blockly.utils.dom.cacheWidths_[b];if(c){return c}}try{if(Blockly.utils.userAgent.IE||Blockly.utils.userAgent.EDGE){c=a.getBBox().width}else{c=a.getComputedTextLength()}}catch(b){return 8*a.textContent.length}if(Blockly.utils.dom.cacheWidths_){Blockly.utils.dom.cacheWidths_[b]=c}return c};Blockly.utils.dom.getFastTextWidth=function(a,b,c,d){return Blockly.utils.dom.getFastTextWidthWithSizeString(a,b+"pt",c,d)};Blockly.utils.dom.getFastTextWidthWithSizeString=function(a,b,c,d){var e=a.textContent,f=e+"\n"+a.className.baseVal,g;if(Blockly.utils.dom.cacheWidths_){g=Blockly.utils.dom.cacheWidths_[f];if(g){return g}}if(!Blockly.utils.dom.canvasContext_){var h=document.createElement("canvas");h.className="blocklyComputeCanvas";document.body.appendChild(h);Blockly.utils.dom.canvasContext_=h.getContext("2d")}Blockly.utils.dom.canvasContext_.font=c+" "+b+" "+d;g=Blockly.utils.dom.canvasContext_.measureText(e).width;if(Blockly.utils.dom.cacheWidths_){Blockly.utils.dom.cacheWidths_[f]=g}return g};Blockly.utils.dom.measureFontMetrics=function(a,b,c,d){var e=document.createElement("span");e.style.font=c+" "+b+" "+d;e.textContent=a;var f=document.createElement("div");f.style.width="1px";f.style.height="0px";var g=document.createElement("div");g.setAttribute("style","position: fixed; top: 0; left: 0; display: flex;");g.appendChild(e);g.appendChild(f);document.body.appendChild(g);try{var h={};g.style.alignItems="baseline";h.baseline=f.offsetTop-e.offsetTop;g.style.alignItems="flex-end";h.height=f.offsetTop-e.offsetTop}finally{document.body.removeChild(g)}return h};
//# sourceMappingURL=dom.min.js.map
