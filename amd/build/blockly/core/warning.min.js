'use strict';goog.provide("Blockly.Warning");goog.require("Blockly.Bubble");goog.require("Blockly.Events");goog.require("Blockly.Events.Ui");goog.require("Blockly.Icon");goog.require("Blockly.utils.dom");goog.require("Blockly.utils.object");Blockly.Warning=function(a){Blockly.Warning.superClass_.constructor.call(this,a);this.createIcon();this.text_={}};Blockly.utils.object.inherits(Blockly.Warning,Blockly.Icon);Blockly.Warning.prototype.collapseHidden=!1;Blockly.Warning.prototype.drawIcon_=function(a){Blockly.utils.dom.createSvgElement("path",{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},a);Blockly.utils.dom.createSvgElement("path",{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},a);Blockly.utils.dom.createSvgElement("rect",{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},a)};Blockly.Warning.textToDom_=function(a){for(var b=Blockly.utils.dom.createSvgElement("text",{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Blockly.Bubble.BORDER_WIDTH},null),c=a.split("\n"),d=0;d<c.length;d++){var e=Blockly.utils.dom.createSvgElement("tspan",{dy:"1em",x:Blockly.Bubble.BORDER_WIDTH},b),f=document.createTextNode(c[d]);e.appendChild(f)}return b};Blockly.Warning.prototype.setVisible=function(a){if(a==this.isVisible()){return}Blockly.Events.fire(new Blockly.Events.Ui(this.block_,"warningOpen",!a,a));if(a){this.createBubble()}else{this.disposeBubble()}};Blockly.Warning.prototype.createBubble=function(){this.paragraphElement_=Blockly.Warning.textToDom_(this.getText());this.bubble_=new Blockly.Bubble(this.block_.workspace,this.paragraphElement_,this.block_.pathObject.svgPath,this.iconXY_,null,null);this.bubble_.setSvgId(this.block_.id);if(this.block_.RTL){for(var a=this.paragraphElement_.getBBox().width,b=0,c;c=this.paragraphElement_.childNodes[b];b++){c.setAttribute("text-anchor","end");c.setAttribute("x",a+Blockly.Bubble.BORDER_WIDTH)}}this.applyColour()};Blockly.Warning.prototype.disposeBubble=function(){this.bubble_.dispose();this.bubble_=null;this.body_=null;this.paragraphElement_=null};Blockly.Warning.prototype.setText=function(a,b){if(this.text_[b]==a){return}if(a){this.text_[b]=a}else{delete this.text_[b]}if(this.isVisible()){this.setVisible(!1);this.setVisible(!0)}};Blockly.Warning.prototype.getText=function(){var a=[];for(var b in this.text_){a.push(this.text_[b])}return a.join("\n")};Blockly.Warning.prototype.dispose=function(){this.block_.warning=null;Blockly.Icon.prototype.dispose.call(this)};
//# sourceMappingURL=warning.min.js.map
