'use strict';goog.provide("Blockly.blockRendering.Debug");goog.require("Blockly.blockRendering.BottomRow");goog.require("Blockly.blockRendering.InputRow");goog.require("Blockly.blockRendering.Measurable");goog.require("Blockly.blockRendering.RenderInfo");goog.require("Blockly.blockRendering.Row");goog.require("Blockly.blockRendering.SpacerRow");goog.require("Blockly.blockRendering.TopRow");goog.require("Blockly.blockRendering.Types");Blockly.blockRendering.Debug=function(a){this.debugElements_=[];this.svgRoot_=null;this.constants_=a};Blockly.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0};Blockly.blockRendering.Debug.prototype.clearElems=function(){for(var a=0,b;b=this.debugElements_[a];a++){Blockly.utils.dom.removeNode(b)}this.debugElements_=[]};Blockly.blockRendering.Debug.prototype.drawSpacerRow=function(a,b,c){if(!Blockly.blockRendering.Debug.config.rowSpacers){return}var d=Math.abs(a.height),e=0>a.height;if(e){b-=d}this.debugElements_.push(Blockly.utils.dom.createSvgElement("rect",{class:"rowSpacerRect blockRenderDebug",x:c?-(a.xPos+a.width):a.xPos,y:b,width:a.width,height:d,stroke:e?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))};Blockly.blockRendering.Debug.prototype.drawSpacerElem=function(a,b,c){if(!Blockly.blockRendering.Debug.config.elemSpacers){return}var d=Math.abs(a.width),e=0>a.width,f=e?a.xPos-d:a.xPos;if(c){f=-(f+d)}var g=a.centerline-a.height/2;this.debugElements_.push(Blockly.utils.dom.createSvgElement("rect",{class:"elemSpacerRect blockRenderDebug",x:f,y:g,width:d,height:a.height,stroke:"pink",fill:e?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))};Blockly.blockRendering.Debug.prototype.drawRenderedElem=function(a,b){if(Blockly.blockRendering.Debug.config.elems){var c=a.xPos;if(b){c=-(c+a.width)}var d=a.centerline-a.height/2;this.debugElements_.push(Blockly.utils.dom.createSvgElement("rect",{class:"rowRenderingRect blockRenderDebug",x:c,y:d,width:a.width,height:a.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_));if(Blockly.blockRendering.Types.isField(a)&&a.field instanceof Blockly.FieldLabel){var e=this.constants_.FIELD_TEXT_BASELINE;this.debugElements_.push(Blockly.utils.dom.createSvgElement("rect",{class:"rowRenderingRect blockRenderDebug",x:c,y:d+e,width:a.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}}if(Blockly.blockRendering.Types.isInput(a)&&Blockly.blockRendering.Debug.config.connections){this.drawConnection(a.connectionModel)}};Blockly.blockRendering.Debug.prototype.drawConnection=function(a){if(!Blockly.blockRendering.Debug.config.connections){return}var b,c,d;if(a.type==Blockly.INPUT_VALUE){c=4;b="magenta";d="none"}else if(a.type==Blockly.OUTPUT_VALUE){c=2;b="magenta";d=b}else if(a.type==Blockly.NEXT_STATEMENT){c=4;b="goldenrod";d="none"}else if(a.type==Blockly.PREVIOUS_STATEMENT){c=2;b="goldenrod";d=b}this.debugElements_.push(Blockly.utils.dom.createSvgElement("circle",{class:"blockRenderDebug",cx:a.offsetInBlock_.x,cy:a.offsetInBlock_.y,r:c,fill:d,stroke:b},this.svgRoot_))};Blockly.blockRendering.Debug.prototype.drawRenderedRow=function(a,b,c){if(!Blockly.blockRendering.Debug.config.rows){return}this.debugElements_.push(Blockly.utils.dom.createSvgElement("rect",{class:"elemRenderingRect blockRenderDebug",x:c?-(a.xPos+a.width):a.xPos,y:a.yPos,width:a.width,height:a.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_));if(Blockly.blockRendering.Types.isTopOrBottomRow(a)){return}if(Blockly.blockRendering.Debug.config.connectedBlockBounds){this.debugElements_.push(Blockly.utils.dom.createSvgElement("rect",{class:"connectedBlockWidth blockRenderDebug",x:c?-(a.xPos+a.widthWithConnectedBlocks):a.xPos,y:a.yPos,width:a.widthWithConnectedBlocks,height:a.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}};Blockly.blockRendering.Debug.prototype.drawRowWithElements=function(a,b,c){for(var d=0,e=a.elements.length,f;d<e;d++){f=a.elements[d];if(!f){console.warn("A row has an undefined or null element.",a,f);continue}if(Blockly.blockRendering.Types.isSpacer(f)){this.drawSpacerElem(f,a.height,c)}else{this.drawRenderedElem(f,c)}}this.drawRenderedRow(a,b,c)};Blockly.blockRendering.Debug.prototype.drawBoundingBox=function(a){if(!Blockly.blockRendering.Debug.config.blockBounds){return}var b=a.RTL?-a.width:0,c=0;this.debugElements_.push(Blockly.utils.dom.createSvgElement("rect",{class:"blockBoundingBox blockRenderDebug",x:b,y:c,width:a.width,height:a.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_));if(Blockly.blockRendering.Debug.config.connectedBlockBounds){b=a.RTL?-a.widthWithChildren:0;this.debugElements_.push(Blockly.utils.dom.createSvgElement("rect",{class:"blockRenderDebug",x:b,y:c,width:a.widthWithChildren,height:a.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}};Blockly.blockRendering.Debug.prototype.drawDebug=function(a,b){this.clearElems();this.svgRoot_=a.getSvgRoot();this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var c=0,d=0,e;e=b.rows[d];d++){if(Blockly.blockRendering.Types.isBetweenRowSpacer(e)){this.drawSpacerRow(e,c,b.RTL)}else{this.drawRowWithElements(e,c,b.RTL)}c+=e.height}if(a.previousConnection){this.drawConnection(a.previousConnection)}if(a.nextConnection){this.drawConnection(a.nextConnection)}if(a.outputConnection){this.drawConnection(a.outputConnection)}if(b.rightSide){this.drawRenderedElem(b.rightSide,b.RTL)}this.drawBoundingBox(b);this.drawRender(a.pathObject.svgPath)};Blockly.blockRendering.Debug.prototype.drawRender=function(a){if(!Blockly.blockRendering.Debug.config.render){return}a.setAttribute("filter","url(#"+this.constants_.debugFilterId+")");setTimeout(function(){a.setAttribute("filter","")},100)};
//# sourceMappingURL=debugger.min.js.map
