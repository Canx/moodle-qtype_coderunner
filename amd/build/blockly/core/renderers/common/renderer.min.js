'use strict';goog.provide("Blockly.blockRendering.Renderer");goog.require("Blockly.blockRendering.ConstantProvider");goog.require("Blockly.blockRendering.MarkerSvg");goog.require("Blockly.blockRendering.Drawer");goog.require("Blockly.blockRendering.IPathObject");goog.require("Blockly.blockRendering.PathObject");goog.require("Blockly.blockRendering.RenderInfo");goog.require("Blockly.InsertionMarkerManager");goog.requireType("Blockly.blockRendering.Debug");goog.requireType("Blockly.IRegistrable");Blockly.blockRendering.Renderer=function(a){this.name=a;this.constants_=null;this.overrides=null};Blockly.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"};Blockly.blockRendering.Renderer.prototype.init=function(a,b){this.constants_=this.makeConstants_();if(b){this.overrides=b;Blockly.utils.object.mixin(this.constants_,b)}this.constants_.setTheme(a);this.constants_.init()};Blockly.blockRendering.Renderer.prototype.createDom=function(a,b){this.constants_.createDom(a,this.name+"-"+b.name,"."+this.getClassName()+"."+b.getClassName())};Blockly.blockRendering.Renderer.prototype.refreshDom=function(a,b){var c=this.getConstants();c.dispose();this.constants_=this.makeConstants_();if(this.overrides){Blockly.utils.object.mixin(this.constants_,this.overrides)}this.constants_.randomIdentifier=c.randomIdentifier;this.constants_.setTheme(b);this.constants_.init();this.createDom(a,b)};Blockly.blockRendering.Renderer.prototype.dispose=function(){if(this.constants_){this.constants_.dispose()}};Blockly.blockRendering.Renderer.prototype.makeConstants_=function(){return new Blockly.blockRendering.ConstantProvider};Blockly.blockRendering.Renderer.prototype.makeRenderInfo_=function(a){return new Blockly.blockRendering.RenderInfo(this,a)};Blockly.blockRendering.Renderer.prototype.makeDrawer_=function(a,b){return new Blockly.blockRendering.Drawer(a,b)};Blockly.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!Blockly.blockRendering.Debug){throw Error("Missing require for Blockly.blockRendering.Debug")}return new Blockly.blockRendering.Debug(this.getConstants())};Blockly.blockRendering.Renderer.prototype.makeMarkerDrawer=function(a,b){return new Blockly.blockRendering.MarkerSvg(a,this.getConstants(),b)};Blockly.blockRendering.Renderer.prototype.makePathObject=function(a,b){return new Blockly.blockRendering.PathObject(a,b,this.constants_)};Blockly.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_};Blockly.blockRendering.Renderer.prototype.shouldHighlightConnection=function(){return!0};Blockly.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(a,b,c){var d=null,e=null;if(c==Blockly.OUTPUT_VALUE){d=b.outputConnection;e=Blockly.Connection.lastConnectionInRow(a,b)}else{d=b.previousConnection;e=a.lastConnectionInStack()}if(!e){return!1}return d.checkType(e)};Blockly.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(a,b,c){if(b.type==Blockly.OUTPUT_VALUE||b.type==Blockly.PREVIOUS_STATEMENT){if(!a.isConnected()||this.orphanCanConnectAtEnd(c,a.targetBlock(),b.type)){return Blockly.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER}return Blockly.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE}return Blockly.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER};Blockly.blockRendering.Renderer.prototype.render=function(a){if(Blockly.blockRendering.useDebugger&&!a.renderingDebugger){a.renderingDebugger=this.makeDebugger_()}var b=this.makeRenderInfo_(a);b.measure();this.makeDrawer_(a,b).draw()};
//# sourceMappingURL=renderer.min.js.map
