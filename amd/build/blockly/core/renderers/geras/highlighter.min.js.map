{"version":3,"sources":["../../../../../src/blockly/core/renderers/geras/highlighter.js"],"names":["goog","provide","require","Blockly","geras","Highlighter","info","info_","steps_","inlineSteps_","RTL_","RTL","renderer","getRenderer","constants_","getConstants","highlightConstants_","getHighlightConstants","highlightOffset_","OFFSET","outsideCornerPaths_","OUTSIDE_CORNER","insideCornerPaths_","INSIDE_CORNER","puzzleTabPaths_","PUZZLE_TAB","notchPaths_","NOTCH","startPaths_","START_HAT","jaggedTeethPaths_","JAGGED_TEETH","prototype","getPath","drawTopCorner","row","utils","svgPaths","moveBy","xPos","startY","i","elem","elements","blockRendering","Types","isLeftSquareCorner","START_POINT","isLeftRoundedCorner","topLeft","isPreviousConnection","pathLeft","isHat","path","isSpacer","width","lineOnAxis","right","drawJaggedEdge_","remainder","height","drawValueInput","input","getLastInput","belowTabHeight","connectionHeight","moveTo","yPos","pathDown","drawStatementInput","innerHeight","pathTop","pathBottom","lineTo","drawRightSideRow","rightEdge","followsStatement","drawBottomRow","baseline","cornerElem","bottomRow","bottomLeft","drawLeft","outputConnection","tabBottom","connectionOffsetY","startX","left","bottom","pathUp","topRow","capline","drawInlineInput","offset","connectionRight","connectionWidth","centerline","bottomHighlightWidth","aboveTabHeight"],"mappings":"AAWA,aAEAA,IAAI,CAACC,OAAL,CAAa,2BAAb,EAEAD,IAAI,CAACE,OAAL,CAAa,kCAAb,EACAF,IAAI,CAACE,OAAL,CAAa,iCAAb,EACAF,IAAI,CAACE,OAAL,CAAa,mCAAb,EACAF,IAAI,CAACE,OAAL,CAAa,mCAAb,EACAF,IAAI,CAACE,OAAL,CAAa,4BAAb,EACAF,IAAI,CAACE,OAAL,CAAa,kCAAb,EACAF,IAAI,CAACE,OAAL,CAAa,+BAAb,EACAF,IAAI,CAACE,OAAL,CAAa,8BAAb,EACAF,IAAI,CAACE,OAAL,CAAa,wBAAb,EAmBAC,OAAO,CAACC,KAAR,CAAcC,WAAd,CAA4B,SAASC,CAAT,CAAe,CACzC,KAAKC,KAAL,CAAaD,CAAb,CACA,KAAKE,MAAL,CAAc,EAAd,CACA,KAAKC,YAAL,CAAoB,EAApB,CAEA,KAAKC,IAAL,CAAY,KAAKH,KAAL,CAAWI,GAAvB,CAEA,GAAIC,CAAAA,CAAQ,CAA2CN,CAAI,CAACO,WAAL,EAAvD,CAMA,KAAKC,UAAL,CAAkBF,CAAQ,CAACG,YAAT,EAAlB,CAKA,KAAKC,mBAAL,CAA2BJ,CAAQ,CAACK,qBAAT,EAA3B,CAMA,KAAKC,gBAAL,CAAwB,KAAKF,mBAAL,CAAyBG,MAAjD,CAEA,KAAKC,mBAAL,CAA2B,KAAKJ,mBAAL,CAAyBK,cAApD,CACA,KAAKC,kBAAL,CAA0B,KAAKN,mBAAL,CAAyBO,aAAnD,CACA,KAAKC,eAAL,CAAuB,KAAKR,mBAAL,CAAyBS,UAAhD,CACA,KAAKC,WAAL,CAAmB,KAAKV,mBAAL,CAAyBW,KAA5C,CACA,KAAKC,WAAL,CAAmB,KAAKZ,mBAAL,CAAyBa,SAA5C,CACA,KAAKC,iBAAL,CACI,KAAKd,mBAAL,CAAyBe,YAC9B,CAjCD,CAwCA5B,OAAO,CAACC,KAAR,CAAcC,WAAd,CAA0B2B,SAA1B,CAAoCC,OAApC,CAA8C,UAAW,CACvD,MAAO,MAAKzB,MAAL,CAAc,IAAd,CAAqB,KAAKC,YAClC,CAFD,CAIAN,OAAO,CAACC,KAAR,CAAcC,WAAd,CAA0B2B,SAA1B,CAAoCE,aAApC,CAAoD,SAASC,CAAT,CAAc,CAChE,KAAK3B,MAAL,EAAeL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBC,MAAvB,CAA8BH,CAAG,CAACI,IAAlC,CAAwC,KAAKhC,KAAL,CAAWiC,MAAnD,CAAf,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAR,CAAWC,CAAhB,CAAuBA,CAAI,CAAGP,CAAG,CAACQ,QAAJ,CAAaF,CAAb,CAA9B,CAAgDA,CAAC,EAAjD,CAAqD,CACnD,GAAItC,OAAO,CAACyC,cAAR,CAAuBC,KAAvB,CAA6BC,kBAA7B,CAAgDJ,CAAhD,CAAJ,CAA2D,CACzD,KAAKlC,MAAL,EAAe,KAAKQ,mBAAL,CAAyB+B,WACzC,CAFD,IAEO,IAAI5C,OAAO,CAACyC,cAAR,CAAuBC,KAAvB,CAA6BG,mBAA7B,CAAiDN,CAAjD,CAAJ,CAA4D,CACjE,KAAKlC,MAAL,EAAe,KAAKY,mBAAL,CAAyB6B,OAAzB,CAAiC,KAAKvC,IAAtC,CAChB,CAFM,IAEA,IAAIP,OAAO,CAACyC,cAAR,CAAuBC,KAAvB,CAA6BK,oBAA7B,CAAkDR,CAAlD,CAAJ,CAA6D,CAClE,KAAKlC,MAAL,EAAe,KAAKkB,WAAL,CAAiByB,QACjC,CAFM,IAEA,IAAIhD,OAAO,CAACyC,cAAR,CAAuBC,KAAvB,CAA6BO,KAA7B,CAAmCV,CAAnC,CAAJ,CAA8C,CACnD,KAAKlC,MAAL,EAAe,KAAKoB,WAAL,CAAiByB,IAAjB,CAAsB,KAAK3C,IAA3B,CAChB,CAFM,IAEA,IAAIP,OAAO,CAACyC,cAAR,CAAuBC,KAAvB,CAA6BS,QAA7B,CAAsCZ,CAAtC,GAA6D,CAAd,EAAAA,CAAI,CAACa,KAAxD,CAAoE,CAIzE,KAAK/C,MAAL,EAAeL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CACXd,CAAI,CAACH,IAAL,CAAYG,CAAI,CAACa,KAAjB,CAAyB,KAAKrC,gBADnB,CAEhB,CACF,CAED,GAAIuC,CAAAA,CAAK,CAAGtB,CAAG,CAACI,IAAJ,CAAWJ,CAAG,CAACoB,KAAf,CAAuB,KAAKrC,gBAAxC,CACA,KAAKV,MAAL,EAAeL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuCC,CAAvC,CAChB,CAtBD,CAwBAtD,OAAO,CAACC,KAAR,CAAcC,WAAd,CAA0B2B,SAA1B,CAAoC0B,eAApC,CAAsD,SAASvB,CAAT,CAAc,CAClE,GAAI,KAAK5B,KAAL,CAAWI,GAAf,CAAoB,CAClB,GAAIgD,CAAAA,CAAS,CACTxB,CAAG,CAACyB,MAAJ,CAAa,KAAK9B,iBAAL,CAAuB8B,MAApC,CAA6C,KAAK1C,gBADtD,CAEA,KAAKV,MAAL,EAAe,KAAKsB,iBAAL,CAAuBqB,QAAvB,CACXhD,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuCG,CAAvC,CACL,CACF,CAPD,CASAxD,OAAO,CAACC,KAAR,CAAcC,WAAd,CAA0B2B,SAA1B,CAAoC6B,cAApC,CAAqD,SAAS1B,CAAT,CAAc,CACjE,GAAI2B,CAAAA,CAAK,CAAG3B,CAAG,CAAC4B,YAAJ,EAAZ,CACA,GAAI,KAAKrD,IAAT,CAAe,CACb,GAAIsD,CAAAA,CAAc,CAAG7B,CAAG,CAACyB,MAAJ,CAAaE,CAAK,CAACG,gBAAxC,CAEA,KAAKzD,MAAL,EACIL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuB6B,MAAvB,CACIJ,CAAK,CAACvB,IAAN,CAAauB,CAAK,CAACP,KAAnB,CAA2B,KAAKrC,gBADpC,CACsDiB,CAAG,CAACgC,IAD1D,EAEA,KAAK3C,eAAL,CAAqB4C,QAArB,CAA8B,KAAK1D,IAAnC,CAFA,CAGAP,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuCQ,CAAvC,CACL,CARD,IAQO,CACL,KAAKxD,MAAL,EACIL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuB6B,MAAvB,CAA8BJ,CAAK,CAACvB,IAAN,CAAauB,CAAK,CAACP,KAAjD,CAAwDpB,CAAG,CAACgC,IAA5D,EACA,KAAK3C,eAAL,CAAqB4C,QAArB,CAA8B,KAAK1D,IAAnC,CACL,CACF,CAfD,CAiBAP,OAAO,CAACC,KAAR,CAAcC,WAAd,CAA0B2B,SAA1B,CAAoCqC,kBAApC,CAAyD,SAASlC,CAAT,CAAc,CACrE,GAAI2B,CAAAA,CAAK,CAAG3B,CAAG,CAAC4B,YAAJ,EAAZ,CACA,GAAI,KAAKrD,IAAT,CAAe,CACb,GAAI4D,CAAAA,CAAW,CAAGnC,CAAG,CAACyB,MAAJ,CAAc,EAAI,KAAKtC,kBAAL,CAAwBsC,MAA5D,CACA,KAAKpD,MAAL,EACIL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuB6B,MAAvB,CAA8BJ,CAAK,CAACvB,IAApC,CAA0CJ,CAAG,CAACgC,IAA9C,EACA,KAAK7C,kBAAL,CAAwBiD,OAAxB,CAAgC,KAAK7D,IAArC,CADA,CAEAP,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuCc,CAAvC,CAFA,CAGA,KAAKhD,kBAAL,CAAwBkD,UAAxB,CAAmC,KAAK9D,IAAxC,CAHA,CAIAP,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBoC,MAAvB,CACItC,CAAG,CAACoB,KAAJ,CAAYO,CAAK,CAACvB,IAAlB,CAAyB,KAAKjB,kBAAL,CAAwBiC,KADrD,CAC4D,CAD5D,CAEL,CATD,IASO,CACL,KAAK/C,MAAL,EACIL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuB6B,MAAvB,CAA8BJ,CAAK,CAACvB,IAApC,CAA0CJ,CAAG,CAACgC,IAAJ,CAAWhC,CAAG,CAACyB,MAAzD,EACA,KAAKtC,kBAAL,CAAwBkD,UAAxB,CAAmC,KAAK9D,IAAxC,CADA,CAEAP,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBoC,MAAvB,CACItC,CAAG,CAACoB,KAAJ,CAAYO,CAAK,CAACvB,IAAlB,CAAyB,KAAKjB,kBAAL,CAAwBiC,KADrD,CAC4D,CAD5D,CAEL,CACF,CAlBD,CAoBApD,OAAO,CAACC,KAAR,CAAcC,WAAd,CAA0B2B,SAA1B,CAAoC0C,gBAApC,CAAuD,SAASvC,CAAT,CAAc,CACnE,GAAIwC,CAAAA,CAAS,CAAGxC,CAAG,CAACI,IAAJ,CAAWJ,CAAG,CAACoB,KAAf,CAAuB,KAAKrC,gBAA5C,CACA,GAAIiB,CAAG,CAACyC,gBAAR,CAA0B,CACxB,KAAKpE,MAAL,EAAeL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuCmB,CAAvC,CAChB,CACD,GAAI,KAAKjE,IAAT,CAAe,CACb,KAAKF,MAAL,EAAeL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuCmB,CAAvC,CAAf,CACA,GAAIxC,CAAG,CAACyB,MAAJ,CAAa,KAAK1C,gBAAtB,CAAwC,CACtC,KAAKV,MAAL,EAAeL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CACXrB,CAAG,CAACgC,IAAJ,CAAWhC,CAAG,CAACyB,MAAf,CAAwB,KAAK1C,gBADlB,CAEhB,CACF,CACF,CAZD,CAcAf,OAAO,CAACC,KAAR,CAAcC,WAAd,CAA0B2B,SAA1B,CAAoC6C,aAApC,CAAoD,SAAS1C,CAAT,CAAc,CAGhE,GAAI,KAAKzB,IAAT,CAAe,CACb,KAAKF,MAAL,EACIL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuCrB,CAAG,CAAC2C,QAAJ,CAAe,KAAK5D,gBAA3D,CACL,CAHD,IAGO,CACL,GAAI6D,CAAAA,CAAU,CAAG,KAAKxE,KAAL,CAAWyE,SAAX,CAAqBrC,QAArB,CAA8B,CAA9B,CAAjB,CACA,GAAIxC,OAAO,CAACyC,cAAR,CAAuBC,KAAvB,CAA6BC,kBAA7B,CAAgDiC,CAAhD,CAAJ,CAAiE,CAC/D,KAAKvE,MAAL,EAAeL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuB6B,MAAvB,CACX/B,CAAG,CAACI,IAAJ,CAAW,KAAKrB,gBADL,CAEXiB,CAAG,CAAC2C,QAAJ,CAAe,KAAK5D,gBAFT,CAGhB,CAJD,IAIO,IAAIf,OAAO,CAACyC,cAAR,CAAuBC,KAAvB,CAA6BG,mBAA7B,CAAiD+B,CAAjD,CAAJ,CAAkE,CACvE,KAAKvE,MAAL,EAAeL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuB6B,MAAvB,CAA8B/B,CAAG,CAACI,IAAlC,CAAwCJ,CAAG,CAAC2C,QAA5C,CAAf,CACA,KAAKtE,MAAL,EAAe,KAAKY,mBAAL,CAAyB6D,UAAzB,EAChB,CACF,CACF,CAjBD,CAmBA9E,OAAO,CAACC,KAAR,CAAcC,WAAd,CAA0B2B,SAA1B,CAAoCkD,QAApC,CAA+C,UAAW,CACxD,GAAIC,CAAAA,CAAgB,CAAG,KAAK5E,KAAL,CAAW4E,gBAAlC,CACA,GAAIA,CAAJ,CAAsB,CACpB,GAAIC,CAAAA,CAAS,CACTD,CAAgB,CAACE,iBAAjB,CAAqCF,CAAgB,CAACvB,MAD1D,CAGA,GAAI,KAAKlD,IAAT,CAAe,CACb,KAAKF,MAAL,EAAeL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuB6B,MAAvB,CAA8B,KAAK3D,KAAL,CAAW+E,MAAzC,CAAiDF,CAAjD,CAChB,CAFD,IAEO,IACDG,CAAAA,CAAI,CAAG,KAAKhF,KAAL,CAAW+E,MAAX,CAAoB,KAAKpE,gBAD/B,CAEDsE,CAAM,CAAG,KAAKjF,KAAL,CAAWyE,SAAX,CAAqBF,QAArB,CAAgC,KAAK5D,gBAF7C,CAGL,KAAKV,MAAL,EAAeL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuB6B,MAAvB,CAA8BqB,CAA9B,CAAoCC,CAApC,CAAf,CACA,KAAKhF,MAAL,EAAeL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuC4B,CAAvC,CAChB,CACD,KAAK5E,MAAL,EAAe,KAAKgB,eAAL,CAAqBiE,MAArB,CAA4B,KAAK/E,IAAjC,CAChB,CAED,GAAI,CAAC,KAAKA,IAAV,CAAgB,CACd,GAAIgF,CAAAA,CAAM,CAAG,KAAKnF,KAAL,CAAWmF,MAAxB,CACA,GAAIvF,OAAO,CAACyC,cAAR,CAAuBC,KAAvB,CAA6BG,mBAA7B,CAAiD0C,CAAM,CAAC/C,QAAP,CAAgB,CAAhB,CAAjD,CAAJ,CAA0E,CACxE,KAAKnC,MAAL,EAAeL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuC,KAAKpC,mBAAL,CAAyBwC,MAAhE,CAChB,CAFD,IAEO,CACL,KAAKpD,MAAL,EACIL,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuCkC,CAAM,CAACC,OAAP,CAAiB,KAAKzE,gBAA7D,CACL,CACF,CACF,CA1BD,CA4BAf,OAAO,CAACC,KAAR,CAAcC,WAAd,CAA0B2B,SAA1B,CAAoC4D,eAApC,CAAsD,SAAS9B,CAAT,CAAgB,IAChE+B,CAAAA,CAAM,CAAG,KAAK3E,gBADkD,CAIhE4E,CAAe,CAAGhC,CAAK,CAACvB,IAAN,CAAauB,CAAK,CAACiC,eAJ2B,CAKhE5B,CAAI,CAAGL,CAAK,CAACkC,UAAN,CAAmBlC,CAAK,CAACF,MAAN,CAAe,CALuB,CAMhEqC,CAAoB,CAAGnC,CAAK,CAACP,KAAN,CAAcO,CAAK,CAACiC,eANqB,CAOhEvD,CAAM,CAAG2B,CAAI,CAAG0B,CAPgD,CASpE,GAAI,KAAKnF,IAAT,CAAe,IACTwF,CAAAA,CAAc,CAAGpC,CAAK,CAACuB,iBAAN,CAA0BQ,CADlC,CAET7B,CAAc,CAAGF,CAAK,CAACF,MAAN,EAChBE,CAAK,CAACuB,iBAAN,CAA0BvB,CAAK,CAACG,gBADhB,EACoC4B,CAH5C,CAOb,KAAKpF,YAAL,EAAqBN,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuB6B,MAAvB,CAFR4B,CAAe,CAAGD,CAEV,CAAsCrD,CAAtC,EAEjBrC,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuC0C,CAAvC,CAFiB,CAIjB,KAAK1E,eAAL,CAAqB4C,QAArB,CAA8B,KAAK1D,IAAnC,CAJiB,CAMjBP,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuCQ,CAAvC,CANiB,CAQjB7D,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuCyC,CAAvC,CACL,CAhBD,IAgBO,CAEL,KAAKxF,YAAL,EAEIN,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuB6B,MAAvB,CAA8BJ,CAAK,CAACvB,IAAN,CAAauB,CAAK,CAACP,KAAnB,CAA2BsC,CAAzD,CAAiErD,CAAjE,EAEArC,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuCM,CAAK,CAACF,MAA7C,CAFA,CAGAzD,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuBmB,UAAvB,CAAkC,GAAlC,CAAuC,CAACyC,CAAxC,CAHA,CAKA9F,OAAO,CAACiC,KAAR,CAAcC,QAAd,CAAuB6B,MAAvB,CAA8B4B,CAA9B,CAA+C3B,CAAI,CAAGL,CAAK,CAACuB,iBAA5D,CALA,CAOA,KAAK7D,eAAL,CAAqB4C,QAArB,CAA8B,KAAK1D,IAAnC,CACL,CACF,CAtCD","sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for adding highlights on block, for rendering in\n * compatibility mode.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.geras.Highlighter');\n\ngoog.require('Blockly.blockRendering.BottomRow');\ngoog.require('Blockly.blockRendering.InputRow');\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.RenderInfo');\ngoog.require('Blockly.blockRendering.Row');\ngoog.require('Blockly.blockRendering.SpacerRow');\ngoog.require('Blockly.blockRendering.TopRow');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.utils.svgPaths');\n\n\n/**\n * An object that adds highlights to a block based on the given rendering\n * information.\n *\n * Highlighting is interesting because the highlights do not fully enclose the\n * block.  Instead, they are positioned based on a light source in the top left.\n * This means that rendering highlights requires exact information about the\n * position of each part of the block.  The resulting paths are not continuous\n * or closed paths.  The highlights for tabs and notches are loosely based on\n * tab and notch shapes, but are not exactly the same.\n *\n * @param {!Blockly.geras.RenderInfo} info An object containing all\n *     information needed to render this block.\n * @package\n * @constructor\n */\nBlockly.geras.Highlighter = function(info) {\n  this.info_ = info;\n  this.steps_ = '';\n  this.inlineSteps_ = '';\n\n  this.RTL_ = this.info_.RTL;\n\n  var renderer = /** @type {!Blockly.geras.Renderer} */ (info.getRenderer());\n\n  /**\n   * The renderer's constant provider.\n   * @type {!Blockly.blockRendering.ConstantProvider}\n   */\n  this.constants_ = renderer.getConstants();\n\n  /**\n   * @type {!Blockly.geras.HighlightConstantProvider}\n   */\n  this.highlightConstants_ = renderer.getHighlightConstants();\n  /**\n   * The offset between the block's main path and highlight path.\n   * @type {number}\n   * @private\n   */\n  this.highlightOffset_ = this.highlightConstants_.OFFSET;\n\n  this.outsideCornerPaths_ = this.highlightConstants_.OUTSIDE_CORNER;\n  this.insideCornerPaths_ = this.highlightConstants_.INSIDE_CORNER;\n  this.puzzleTabPaths_ = this.highlightConstants_.PUZZLE_TAB;\n  this.notchPaths_ = this.highlightConstants_.NOTCH;\n  this.startPaths_ = this.highlightConstants_.START_HAT;\n  this.jaggedTeethPaths_ =\n      this.highlightConstants_.JAGGED_TEETH;\n};\n\n/**\n * Get the steps for the highlight path.\n * @return {string} The steps for the highlight path.\n * @package\n */\nBlockly.geras.Highlighter.prototype.getPath = function() {\n  return this.steps_ + '\\n' + this.inlineSteps_;\n};\n\nBlockly.geras.Highlighter.prototype.drawTopCorner = function(row) {\n  this.steps_ += Blockly.utils.svgPaths.moveBy(row.xPos, this.info_.startY);\n  for (var i = 0, elem; (elem = row.elements[i]); i++) {\n    if (Blockly.blockRendering.Types.isLeftSquareCorner(elem)) {\n      this.steps_ += this.highlightConstants_.START_POINT;\n    } else if (Blockly.blockRendering.Types.isLeftRoundedCorner(elem)) {\n      this.steps_ += this.outsideCornerPaths_.topLeft(this.RTL_);\n    } else if (Blockly.blockRendering.Types.isPreviousConnection(elem)) {\n      this.steps_ += this.notchPaths_.pathLeft;\n    } else if (Blockly.blockRendering.Types.isHat(elem)) {\n      this.steps_ += this.startPaths_.path(this.RTL_);\n    } else if (Blockly.blockRendering.Types.isSpacer(elem) && elem.width != 0) {\n      // The end point of the spacer needs to be offset by the highlight amount.\n      // So instead of using the spacer's width for a relative horizontal, use\n      // its width and position for an absolute horizontal move.\n      this.steps_ += Blockly.utils.svgPaths.lineOnAxis('H',\n          elem.xPos + elem.width - this.highlightOffset_);\n    }\n  }\n\n  var right = row.xPos + row.width - this.highlightOffset_;\n  this.steps_ += Blockly.utils.svgPaths.lineOnAxis('H', right);\n};\n\nBlockly.geras.Highlighter.prototype.drawJaggedEdge_ = function(row) {\n  if (this.info_.RTL) {\n    var remainder =\n        row.height - this.jaggedTeethPaths_.height - this.highlightOffset_;\n    this.steps_ += this.jaggedTeethPaths_.pathLeft +\n        Blockly.utils.svgPaths.lineOnAxis('v', remainder);\n  }\n};\n\nBlockly.geras.Highlighter.prototype.drawValueInput = function(row) {\n  var input = row.getLastInput();\n  if (this.RTL_) {\n    var belowTabHeight = row.height - input.connectionHeight;\n\n    this.steps_ +=\n        Blockly.utils.svgPaths.moveTo(\n            input.xPos + input.width - this.highlightOffset_, row.yPos) +\n        this.puzzleTabPaths_.pathDown(this.RTL_) +\n        Blockly.utils.svgPaths.lineOnAxis('v', belowTabHeight);\n  } else {\n    this.steps_ +=\n        Blockly.utils.svgPaths.moveTo(input.xPos + input.width, row.yPos) +\n        this.puzzleTabPaths_.pathDown(this.RTL_);\n  }\n};\n\nBlockly.geras.Highlighter.prototype.drawStatementInput = function(row) {\n  var input = row.getLastInput();\n  if (this.RTL_) {\n    var innerHeight = row.height - (2 * this.insideCornerPaths_.height);\n    this.steps_ +=\n        Blockly.utils.svgPaths.moveTo(input.xPos, row.yPos) +\n        this.insideCornerPaths_.pathTop(this.RTL_) +\n        Blockly.utils.svgPaths.lineOnAxis('v', innerHeight) +\n        this.insideCornerPaths_.pathBottom(this.RTL_) +\n        Blockly.utils.svgPaths.lineTo(\n            row.width - input.xPos - this.insideCornerPaths_.width, 0);\n  } else {\n    this.steps_ +=\n        Blockly.utils.svgPaths.moveTo(input.xPos, row.yPos + row.height) +\n        this.insideCornerPaths_.pathBottom(this.RTL_) +\n        Blockly.utils.svgPaths.lineTo(\n            row.width - input.xPos - this.insideCornerPaths_.width, 0);\n  }\n};\n\nBlockly.geras.Highlighter.prototype.drawRightSideRow = function(row) {\n  var rightEdge = row.xPos + row.width - this.highlightOffset_;\n  if (row.followsStatement) {\n    this.steps_ += Blockly.utils.svgPaths.lineOnAxis('H', rightEdge);\n  }\n  if (this.RTL_) {\n    this.steps_ += Blockly.utils.svgPaths.lineOnAxis('H', rightEdge);\n    if (row.height > this.highlightOffset_) {\n      this.steps_ += Blockly.utils.svgPaths.lineOnAxis('V',\n          row.yPos + row.height - this.highlightOffset_);\n    }\n  }\n};\n\nBlockly.geras.Highlighter.prototype.drawBottomRow = function(row) {\n  // Highlight the vertical edge of the bottom row on the input side.\n  // Highlighting is always from the top left, both in LTR and RTL.\n  if (this.RTL_) {\n    this.steps_ +=\n        Blockly.utils.svgPaths.lineOnAxis('V', row.baseline - this.highlightOffset_);\n  } else {\n    var cornerElem = this.info_.bottomRow.elements[0];\n    if (Blockly.blockRendering.Types.isLeftSquareCorner(cornerElem)) {\n      this.steps_ += Blockly.utils.svgPaths.moveTo(\n          row.xPos + this.highlightOffset_,\n          row.baseline - this.highlightOffset_);\n    } else if (Blockly.blockRendering.Types.isLeftRoundedCorner(cornerElem)) {\n      this.steps_ += Blockly.utils.svgPaths.moveTo(row.xPos, row.baseline);\n      this.steps_ += this.outsideCornerPaths_.bottomLeft();\n    }\n  }\n};\n\nBlockly.geras.Highlighter.prototype.drawLeft = function() {\n  var outputConnection = this.info_.outputConnection;\n  if (outputConnection) {\n    var tabBottom =\n        outputConnection.connectionOffsetY + outputConnection.height;\n    // Draw a line up to the bottom of the tab.\n    if (this.RTL_) {\n      this.steps_ += Blockly.utils.svgPaths.moveTo(this.info_.startX, tabBottom);\n    } else {\n      var left = this.info_.startX + this.highlightOffset_;\n      var bottom = this.info_.bottomRow.baseline - this.highlightOffset_;\n      this.steps_ += Blockly.utils.svgPaths.moveTo(left, bottom);\n      this.steps_ += Blockly.utils.svgPaths.lineOnAxis('V', tabBottom);\n    }\n    this.steps_ += this.puzzleTabPaths_.pathUp(this.RTL_);\n  }\n\n  if (!this.RTL_) {\n    var topRow = this.info_.topRow;\n    if (Blockly.blockRendering.Types.isLeftRoundedCorner(topRow.elements[0])) {\n      this.steps_ += Blockly.utils.svgPaths.lineOnAxis('V', this.outsideCornerPaths_.height);\n    } else {\n      this.steps_ +=\n          Blockly.utils.svgPaths.lineOnAxis('V', topRow.capline + this.highlightOffset_);\n    }\n  }\n};\n\nBlockly.geras.Highlighter.prototype.drawInlineInput = function(input) {\n  var offset = this.highlightOffset_;\n\n  // Relative to the block's left.\n  var connectionRight = input.xPos + input.connectionWidth;\n  var yPos = input.centerline - input.height / 2;\n  var bottomHighlightWidth = input.width - input.connectionWidth;\n  var startY = yPos + offset;\n\n  if (this.RTL_) {\n    var aboveTabHeight = input.connectionOffsetY - offset;\n    var belowTabHeight = input.height -\n        (input.connectionOffsetY + input.connectionHeight) + offset;\n\n    var startX = connectionRight - offset;\n\n    this.inlineSteps_ += Blockly.utils.svgPaths.moveTo(startX, startY) +\n        // Right edge above tab.\n        Blockly.utils.svgPaths.lineOnAxis('v', aboveTabHeight) +\n        // Back of tab.\n        this.puzzleTabPaths_.pathDown(this.RTL_) +\n        // Right edge below tab.\n        Blockly.utils.svgPaths.lineOnAxis('v', belowTabHeight) +\n        // Bottom.\n        Blockly.utils.svgPaths.lineOnAxis('h', bottomHighlightWidth);\n  } else {\n\n    this.inlineSteps_ +=\n        // Go to top right corner.\n        Blockly.utils.svgPaths.moveTo(input.xPos + input.width + offset, startY) +\n        // Highlight right edge, bottom.\n        Blockly.utils.svgPaths.lineOnAxis('v', input.height) +\n        Blockly.utils.svgPaths.lineOnAxis('h', -bottomHighlightWidth) +\n        // Go to top of tab.\n        Blockly.utils.svgPaths.moveTo(connectionRight, yPos + input.connectionOffsetY) +\n        // Short highlight glint at bottom of tab.\n        this.puzzleTabPaths_.pathDown(this.RTL_);\n  }\n};\n"],"file":"highlighter.min.js"}