{"version":3,"sources":["../../../../../src/blockly/core/renderers/geras/path_object.js"],"names":["goog","provide","require","Blockly","geras","PathObject","root","style","constants","svgRoot","svgPathDark","utils","dom","createSvgElement","svgPath","svgPathLight","colourDark","object","inherits","blockRendering","prototype","setPath","mainPath","setAttribute","setHighlightPath","highlightPath","flipRTL","applyColour","block","display","colourTertiary","superClass_","call","setStyle","blockStyle","colour","blend","colourPrimary","updateHighlighted","highlighted","embossFilterId","updateShadow_","shadow","colourSecondary","updateDisabled_","disabled"],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that owns a block's rendering SVG elements.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n\n'use strict';\n\ngoog.provide('Blockly.geras.PathObject');\n\ngoog.require('Blockly.blockRendering.PathObject');\ngoog.require('Blockly.geras.ConstantProvider');\ngoog.require('Blockly.Theme');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * An object that handles creating and setting each of the SVG elements\n * used by the renderer.\n * @param {!SVGElement} root The root SVG element.\n * @param {!Blockly.Theme.BlockStyle} style The style object to use for\n *     colouring.\n * @param {!Blockly.geras.ConstantProvider} constants The renderer's constants.\n * @constructor\n * @extends {Blockly.blockRendering.PathObject}\n * @package\n */\nBlockly.geras.PathObject = function(root, style, constants) {\n  /**\n   * The renderer's constant provider.\n   * @type {!Blockly.geras.ConstantProvider}\n   */\n  this.constants = constants;\n\n  this.svgRoot = root;\n\n  // The order of creation for these next three matters, because that\n  // effectively sets their z-indices.\n\n  /**\n   * The dark path of the block.\n   * @type {SVGElement}\n   * @package\n   */\n  this.svgPathDark = Blockly.utils.dom.createSvgElement('path',\n      {'class': 'blocklyPathDark', 'transform': 'translate(1,1)'},\n      this.svgRoot);\n\n  /**\n   * The primary path of the block.\n   * @type {!SVGElement}\n   * @package\n   */\n  this.svgPath = Blockly.utils.dom.createSvgElement('path',\n      {'class': 'blocklyPath'}, this.svgRoot);\n\n  /**\n   * The light path of the block.\n   * @type {SVGElement}\n   * @package\n   */\n  this.svgPathLight = Blockly.utils.dom.createSvgElement('path',\n      {'class': 'blocklyPathLight'}, this.svgRoot);\n\n  /**\n   * The colour of the dark path on the block in '#RRGGBB' format.\n   * @type {string}\n   * @package\n   */\n  this.colourDark = '#000000';\n\n  /**\n   * The style object to use when colouring block paths.\n   * @type {!Blockly.Theme.BlockStyle}\n   * @package\n   */\n  this.style = style;\n};\nBlockly.utils.object.inherits(Blockly.geras.PathObject,\n    Blockly.blockRendering.PathObject);\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.setPath = function(mainPath) {\n  this.svgPath.setAttribute('d', mainPath);\n  this.svgPathDark.setAttribute('d', mainPath);\n};\n\n/**\n * Set the highlight path generated by the renderer onto the SVG element.\n * @param {string} highlightPath The highlight path.\n * @package\n */\nBlockly.geras.PathObject.prototype.setHighlightPath = function(highlightPath) {\n  this.svgPathLight.setAttribute('d', highlightPath);\n};\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.flipRTL = function() {\n  // Mirror the block's path.\n  this.svgPath.setAttribute('transform', 'scale(-1 1)');\n  this.svgPathLight.setAttribute('transform', 'scale(-1 1)');\n  this.svgPathDark.setAttribute('transform', 'translate(1,1) scale(-1 1)');\n};\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.applyColour = function(block) {\n  this.svgPathLight.style.display = '';\n  this.svgPathDark.style.display = '';\n  this.svgPathLight.setAttribute('stroke', this.style.colourTertiary);\n  this.svgPathDark.setAttribute('fill', this.colourDark);\n\n  Blockly.geras.PathObject.superClass_.applyColour.call(this, block);\n\n  this.svgPath.setAttribute('stroke', 'none');\n};\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.setStyle = function(blockStyle) {\n  this.style = blockStyle;\n  this.colourDark =\n      Blockly.utils.colour.blend('#000', this.style.colourPrimary, 0.2) ||\n      this.colourDark;\n};\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.updateHighlighted = function(highlighted) {\n  if (highlighted) {\n    this.svgPath.setAttribute('filter',\n        'url(#' + this.constants.embossFilterId + ')');\n    this.svgPathLight.style.display = 'none';\n  } else {\n    this.svgPath.setAttribute('filter', 'none');\n    this.svgPathLight.style.display = 'inline';\n  }\n};\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.updateShadow_ = function(shadow) {\n  if (shadow) {\n    this.svgPathLight.style.display = 'none';\n    this.svgPathDark.setAttribute('fill', this.style.colourSecondary);\n    this.svgPath.setAttribute('stroke', 'none');\n    this.svgPath.setAttribute('fill', this.style.colourSecondary);\n  }\n};\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.updateDisabled_ = function(disabled) {\n  Blockly.geras.PathObject.superClass_.updateDisabled_.call(this, disabled);\n  if (disabled) {\n    this.svgPath.setAttribute('stroke', 'none');\n  }\n};\n"],"file":"path_object.min.js"}