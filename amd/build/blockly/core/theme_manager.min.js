'use strict';goog.provide("Blockly.ThemeManager");goog.require("Blockly.Theme");Blockly.ThemeManager=function(a,b){this.workspace_=a;this.theme_=b;this.subscribedWorkspaces_=[];this.componentDB_=Object.create(null)};Blockly.ThemeManager.Component;Blockly.ThemeManager.prototype.getTheme=function(){return this.theme_};Blockly.ThemeManager.prototype.setTheme=function(a){var b=this.theme_;this.theme_=a;var c=this.workspace_.getInjectionDiv();if(c){if(b){Blockly.utils.dom.removeClass(c,b.getClassName())}Blockly.utils.dom.addClass(c,this.theme_.getClassName())}for(var d=0,e;e=this.subscribedWorkspaces_[d];d++){e.refreshTheme()}for(var d=0,f=Object.keys(this.componentDB_),g;g=f[d];d++){for(var h=0,k;k=this.componentDB_[g][h];h++){var l=k.element,m=k.propertyName,n=this.theme_&&this.theme_.getComponentStyle(g);l.style[m]=n||""}}Blockly.hideChaff()};Blockly.ThemeManager.prototype.subscribeWorkspace=function(a){this.subscribedWorkspaces_.push(a)};Blockly.ThemeManager.prototype.unsubscribeWorkspace=function(a){var b=this.subscribedWorkspaces_.indexOf(a);if(0>b){throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}this.subscribedWorkspaces_.splice(b,1)};Blockly.ThemeManager.prototype.subscribe=function(a,b,c){if(!this.componentDB_[b]){this.componentDB_[b]=[]}this.componentDB_[b].push({element:a,propertyName:c});var d=this.theme_&&this.theme_.getComponentStyle(b);a.style[c]=d||""};Blockly.ThemeManager.prototype.unsubscribe=function(a){if(!a){return}for(var b=Object.keys(this.componentDB_),d=0,e,f;e=b[d];d++){f=this.componentDB_[e];for(var g=f.length-1;0<=g;g--){if(f[g].element===a){f.splice(g,1)}}if(!this.componentDB_[e].length){delete this.componentDB_[e]}}};Blockly.ThemeManager.prototype.dispose=function(){this.owner_=null;this.theme_=null;this.subscribedWorkspaces_=null;this.componentDB_=null};
//# sourceMappingURL=theme_manager.min.js.map
