'use strict';goog.provide("Blockly.WorkspaceAudio");goog.require("Blockly.utils");goog.require("Blockly.utils.global");goog.require("Blockly.utils.userAgent");Blockly.WorkspaceAudio=function(a){this.parentWorkspace_=a;this.SOUNDS_=Object.create(null)};Blockly.WorkspaceAudio.prototype.lastSound_=null;Blockly.WorkspaceAudio.prototype.dispose=function(){this.parentWorkspace_=null;this.SOUNDS_=null};Blockly.WorkspaceAudio.prototype.load=function(a,b){if(!a.length){return}try{var c=new Blockly.utils.global.Audio}catch(a){return}for(var d,e=0;e<a.length;e++){var f=a[e],g=f.match(/\.(\w+)$/);if(g&&c.canPlayType("audio/"+g[1])){d=new Blockly.utils.global.Audio(f);break}}if(d&&d.play){this.SOUNDS_[b]=d}};Blockly.WorkspaceAudio.prototype.preload=function(){for(var a in this.SOUNDS_){var b=this.SOUNDS_[a];b.volume=.01;var c=b.play();if(c!==void 0){c.then(b.pause).catch(function(){})}else{b.pause()}if(Blockly.utils.userAgent.IPAD||Blockly.utils.userAgent.IPHONE){break}}};Blockly.WorkspaceAudio.prototype.play=function(a,b){var c=this.SOUNDS_[a];if(c){var d=new Date;if(null!=this.lastSound_&&d-this.lastSound_<Blockly.SOUND_LIMIT){return}this.lastSound_=d;var e;if(Blockly.utils.userAgent.IPAD||Blockly.utils.userAgent.ANDROID){e=c}else{e=c.cloneNode()}e.volume=b===void 0?1:b;e.play()}else if(this.parentWorkspace_){this.parentWorkspace_.getAudioManager().play(a,b)}};
//# sourceMappingURL=workspace_audio.min.js.map
