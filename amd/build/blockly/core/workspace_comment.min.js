'use strict';goog.provide("Blockly.WorkspaceComment");goog.require("Blockly.Events");goog.require("Blockly.Events.CommentChange");goog.require("Blockly.Events.CommentCreate");goog.require("Blockly.Events.CommentDelete");goog.require("Blockly.Events.CommentMove");goog.require("Blockly.utils");goog.require("Blockly.utils.Coordinate");goog.require("Blockly.utils.xml");Blockly.WorkspaceComment=function(a,b,c,d,e){this.id=e&&!a.getCommentById(e)?e:Blockly.utils.genUid();a.addTopComment(this);this.xy_=new Blockly.utils.Coordinate(0,0);this.height_=c;this.width_=d;this.workspace=a;this.RTL=a.RTL;this.deletable_=!0;this.movable_=!0;this.editable_=!0;this.content_=b;this.isComment=!0;Blockly.WorkspaceComment.fireCreateEvent(this)};Blockly.WorkspaceComment.prototype.dispose=function(){if(!this.workspace){return}if(Blockly.Events.isEnabled()){Blockly.Events.fire(new Blockly.Events.CommentDelete(this))}this.workspace.removeTopComment(this);this.workspace=null};Blockly.WorkspaceComment.prototype.getHeight=function(){return this.height_};Blockly.WorkspaceComment.prototype.setHeight=function(a){this.height_=a};Blockly.WorkspaceComment.prototype.getWidth=function(){return this.width_};Blockly.WorkspaceComment.prototype.setWidth=function(a){this.width_=a};Blockly.WorkspaceComment.prototype.getXY=function(){return new Blockly.utils.Coordinate(this.xy_.x,this.xy_.y)};Blockly.WorkspaceComment.prototype.moveBy=function(a,b){var c=new Blockly.Events.CommentMove(this);this.xy_.translate(a,b);c.recordNew();Blockly.Events.fire(c)};Blockly.WorkspaceComment.prototype.isDeletable=function(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)};Blockly.WorkspaceComment.prototype.setDeletable=function(a){this.deletable_=a};Blockly.WorkspaceComment.prototype.isMovable=function(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)};Blockly.WorkspaceComment.prototype.setMovable=function(a){this.movable_=a};Blockly.WorkspaceComment.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)};Blockly.WorkspaceComment.prototype.setEditable=function(a){this.editable_=a};Blockly.WorkspaceComment.prototype.getContent=function(){return this.content_};Blockly.WorkspaceComment.prototype.setContent=function(a){if(this.content_!=a){Blockly.Events.fire(new Blockly.Events.CommentChange(this,this.content_,a));this.content_=a}};Blockly.WorkspaceComment.prototype.toXmlWithXY=function(a){var b=this.toXml(a);b.setAttribute("x",Math.round(this.xy_.x));b.setAttribute("y",Math.round(this.xy_.y));b.setAttribute("h",this.height_);b.setAttribute("w",this.width_);return b};Blockly.WorkspaceComment.prototype.toXml=function(a){var b=Blockly.utils.xml.createElement("comment");if(!a){b.id=this.id}b.textContent=this.getContent();return b};Blockly.WorkspaceComment.fireCreateEvent=function(a){if(Blockly.Events.isEnabled()){var b=Blockly.Events.getGroup();if(!b){Blockly.Events.setGroup(!0)}try{Blockly.Events.fire(new Blockly.Events.CommentCreate(a))}finally{if(!b){Blockly.Events.setGroup(!1)}}}};Blockly.WorkspaceComment.fromXml=function(a,b){var c=Blockly.WorkspaceComment.parseAttributes(a),d=new Blockly.WorkspaceComment(b,c.content,c.h,c.w,c.id),e=parseInt(a.getAttribute("x"),10),f=parseInt(a.getAttribute("y"),10);if(!isNaN(e)&&!isNaN(f)){d.moveBy(e,f)}Blockly.WorkspaceComment.fireCreateEvent(d);return d};Blockly.WorkspaceComment.parseAttributes=function(a){var b=a.getAttribute("h"),c=a.getAttribute("w");return{id:a.getAttribute("id"),h:b?parseInt(b,10):100,w:c?parseInt(c,10):100,x:parseInt(a.getAttribute("x"),10),y:parseInt(a.getAttribute("y"),10),content:a.textContent}};
//# sourceMappingURL=workspace_comment.min.js.map
