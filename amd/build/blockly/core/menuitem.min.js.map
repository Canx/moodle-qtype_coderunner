{"version":3,"sources":["../../../src/blockly/core/menuitem.js"],"names":["goog","provide","require","Blockly","MenuItem","content","opt_value","content_","value_","enabled_","element_","rightToLeft_","roleName_","checkable_","checked_","highlight_","actionHandler_","prototype","createDom","element","document","createElement","id","utils","IdGenerator","getNextUniqueId","className","checkbox","appendChild","contentDom","createTextNode","aria","setRole","setState","State","SELECTED","DISABLED","dispose","getElement","getId","getValue","setRightToLeft","rtl","roleName","setCheckable","checkable","setChecked","checked","setHighlighted","highlight","el","isEnabled","nameDep","dom","addClass","removeClass","setEnabled","enabled","performAction","onAction","fn","obj","bind"],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly menu item similar to Closure's goog.ui.MenuItem\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.MenuItem');\n\ngoog.require('Blockly.utils.aria');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.IdGenerator');\n\n\n/**\n * Class representing an item in a menu.\n *\n * @param {string|!HTMLElement} content Text caption to display as the content\n *     of the item, or a HTML element to display.\n * @param {string=} opt_value Data/model associated with the menu item.\n * @constructor\n */\nBlockly.MenuItem = function(content, opt_value) {\n  /**\n   * Human-readable text of this menu item, or the HTML element to display.\n   * @type {string|!HTMLElement}\n   * @private\n   */\n  this.content_ = content;\n\n  /**\n   * Machine-readable value of this menu item.\n   * @type {string|undefined}\n   * @private\n   */\n  this.value_ = opt_value;\n\n  /**\n   * Is the menu item clickable, as opposed to greyed-out.\n   * @type {boolean}\n   * @private\n   */\n  this.enabled_ = true;\n\n  /**\n   * The DOM element for the menu item.\n   * @type {?Element}\n   * @private\n   */\n  this.element_ = null;\n\n  /**\n   * Whether the menu item is rendered right-to-left.\n   * @type {boolean}\n   * @private\n   */\n  this.rightToLeft_ = false;\n\n  /**\n   * ARIA name for this menu.\n   * @type {?Blockly.utils.aria.Role}\n   * @private\n   */\n  this.roleName_ = null;\n\n  /**\n   * Is this menu item checkable.\n   * @type {boolean}\n   * @private\n   */\n  this.checkable_ = false;\n\n  /**\n   * Is this menu item currently checked.\n   * @type {boolean}\n   * @private\n   */\n  this.checked_ = false;\n\n  /**\n   * Is this menu item currently highlighted.\n   * @type {boolean}\n   * @private\n   */\n  this.highlight_ = false;\n\n  /**\n   * Bound function to call when this menu item is clicked.\n   * @type {Function}\n   * @private\n   */\n  this.actionHandler_ = null;\n};\n\n\n/**\n * Creates the menuitem's DOM.\n * @return {!Element} Completed DOM.\n */\nBlockly.MenuItem.prototype.createDom = function() {\n  var element = document.createElement('div');\n  element.id = Blockly.utils.IdGenerator.getNextUniqueId();\n  this.element_ = element;\n\n  // Set class and style\n  // goog-menuitem* is deprecated, use blocklyMenuItem*.  May 2020.\n  element.className = 'blocklyMenuItem goog-menuitem ' +\n      (this.enabled_ ? '' : 'blocklyMenuItemDisabled goog-menuitem-disabled ') +\n      (this.checked_ ? 'blocklyMenuItemSelected goog-option-selected ' : '') +\n      (this.highlight_ ?\n        'blocklyMenuItemHighlight goog-menuitem-highlight ' : '') +\n      (this.rightToLeft_ ? 'blocklyMenuItemRtl goog-menuitem-rtl ' : '');\n\n  var content = document.createElement('div');\n  content.className = 'blocklyMenuItemContent goog-menuitem-content';\n  // Add a checkbox for checkable menu items.\n  if (this.checkable_) {\n    var checkbox = document.createElement('div');\n    checkbox.className = 'blocklyMenuItemCheckbox goog-menuitem-checkbox';\n    content.appendChild(checkbox);\n  }\n\n  var contentDom = /** @type {!HTMLElement} */ (this.content_);\n  if (typeof this.content_ == 'string') {\n    contentDom = document.createTextNode(this.content_);\n  }\n  content.appendChild(contentDom);\n  element.appendChild(content);\n\n  // Initialize ARIA role and state.\n  if (this.roleName_) {\n    Blockly.utils.aria.setRole(element, this.roleName_);\n  }\n  Blockly.utils.aria.setState(element, Blockly.utils.aria.State.SELECTED,\n      (this.checkable_ && this.checked_) || false);\n  Blockly.utils.aria.setState(element, Blockly.utils.aria.State.DISABLED,\n      !this.enabled_);\n\n  return element;\n};\n\n/**\n * Dispose of this menu item.\n */\nBlockly.MenuItem.prototype.dispose = function() {\n  this.element_ = null;\n};\n\n/**\n * Gets the menu item's element.\n * @return {Element} The DOM element.\n * @package\n */\nBlockly.MenuItem.prototype.getElement = function() {\n  return this.element_;\n};\n\n/**\n * Gets the unique ID for this menu item.\n * @return {string} Unique component ID.\n * @package\n */\nBlockly.MenuItem.prototype.getId = function() {\n  return this.element_.id;\n};\n\n/**\n * Gets the value associated with the menu item.\n * @return {*} value Value associated with the menu item.\n * @package\n */\nBlockly.MenuItem.prototype.getValue = function() {\n  return this.value_;\n};\n\n/**\n * Set menu item's rendering direction.\n * @param {boolean} rtl True if RTL, false if LTR.\n * @package\n */\nBlockly.MenuItem.prototype.setRightToLeft = function(rtl) {\n  this.rightToLeft_ = rtl;\n};\n\n/**\n * Set the menu item's accessibility role.\n * @param {!Blockly.utils.aria.Role} roleName Role name.\n * @package\n */\nBlockly.MenuItem.prototype.setRole = function(roleName) {\n  this.roleName_ = roleName;\n};\n\n/**\n * Sets the menu item to be checkable or not. Set to true for menu items\n * that represent checkable options.\n * @param {boolean} checkable Whether the menu item is checkable.\n * @package\n */\nBlockly.MenuItem.prototype.setCheckable = function(checkable) {\n  this.checkable_ = checkable;\n};\n\n/**\n * Checks or unchecks the component.\n * @param {boolean} checked Whether to check or uncheck the component.\n * @package\n */\nBlockly.MenuItem.prototype.setChecked = function(checked) {\n  this.checked_ = checked;\n};\n\n/**\n * Highlights or unhighlights the component.\n * @param {boolean} highlight Whether to highlight or unhighlight the component.\n * @package\n */\nBlockly.MenuItem.prototype.setHighlighted = function(highlight) {\n  this.highlight_ = highlight;\n\n  var el = this.getElement();\n  if (el && this.isEnabled()) {\n    // goog-menuitem-highlight is deprecated, use blocklyMenuItemHighlight.\n    // May 2020.\n    var name = 'blocklyMenuItemHighlight';\n    var nameDep = 'goog-menuitem-highlight';\n    if (highlight) {\n      Blockly.utils.dom.addClass(el, name);\n      Blockly.utils.dom.addClass(el, nameDep);\n    } else {\n      Blockly.utils.dom.removeClass(el, name);\n      Blockly.utils.dom.removeClass(el, nameDep);\n    }\n  }\n};\n\n/**\n * Returns true if the menu item is enabled, false otherwise.\n * @return {boolean} Whether the menu item is enabled.\n * @package\n */\nBlockly.MenuItem.prototype.isEnabled = function() {\n  return this.enabled_;\n};\n\n/**\n * Enables or disables the menu item.\n * @param {boolean} enabled Whether to enable or disable the menu item.\n * @package\n */\nBlockly.MenuItem.prototype.setEnabled = function(enabled) {\n  this.enabled_ = enabled;\n};\n\n/**\n * Performs the appropriate action when the menu item is activated\n * by the user.\n * @package\n */\nBlockly.MenuItem.prototype.performAction = function() {\n  if (this.isEnabled() && this.actionHandler_) {\n    this.actionHandler_(this);\n  }\n};\n\n/**\n * Set the handler that's called when the menu item is activated by the user.\n * `obj` will be used as the 'this' object in the function when called.\n * @param {function(!Blockly.MenuItem)} fn The handler.\n * @param {!Object} obj Used as the 'this' object in fn when called.\n * @package\n */\nBlockly.MenuItem.prototype.onAction = function(fn, obj) {\n  this.actionHandler_ = fn.bind(obj);\n};\n"],"file":"menuitem.min.js"}