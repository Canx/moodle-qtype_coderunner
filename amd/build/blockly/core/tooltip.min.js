'use strict';goog.provide("Blockly.Tooltip");goog.require("Blockly.utils.string");Blockly.Tooltip.visible=!1;Blockly.Tooltip.blocked_=!1;Blockly.Tooltip.LIMIT=50;Blockly.Tooltip.mouseOutPid_=0;Blockly.Tooltip.showPid_=0;Blockly.Tooltip.lastX_=0;Blockly.Tooltip.lastY_=0;Blockly.Tooltip.element_=null;Blockly.Tooltip.poisonedElement_=null;Blockly.Tooltip.OFFSET_X=0;Blockly.Tooltip.OFFSET_Y=10;Blockly.Tooltip.RADIUS_OK=10;Blockly.Tooltip.HOVER_MS=750;Blockly.Tooltip.MARGINS=5;Blockly.Tooltip.DIV=null;Blockly.Tooltip.createDom=function(){if(Blockly.Tooltip.DIV){return}Blockly.Tooltip.DIV=document.createElement("div");Blockly.Tooltip.DIV.className="blocklyTooltipDiv";var a=Blockly.parentContainer||document.body;a.appendChild(Blockly.Tooltip.DIV)};Blockly.Tooltip.bindMouseEvents=function(a){a.mouseOverWrapper_=Blockly.bindEvent_(a,"mouseover",null,Blockly.Tooltip.onMouseOver_);a.mouseOutWrapper_=Blockly.bindEvent_(a,"mouseout",null,Blockly.Tooltip.onMouseOut_);a.addEventListener("mousemove",Blockly.Tooltip.onMouseMove_,!1)};Blockly.Tooltip.unbindMouseEvents=function(a){if(!a){return}Blockly.unbindEvent_(a.mouseOverWrapper_);Blockly.unbindEvent_(a.mouseOutWrapper_);a.removeEventListener("mousemove",Blockly.Tooltip.onMouseMove_)};Blockly.Tooltip.onMouseOver_=function(a){if(Blockly.Tooltip.blocked_){return}var b=a.currentTarget;while("string"!=typeof b.tooltip&&"function"!=typeof b.tooltip){b=b.tooltip}if(Blockly.Tooltip.element_!=b){Blockly.Tooltip.hide();Blockly.Tooltip.poisonedElement_=null;Blockly.Tooltip.element_=b}clearTimeout(Blockly.Tooltip.mouseOutPid_)};Blockly.Tooltip.onMouseOut_=function(){if(Blockly.Tooltip.blocked_){return}Blockly.Tooltip.mouseOutPid_=setTimeout(function(){Blockly.Tooltip.element_=null;Blockly.Tooltip.poisonedElement_=null;Blockly.Tooltip.hide()},1);clearTimeout(Blockly.Tooltip.showPid_)};Blockly.Tooltip.onMouseMove_=function(a){if(!Blockly.Tooltip.element_||!Blockly.Tooltip.element_.tooltip){return}else if(Blockly.Tooltip.blocked_){return}if(Blockly.Tooltip.visible){var b=Blockly.Tooltip.lastX_-a.pageX,c=Blockly.Tooltip.lastY_-a.pageY;if(Math.sqrt(b*b+c*c)>Blockly.Tooltip.RADIUS_OK){Blockly.Tooltip.hide()}}else if(Blockly.Tooltip.poisonedElement_!=Blockly.Tooltip.element_){clearTimeout(Blockly.Tooltip.showPid_);Blockly.Tooltip.lastX_=a.pageX;Blockly.Tooltip.lastY_=a.pageY;Blockly.Tooltip.showPid_=setTimeout(Blockly.Tooltip.show_,Blockly.Tooltip.HOVER_MS)}};Blockly.Tooltip.dispose=function(){Blockly.Tooltip.element_=null;Blockly.Tooltip.poisonedElement_=null;Blockly.Tooltip.hide()};Blockly.Tooltip.hide=function(){if(Blockly.Tooltip.visible){Blockly.Tooltip.visible=!1;if(Blockly.Tooltip.DIV){Blockly.Tooltip.DIV.style.display="none"}}if(Blockly.Tooltip.showPid_){clearTimeout(Blockly.Tooltip.showPid_)}};Blockly.Tooltip.block=function(){Blockly.Tooltip.hide();Blockly.Tooltip.blocked_=!0};Blockly.Tooltip.unblock=function(){Blockly.Tooltip.blocked_=!1};Blockly.Tooltip.show_=function(){if(Blockly.Tooltip.blocked_){return}Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_;if(!Blockly.Tooltip.DIV){return}Blockly.Tooltip.DIV.textContent="";var a=Blockly.Tooltip.element_.tooltip;while("function"==typeof a){a=a()}a=Blockly.utils.string.wrap(a,Blockly.Tooltip.LIMIT);for(var b=a.split("\n"),c=0,d;c<b.length;c++){d=document.createElement("div");d.appendChild(document.createTextNode(b[c]));Blockly.Tooltip.DIV.appendChild(d)}var e=Blockly.Tooltip.element_.RTL,f=document.documentElement.clientWidth,g=document.documentElement.clientHeight;Blockly.Tooltip.DIV.style.direction=e?"rtl":"ltr";Blockly.Tooltip.DIV.style.display="block";Blockly.Tooltip.visible=!0;var h=Blockly.Tooltip.lastX_;if(e){h-=Blockly.Tooltip.OFFSET_X+Blockly.Tooltip.DIV.offsetWidth}else{h+=Blockly.Tooltip.OFFSET_X}var j=Blockly.Tooltip.lastY_+Blockly.Tooltip.OFFSET_Y;if(j+Blockly.Tooltip.DIV.offsetHeight>g+window.scrollY){j-=Blockly.Tooltip.DIV.offsetHeight+2*Blockly.Tooltip.OFFSET_Y}if(e){h=Math.max(Blockly.Tooltip.MARGINS-window.scrollX,h)}else{if(h+Blockly.Tooltip.DIV.offsetWidth>f+window.scrollX-2*Blockly.Tooltip.MARGINS){h=f-Blockly.Tooltip.DIV.offsetWidth-2*Blockly.Tooltip.MARGINS}}Blockly.Tooltip.DIV.style.top=j+"px";Blockly.Tooltip.DIV.style.left=h+"px"};
//# sourceMappingURL=tooltip.min.js.map
