{"version":3,"sources":["../../../src/blockly/core/mutator.js"],"names":["goog","provide","require","requireType","Blockly","Mutator","quarkNames","superClass_","constructor","call","quarkNames_","utils","object","inherits","Icon","prototype","workspaceWidth_","workspaceHeight_","setBlock","block","block_","getWorkspace","workspace_","drawIcon_","group","dom","createSvgElement","iconClick_","e","isEditable","createEditor_","svgDialog_","Bubble","BORDER_WIDTH","length","quarkXml","xml","createElement","i","quarkName","element","setAttribute","appendChild","workspaceOptions","Options","workspace","options","pathToMedia","RTL","renderer","rendererOverrides","toolboxPosition","TOOLBOX_AT_RIGHT","TOOLBOX_AT_LEFT","hasFlyout","languageTree","toolbox","convertToolboxToJSON","getMetrics","getFlyoutMetrics_","bind","WorkspaceSvg","isMutator","addChangeListener","Events","disableOrphans","flyoutSvg","addFlyout","background","createDom","insertBefore","svgBlockCanvas_","updateEditable","isInFlyout","iconGroup_","removeClass","setVisible","addClass","resizeBubble_","doubleBorderWidth","workspaceSize","getCanvas","getBBox","width","x","height","flyout","getFlyout","flyoutMetrics","getMetrics_","Math","max","contentHeight","abs","bubble_","setBubbleSize","translation","resize","onBubbleMove_","recordDeleteAreas","visible","isVisible","fire","Ui","pathObject","svgPath","iconXY_","setSvgId","id","registerMoveEvent","tree","init","show","rootBlock_","decompose","blocks","getDescendants","child","render","setMovable","setDeletable","margin","CORNER_RADIUS","getWidth","moveBy","saveConnections","thisMutator","mutatorBlock","sourceListener_","workspaceChanged_","applyColour","dispose","removeChangeListener","type","UI","CHANGE","isDragging","getTopBlocks","MARGIN","b","blockXY","getRelativeToSurfaceXY","blockHW","getHeightWidth","y","setGroup","oldMutationDom","mutationToDom","oldMutation","Xml","domToText","compose","initSvg","getMainWorkspace","keyboardAccessibilityMode","navigation","moveCursorOnBlockMutation","newMutationDom","newMutation","BlockChange","contentWidth","contentTop","contentLeft","viewHeight","viewWidth","viewTop","viewLeft","absoluteTop","absoluteLeft","mutator","updateBlockStyle","ws","getAllBlocks","workspaceBlocks","setStyle","getStyleName","flyoutBlocks","reconnect","connectionChild","inputName","getSourceBlock","connectionParent","getInput","connection","currentParent","targetBlock","targetConnection","isConnected","disconnect","connect","findParentWs","outerWs","parent","parentWorkspace","isFlyout"],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a mutator dialog.  A mutator allows the\n * user to change the shape of a block using a nested blocks editor.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Mutator');\n\ngoog.require('Blockly.Bubble');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockChange');\ngoog.require('Blockly.Events.Ui');\ngoog.require('Blockly.Icon');\ngoog.require('Blockly.navigation');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.global');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.xml');\ngoog.require('Blockly.WorkspaceSvg');\ngoog.require('Blockly.Xml');\n\ngoog.requireType('Blockly.utils.Metrics');\n\n\n/**\n * Class for a mutator dialog.\n * @param {!Array.<string>} quarkNames List of names of sub-blocks for flyout.\n * @extends {Blockly.Icon}\n * @constructor\n */\nBlockly.Mutator = function(quarkNames) {\n  Blockly.Mutator.superClass_.constructor.call(this, null);\n  this.quarkNames_ = quarkNames;\n};\nBlockly.utils.object.inherits(Blockly.Mutator, Blockly.Icon);\n\n/**\n * Width of workspace.\n * @private\n */\nBlockly.Mutator.prototype.workspaceWidth_ = 0;\n\n/**\n * Height of workspace.\n * @private\n */\nBlockly.Mutator.prototype.workspaceHeight_ = 0;\n\n/**\n * Set the block this mutator is associated with.\n * @param {Blockly.BlockSvg} block The block associated with this mutator.\n * @package\n */\nBlockly.Mutator.prototype.setBlock = function(block) {\n  this.block_ = block;\n};\n\n/**\n * Returns the workspace inside this mutator icon's bubble.\n * @return {Blockly.WorkspaceSvg} The workspace inside this mutator icon's\n *     bubble.\n * @package\n */\nBlockly.Mutator.prototype.getWorkspace = function() {\n  return this.workspace_;\n};\n\n/**\n * Draw the mutator icon.\n * @param {!Element} group The icon group.\n * @protected\n */\nBlockly.Mutator.prototype.drawIcon_ = function(group) {\n  // Square with rounded corners.\n  Blockly.utils.dom.createSvgElement('rect',\n      {\n        'class': 'blocklyIconShape',\n        'rx': '4',\n        'ry': '4',\n        'height': '16',\n        'width': '16'\n      },\n      group);\n  // Gear teeth.\n  Blockly.utils.dom.createSvgElement('path',\n      {\n        'class': 'blocklyIconSymbol',\n        'd': 'm4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,' +\n             '0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,' +\n             '-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,' +\n             '-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,' +\n             '-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 ' +\n             '-0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,' +\n             '0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z'\n      },\n      group);\n  // Axle hole.\n  Blockly.utils.dom.createSvgElement(\n      'circle',\n      {\n        'class': 'blocklyIconShape',\n        'r': '2.7',\n        'cx': '8',\n        'cy': '8'\n      },\n      group);\n};\n\n/**\n * Clicking on the icon toggles if the mutator bubble is visible.\n * Disable if block is uneditable.\n * @param {!Event} e Mouse click event.\n * @private\n * @override\n */\nBlockly.Mutator.prototype.iconClick_ = function(e) {\n  if (this.block_.isEditable()) {\n    Blockly.Icon.prototype.iconClick_.call(this, e);\n  }\n};\n\n/**\n * Create the editor for the mutator's bubble.\n * @return {!SVGElement} The top-level node of the editor.\n * @private\n */\nBlockly.Mutator.prototype.createEditor_ = function() {\n  /* Create the editor.  Here's the markup that will be generated:\n  <svg>\n    [Workspace]\n  </svg>\n  */\n  this.svgDialog_ = Blockly.utils.dom.createSvgElement('svg',\n      {'x': Blockly.Bubble.BORDER_WIDTH, 'y': Blockly.Bubble.BORDER_WIDTH},\n      null);\n  // Convert the list of names into a list of XML objects for the flyout.\n  if (this.quarkNames_.length) {\n    var quarkXml = Blockly.utils.xml.createElement('xml');\n    for (var i = 0, quarkName; (quarkName = this.quarkNames_[i]); i++) {\n      var element = Blockly.utils.xml.createElement('block');\n      element.setAttribute('type', quarkName);\n      quarkXml.appendChild(element);\n    }\n  } else {\n    var quarkXml = null;\n  }\n  var workspaceOptions = new Blockly.Options(\n      /** @type {!Blockly.BlocklyOptions} */\n      ({\n        // If you want to enable disabling, also remove the\n        // event filter from workspaceChanged_ .\n        'disable': false,\n        'parentWorkspace': this.block_.workspace,\n        'media': this.block_.workspace.options.pathToMedia,\n        'rtl': this.block_.RTL,\n        'horizontalLayout': false,\n        'renderer': this.block_.workspace.options.renderer,\n        'rendererOverrides': this.block_.workspace.options.rendererOverrides\n      }));\n  workspaceOptions.toolboxPosition = this.block_.RTL ? Blockly.TOOLBOX_AT_RIGHT :\n      Blockly.TOOLBOX_AT_LEFT;\n  var hasFlyout = !!quarkXml;\n  if (hasFlyout) {\n    workspaceOptions.languageTree =\n        Blockly.utils.toolbox.convertToolboxToJSON(quarkXml);\n    workspaceOptions.getMetrics = this.getFlyoutMetrics_.bind(this);\n  }\n  this.workspace_ = new Blockly.WorkspaceSvg(workspaceOptions);\n  this.workspace_.isMutator = true;\n  this.workspace_.addChangeListener(Blockly.Events.disableOrphans);\n\n  // Mutator flyouts go inside the mutator workspace's <g> rather than in\n  // a top level svg. Instead of handling scale themselves, mutators\n  // inherit scale from the parent workspace.\n  // To fix this, scale needs to be applied at a different level in the dom.\n  var flyoutSvg = hasFlyout ? this.workspace_.addFlyout('g') : null;\n  var background = this.workspace_.createDom('blocklyMutatorBackground');\n\n  if (flyoutSvg) {\n    // Insert the flyout after the <rect> but before the block canvas so that\n    // the flyout is underneath in z-order.  This makes blocks layering during\n    // dragging work properly.\n    background.insertBefore(flyoutSvg, this.workspace_.svgBlockCanvas_);\n  }\n  this.svgDialog_.appendChild(background);\n\n  return this.svgDialog_;\n};\n\n/**\n * Add or remove the UI indicating if this icon may be clicked or not.\n */\nBlockly.Mutator.prototype.updateEditable = function() {\n  Blockly.Mutator.superClass_.updateEditable.call(this);\n  if (!this.block_.isInFlyout) {\n    if (this.block_.isEditable()) {\n      if (this.iconGroup_) {\n        Blockly.utils.dom.removeClass(\n            /** @type {!Element} */ (this.iconGroup_),\n            'blocklyIconGroupReadonly');\n      }\n    } else {\n      // Close any mutator bubble.  Icon is not clickable.\n      this.setVisible(false);\n      if (this.iconGroup_) {\n        Blockly.utils.dom.addClass(\n            /** @type {!Element} */ (this.iconGroup_),\n            'blocklyIconGroupReadonly');\n      }\n    }\n  }\n};\n\n/**\n * Resize the bubble to match the size of the workspace.\n * @private\n */\nBlockly.Mutator.prototype.resizeBubble_ = function() {\n  var doubleBorderWidth = 2 * Blockly.Bubble.BORDER_WIDTH;\n  var workspaceSize = this.workspace_.getCanvas().getBBox();\n  var width;\n  if (this.block_.RTL) {\n    width = -workspaceSize.x;\n  } else {\n    width = workspaceSize.width + workspaceSize.x;\n  }\n  var height = workspaceSize.height + doubleBorderWidth * 3;\n  var flyout = this.workspace_.getFlyout();\n  if (flyout) {\n    var flyoutMetrics = flyout.getMetrics_();\n    height = Math.max(height, flyoutMetrics.contentHeight + 20);\n  }\n  width += doubleBorderWidth * 3;\n  // Only resize if the size difference is significant.  Eliminates shuddering.\n  if (Math.abs(this.workspaceWidth_ - width) > doubleBorderWidth ||\n      Math.abs(this.workspaceHeight_ - height) > doubleBorderWidth) {\n    // Record some layout information for getFlyoutMetrics_.\n    this.workspaceWidth_ = width;\n    this.workspaceHeight_ = height;\n    // Resize the bubble.\n    this.bubble_.setBubbleSize(\n        width + doubleBorderWidth, height + doubleBorderWidth);\n    this.svgDialog_.setAttribute('width', this.workspaceWidth_);\n    this.svgDialog_.setAttribute('height', this.workspaceHeight_);\n  }\n\n  if (this.block_.RTL) {\n    // Scroll the workspace to always left-align.\n    var translation = 'translate(' + this.workspaceWidth_ + ',0)';\n    this.workspace_.getCanvas().setAttribute('transform', translation);\n  }\n  this.workspace_.resize();\n};\n\n/**\n * A method handler for when the bubble is moved.\n * @private\n */\nBlockly.Mutator.prototype.onBubbleMove_ = function() {\n  if (this.workspace_) {\n    this.workspace_.recordDeleteAreas();\n  }\n};\n\n/**\n * Show or hide the mutator bubble.\n * @param {boolean} visible True if the bubble should be visible.\n */\nBlockly.Mutator.prototype.setVisible = function(visible) {\n  if (visible == this.isVisible()) {\n    // No change.\n    return;\n  }\n  Blockly.Events.fire(\n      new Blockly.Events.Ui(this.block_, 'mutatorOpen', !visible, visible));\n  if (visible) {\n    // Create the bubble.\n    this.bubble_ = new Blockly.Bubble(\n        /** @type {!Blockly.WorkspaceSvg} */ (this.block_.workspace),\n        this.createEditor_(), this.block_.pathObject.svgPath,\n        /** @type {!Blockly.utils.Coordinate} */ (this.iconXY_), null, null);\n    // Expose this mutator's block's ID on its top-level SVG group.\n    this.bubble_.setSvgId(this.block_.id);\n    this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));\n    var tree = this.workspace_.options.languageTree;\n    var flyout = this.workspace_.getFlyout();\n    if (tree) {\n      flyout.init(this.workspace_);\n      flyout.show(tree);\n    }\n\n    this.rootBlock_ = this.block_.decompose(this.workspace_);\n    var blocks = this.rootBlock_.getDescendants(false);\n    for (var i = 0, child; (child = blocks[i]); i++) {\n      child.render();\n    }\n    // The root block should not be draggable or deletable.\n    this.rootBlock_.setMovable(false);\n    this.rootBlock_.setDeletable(false);\n    if (flyout) {\n      var margin = flyout.CORNER_RADIUS * 2;\n      var x = flyout.getWidth() + margin;\n    } else {\n      var margin = 16;\n      var x = margin;\n    }\n    if (this.block_.RTL) {\n      x = -x;\n    }\n    this.rootBlock_.moveBy(x, margin);\n    // Save the initial connections, then listen for further changes.\n    if (this.block_.saveConnections) {\n      var thisMutator = this;\n      var mutatorBlock =\n        /** @type {{saveConnections: function(!Blockly.Block)}} */ (\n          this.block_);\n      mutatorBlock.saveConnections(this.rootBlock_);\n      this.sourceListener_ = function() {\n        mutatorBlock.saveConnections(thisMutator.rootBlock_);\n      };\n      this.block_.workspace.addChangeListener(this.sourceListener_);\n    }\n    this.resizeBubble_();\n    // When the mutator's workspace changes, update the source block.\n    this.workspace_.addChangeListener(this.workspaceChanged_.bind(this));\n    this.applyColour();\n  } else {\n    // Dispose of the bubble.\n    this.svgDialog_ = null;\n    this.workspace_.dispose();\n    this.workspace_ = null;\n    this.rootBlock_ = null;\n    this.bubble_.dispose();\n    this.bubble_ = null;\n    this.workspaceWidth_ = 0;\n    this.workspaceHeight_ = 0;\n    if (this.sourceListener_) {\n      this.block_.workspace.removeChangeListener(this.sourceListener_);\n      this.sourceListener_ = null;\n    }\n  }\n};\n\n/**\n * Update the source block when the mutator's blocks are changed.\n * Bump down any block that's too high.\n * Fired whenever a change is made to the mutator's workspace.\n * @param {!Blockly.Events.Abstract} e Custom data for event.\n * @private\n */\nBlockly.Mutator.prototype.workspaceChanged_ = function(e) {\n  if (e.type == Blockly.Events.UI ||\n      (e.type == Blockly.Events.CHANGE && e.element == 'disabled')) {\n    return;\n  }\n\n  if (!this.workspace_.isDragging()) {\n    var blocks = this.workspace_.getTopBlocks(false);\n    var MARGIN = 20;\n    for (var b = 0, block; (block = blocks[b]); b++) {\n      var blockXY = block.getRelativeToSurfaceXY();\n      var blockHW = block.getHeightWidth();\n      if (blockXY.y + blockHW.height < MARGIN) {\n        // Bump any block that's above the top back inside.\n        block.moveBy(0, MARGIN - blockHW.height - blockXY.y);\n      }\n    }\n  }\n\n  // When the mutator's workspace changes, update the source block.\n  if (this.rootBlock_.workspace == this.workspace_) {\n    Blockly.Events.setGroup(true);\n    var block = this.block_;\n    var oldMutationDom = block.mutationToDom();\n    var oldMutation = oldMutationDom && Blockly.Xml.domToText(oldMutationDom);\n    // Allow the source block to rebuild itself.\n    block.compose(this.rootBlock_);\n    block.initSvg();\n    block.render();\n\n    if ((/** @type {!Blockly.WorkspaceSvg} */ (Blockly.getMainWorkspace()))\n        .keyboardAccessibilityMode) {\n      Blockly.navigation.moveCursorOnBlockMutation(block);\n    }\n    var newMutationDom = block.mutationToDom();\n    var newMutation = newMutationDom && Blockly.Xml.domToText(newMutationDom);\n    if (oldMutation != newMutation) {\n      Blockly.Events.fire(new Blockly.Events.BlockChange(\n          block, 'mutation', null, oldMutation, newMutation));\n    }\n\n    // Don't update the bubble until the drag has ended, to avoid moving blocks\n    // under the cursor.\n    if (!this.workspace_.isDragging()) {\n      this.resizeBubble_();\n    }\n    Blockly.Events.setGroup(false);\n  }\n};\n\n/**\n * Return an object with all the metrics required to size scrollbars for the\n * mutator flyout.  The following properties are computed:\n * .viewHeight: Height of the visible rectangle,\n * .viewWidth: Width of the visible rectangle,\n * .absoluteTop: Top-edge of view.\n * .absoluteLeft: Left-edge of view.\n * @return {!Blockly.utils.Metrics} Contains size and position metrics of\n *     mutator dialog's workspace.\n * @private\n */\nBlockly.Mutator.prototype.getFlyoutMetrics_ = function() {\n  // The mutator workspace only uses a subset of Blockly.utils.Metrics\n  // properties as features such as scroll and zoom are unsupported.\n  var unsupported = 0;\n  return {\n    contentHeight: unsupported,\n    contentWidth: unsupported,\n    contentTop: unsupported,\n    contentLeft: unsupported,\n\n    viewHeight: this.workspaceHeight_,\n    viewWidth: this.workspaceWidth_ - this.workspace_.getFlyout().getWidth(),\n    viewTop: unsupported,\n    viewLeft: unsupported,\n\n    absoluteTop: unsupported,\n    absoluteLeft: this.workspace_.RTL ? 0 :\n        this.workspace_.getFlyout().getWidth()\n  };\n};\n\n/**\n * Dispose of this mutator.\n */\nBlockly.Mutator.prototype.dispose = function() {\n  this.block_.mutator = null;\n  Blockly.Icon.prototype.dispose.call(this);\n};\n\n/**\n * Update the styles on all blocks in the mutator.\n * @public\n */\nBlockly.Mutator.prototype.updateBlockStyle = function() {\n  var ws = this.workspace_;\n\n  if (ws && ws.getAllBlocks(false)) {\n    var workspaceBlocks = ws.getAllBlocks(false);\n    for (var i = 0; i < workspaceBlocks.length; i++) {\n      var block = workspaceBlocks[i];\n      block.setStyle(block.getStyleName());\n    }\n\n    var flyoutBlocks = ws.getFlyout().workspace_.getAllBlocks(false);\n    for (var i = 0; i < flyoutBlocks.length; i++) {\n      var block = flyoutBlocks[i];\n      block.setStyle(block.getStyleName());\n    }\n  }\n};\n\n/**\n * Reconnect an block to a mutated input.\n * @param {Blockly.Connection} connectionChild Connection on child block.\n * @param {!Blockly.Block} block Parent block.\n * @param {string} inputName Name of input on parent block.\n * @return {boolean} True iff a reconnection was made, false otherwise.\n */\nBlockly.Mutator.reconnect = function(connectionChild, block, inputName) {\n  if (!connectionChild || !connectionChild.getSourceBlock().workspace) {\n    return false;  // No connection or block has been deleted.\n  }\n  var connectionParent = block.getInput(inputName).connection;\n  var currentParent = connectionChild.targetBlock();\n  if ((!currentParent || currentParent == block) &&\n      connectionParent.targetConnection != connectionChild) {\n    if (connectionParent.isConnected()) {\n      // There's already something connected here.  Get rid of it.\n      connectionParent.disconnect();\n    }\n    connectionParent.connect(connectionChild);\n    return true;\n  }\n  return false;\n};\n\n/**\n * Get the parent workspace of a workspace that is inside a mutator, taking into\n * account whether it is a flyout.\n * @param {Blockly.Workspace} workspace The workspace that is inside a mutator.\n * @return {Blockly.Workspace} The mutator's parent workspace or null.\n * @public\n */\nBlockly.Mutator.findParentWs = function(workspace) {\n  var outerWs = null;\n  if (workspace && workspace.options) {\n    var parent = workspace.options.parentWorkspace;\n    // If we were in a flyout in a mutator, need to go up two levels to find\n    // the actual parent.\n    if (workspace.isFlyout) {\n      if (parent && parent.options) {\n        outerWs = parent.options.parentWorkspace;\n      }\n    } else if (parent) {\n      outerWs = parent;\n    }\n  }\n  return outerWs;\n};\n"],"file":"mutator.min.js"}