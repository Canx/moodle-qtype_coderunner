'use strict';function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}goog.provide("Blockly.utils");goog.require("Blockly.Msg");goog.require("Blockly.constants");goog.require("Blockly.utils.colour");goog.require("Blockly.utils.Coordinate");goog.require("Blockly.utils.global");goog.require("Blockly.utils.Rect");goog.require("Blockly.utils.string");goog.require("Blockly.utils.style");goog.require("Blockly.utils.userAgent");Blockly.utils.noEvent=function(a){a.preventDefault();a.stopPropagation()};Blockly.utils.isTargetInput=function(a){return"textarea"==a.target.type||"text"==a.target.type||"number"==a.target.type||"email"==a.target.type||"password"==a.target.type||"search"==a.target.type||"tel"==a.target.type||"url"==a.target.type||a.target.isContentEditable};Blockly.utils.getRelativeXY=function(a){var b=new Blockly.utils.Coordinate(0,0),c=a.getAttribute("x");if(c){b.x=parseInt(c,10)}var d=a.getAttribute("y");if(d){b.y=parseInt(d,10)}var e=a.getAttribute("transform"),f=e&&e.match(Blockly.utils.getRelativeXY.XY_REGEX_);if(f){b.x+=+f[1];if(f[3]){b.y+=+f[3]}}var g=a.getAttribute("style");if(g&&-1<g.indexOf("translate")){var h=g.match(Blockly.utils.getRelativeXY.XY_STYLE_REGEX_);if(h){b.x+=+h[1];if(h[3]){b.y+=+h[3]}}}return b};Blockly.utils.getInjectionDivXY_=function(a){var b=0,c=0;while(a){var d=Blockly.utils.getRelativeXY(a);b=b+d.x;c=c+d.y;var e=a.getAttribute("class")||"";if(-1!=(" "+e+" ").indexOf(" injectionDiv ")){break}a=a.parentNode}return new Blockly.utils.Coordinate(b,c)};Blockly.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/;Blockly.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/;Blockly.utils.isRightButton=function(a){if(a.ctrlKey&&Blockly.utils.userAgent.MAC){return!0}return 2==a.button};Blockly.utils.mouseToSvg=function(a,b,c){var d=b.createSVGPoint();d.x=a.clientX;d.y=a.clientY;if(!c){c=b.getScreenCTM().inverse()}return d.matrixTransform(c)};Blockly.utils.getScrollDeltaPixels=function(a){switch(a.deltaMode){case 0:default:return{x:a.deltaX,y:a.deltaY};case 1:return{x:a.deltaX*Blockly.LINE_MODE_MULTIPLIER,y:a.deltaY*Blockly.LINE_MODE_MULTIPLIER};case 2:return{x:a.deltaX*Blockly.PAGE_MODE_MULTIPLIER,y:a.deltaY*Blockly.PAGE_MODE_MULTIPLIER};}};Blockly.utils.tokenizeInterpolation=function(a){return Blockly.utils.tokenizeInterpolation_(a,!0)};Blockly.utils.replaceMessageReferences=function(a){if("string"!=typeof a){return a}var b=Blockly.utils.tokenizeInterpolation_(a,!1);return b.length?b[0]+"":""};Blockly.utils.checkMessageReferences=function(a){for(var b=!0,c=Blockly.Msg,d=a.match(/%{BKY_[A-Z]\w*}/ig),e=0,f;e<d.length;e++){f=d[e].toUpperCase();if(c[f.slice(6,-1)]==void 0){console.log("WARNING: No message string for "+d[e]+" in "+a);b=!1}}return b};Blockly.utils.tokenizeInterpolation_=function(a,b){var d=[],e=a.split("");e.push("");for(var f=0,g=[],h=null,j=0,k;j<e.length;j++){k=e[j];if(0==f){if("%"==k){var l=g.join("");if(l){d.push(l)}g.length=0;f=1}else{g.push(k)}}else if(1==f){if("%"==k){g.push(k);f=0}else if(b&&"0"<=k&&"9">=k){f=2;h=k;var l=g.join("");if(l){d.push(l)}g.length=0}else if("{"==k){f=3}else{g.push("%",k);f=0}}else if(2==f){if("0"<=k&&"9">=k){h+=k}else{d.push(parseInt(h,10));j--;f=0}}else if(3==f){if(""==k){g.splice(0,0,"%{");j--;f=0}else if("}"!=k){g.push(k)}else{var m=g.join("");if(/[A-Z]\w*/i.test(m)){var n=m.toUpperCase(),o=Blockly.utils.string.startsWith(n,"BKY_")?n.substring(4):null;if(o&&o in Blockly.Msg){var p=Blockly.Msg[o];if("string"==typeof p){Array.prototype.push.apply(d,Blockly.utils.tokenizeInterpolation_(p,b))}else if(b){d.push(p+"")}else{d.push(p)}}else{d.push("%{"+m+"}")}g.length=0;f=0}else{d.push("%{"+m+"}");g.length=0;f=0}}}}var l=g.join("");if(l){d.push(l)}var q=[];g.length=0;for(var j=0;j<d.length;++j){if("string"==typeof d[j]){g.push(d[j])}else{l=g.join("");if(l){q.push(l)}g.length=0;q.push(d[j])}}l=g.join("");if(l){q.push(l)}g.length=0;return q};Blockly.utils.genUid=function(){for(var a=Blockly.utils.genUid.soup_.length,b=[],c=0;c<20;c++){b[c]=Blockly.utils.genUid.soup_.charAt(Math.random()*a)}return b.join("")};Blockly.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";Blockly.utils.is3dSupported=function(){if(Blockly.utils.is3dSupported.cached_!==void 0){return Blockly.utils.is3dSupported.cached_}if(!Blockly.utils.global.getComputedStyle){return!1}var a=document.createElement("p"),b="none",c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var d in c){if(a.style[d]!==void 0){a.style[d]="translate3d(1px,1px,1px)";var e=Blockly.utils.global.getComputedStyle(a);if(!e){document.body.removeChild(a);return!1}b=e.getPropertyValue(c[d])}}document.body.removeChild(a);Blockly.utils.is3dSupported.cached_="none"!==b;return Blockly.utils.is3dSupported.cached_};Blockly.utils.runAfterPageLoad=function(a){if("object"!=("undefined"==typeof document?"undefined":_typeof(document))){throw Error("Blockly.utils.runAfterPageLoad() requires browser document.")}if("complete"==document.readyState){a()}else{var b=setInterval(function(){if("complete"==document.readyState){clearInterval(b);a()}},10)}};Blockly.utils.getViewportBBox=function(){var a=Blockly.utils.style.getViewportPageOffset();return new Blockly.utils.Rect(a.y,document.documentElement.clientHeight+a.y,a.x,document.documentElement.clientWidth+a.x)};Blockly.utils.arrayRemove=function(a,b){var c=a.indexOf(b);if(-1==c){return!1}a.splice(c,1);return!0};Blockly.utils.getDocumentScroll=function(){var a=document.documentElement,b=window;if(Blockly.utils.userAgent.IE&&b.pageYOffset!=a.scrollTop){return new Blockly.utils.Coordinate(a.scrollLeft,a.scrollTop)}return new Blockly.utils.Coordinate(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)};Blockly.utils.getBlockTypeCounts=function(a,b){var c=Object.create(null),d=a.getDescendants(!0);if(b){var e=a.getNextBlock();if(e){var f=d.indexOf(e);d.splice(f,d.length-f)}}for(var g=0,h;h=d[g];g++){if(c[h.type]){c[h.type]++}else{c[h.type]=1}}return c};Blockly.utils.screenToWsCoordinates=function(a,b){var c=b.x,d=b.y,e=a.getInjectionDiv(),f=e.getBoundingClientRect(),g=new Blockly.utils.Coordinate(c-f.left,d-f.top),h=a.getOriginOffsetInPixels(),i=Blockly.utils.Coordinate.difference(g,h),j=i.scale(1/a.scale);return j};Blockly.utils.parseBlockColour=function(a){var b="string"==typeof a?Blockly.utils.replaceMessageReferences(a):a,c=+b;if(!isNaN(c)&&0<=c&&360>=c){return{hue:c,hex:Blockly.utils.colour.hsvToHex(c,Blockly.HSV_SATURATION,255*Blockly.HSV_VALUE)}}else{var d=Blockly.utils.colour.parse(b);if(d){return{hue:null,hex:d}}else{var e="Invalid colour: \""+b+"\"";if(a!=b){e+=" (from \""+a+"\")"}throw Error(e)}}};
//# sourceMappingURL=utils.min.js.map
