'use strict';goog.provide("Blockly.Generator");goog.require("Blockly.Block");Blockly.Generator=function(a){this.name_=a;this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")};Blockly.Generator.NAME_TYPE="generated_function";Blockly.Generator.prototype.INFINITE_LOOP_TRAP=null;Blockly.Generator.prototype.STATEMENT_PREFIX=null;Blockly.Generator.prototype.STATEMENT_SUFFIX=null;Blockly.Generator.prototype.INDENT="  ";Blockly.Generator.prototype.COMMENT_WRAP=60;Blockly.Generator.prototype.ORDER_OVERRIDES=[];Blockly.Generator.prototype.workspaceToCode=function(a){if(!a){console.warn("No workspace specified in workspaceToCode call.  Guessing.");a=Blockly.getMainWorkspace()}var b=[];this.init(a);for(var c=a.getTopBlocks(!0),d=0,e,f;e=c[d];d++){f=this.blockToCode(e);if(Array.isArray(f)){f=f[0]}if(f){if(e.outputConnection){f=this.scrubNakedValue(f);if(this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix){f=this.injectId(this.STATEMENT_PREFIX,e)+f}if(this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix){f=f+this.injectId(this.STATEMENT_SUFFIX,e)}}b.push(f)}}b=b.join("\n");b=this.finish(b);b=b.replace(/^\s+\n/,"");b=b.replace(/\n\s+$/,"\n");b=b.replace(/[ \t]+\n/g,"\n");return b};Blockly.Generator.prototype.prefixLines=function(a,b){return b+a.replace(/(?!\n$)\n/g,"\n"+b)};Blockly.Generator.prototype.allNestedComments=function(a){for(var b=[],c=a.getDescendants(!0),d=0,e;d<c.length;d++){e=c[d].getCommentText();if(e){b.push(e)}}if(b.length){b.push("")}return b.join("\n")};Blockly.Generator.prototype.blockToCode=function(a,b){if(!a){return""}if(!a.isEnabled()){return b?"":this.blockToCode(a.getNextBlock())}if(a.isInsertionMarker()){return b?"":this.blockToCode(a.getChildren(!1)[0])}var c=this[a.type];if("function"!=typeof c){throw Error("Language \""+this.name_+"\" does not know how to generate  code for block type \""+a.type+"\".")}var d=c.call(a,a);if(Array.isArray(d)){if(!a.outputConnection){throw TypeError("Expecting string from statement block: "+a.type)}return[this.scrub_(a,d[0],b),d[1]]}else if("string"==typeof d){if(this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix){d=this.injectId(this.STATEMENT_PREFIX,a)+d}if(this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix){d=d+this.injectId(this.STATEMENT_SUFFIX,a)}return this.scrub_(a,d,b)}else if(null===d){return""}else{throw SyntaxError("Invalid code generated: "+d)}};Blockly.Generator.prototype.valueToCode=function(a,b,c){if(isNaN(c)){throw TypeError("Expecting valid order from block: "+a.type)}var d=a.getInputTargetBlock(b);if(!d){return""}var e=this.blockToCode(d);if(""===e){return""}if(!Array.isArray(e)){throw TypeError("Expecting tuple from value block: "+d.type)}var f=e[0],g=e[1];if(isNaN(g)){throw TypeError("Expecting valid order from value block: "+d.type)}if(!f){return""}var h=!1,j=Math.floor(c),k=Math.floor(g);if(j<=k){if(!(j==k&&(0==j||99==j))){h=!0;for(var l=0;l<this.ORDER_OVERRIDES.length;l++){if(this.ORDER_OVERRIDES[l][0]==c&&this.ORDER_OVERRIDES[l][1]==g){h=!1;break}}}}if(h){f="("+f+")"}return f};Blockly.Generator.prototype.statementToCode=function(a,b){var c=a.getInputTargetBlock(b),d=this.blockToCode(c);if("string"!=typeof d){throw TypeError("Expecting code from statement block: "+(c&&c.type))}if(d){d=this.prefixLines(d,this.INDENT)}return d};Blockly.Generator.prototype.addLoopTrap=function(a,b){if(this.INFINITE_LOOP_TRAP){a=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,b),this.INDENT)+a}if(this.STATEMENT_SUFFIX&&!b.suppressPrefixSuffix){a=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,b),this.INDENT)+a}if(this.STATEMENT_PREFIX&&!b.suppressPrefixSuffix){a=a+this.prefixLines(this.injectId(this.STATEMENT_PREFIX,b),this.INDENT)}return a};Blockly.Generator.prototype.injectId=function(a,b){var c=b.id.replace(/\$/g,"$$$$");return a.replace(/%1/g,"'"+c+"'")};Blockly.Generator.prototype.RESERVED_WORDS_="";Blockly.Generator.prototype.addReservedWords=function(a){this.RESERVED_WORDS_+=a+","};Blockly.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}";Blockly.Generator.prototype.definitions_;Blockly.Generator.prototype.functionNames_;Blockly.Generator.prototype.variableDB_;Blockly.Generator.prototype.provideFunction_=function(a,b){if(!this.definitions_[a]){var c=this.variableDB_.getDistinctName(a,Blockly.PROCEDURE_CATEGORY_NAME);this.functionNames_[a]=c;var d=b.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,c),e;while(e!=d){e=d;d=d.replace(/^(( {2})*) {2}/gm,"$1\0")}d=d.replace(/\0/g,this.INDENT);this.definitions_[a]=d}return this.functionNames_[a]};Blockly.Generator.prototype.init=function(){};Blockly.Generator.prototype.scrub_=function(a,b){return b};Blockly.Generator.prototype.finish=function(a){return a};Blockly.Generator.prototype.scrubNakedValue=function(a){return a};
//# sourceMappingURL=generator.min.js.map
