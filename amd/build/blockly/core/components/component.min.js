'use strict';goog.provide("Blockly.Component");goog.provide("Blockly.Component.Error");goog.require("Blockly.utils.dom");goog.require("Blockly.utils.IdGenerator");goog.require("Blockly.utils.style");Blockly.Component=function(){this.rightToLeft_=Blockly.Component.defaultRightToLeft;this.id_=null;this.inDocument_=!1;this.element_=null;this.parent_=null;this.children_=[];this.childIndex_={};this.disposed_=!1};Blockly.Component.defaultRightToLeft=!1;Blockly.Component.Error={ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",ABSTRACT_METHOD:"Unimplemented abstract method"};Blockly.Component.prototype.getId=function(){return this.id_||(this.id_=Blockly.utils.IdGenerator.getNextUniqueId())};Blockly.Component.prototype.getElement=function(){return this.element_};Blockly.Component.prototype.setElementInternal=function(a){this.element_=a};Blockly.Component.prototype.setParent=function(a){if(this==a){throw Error(Blockly.Component.Error.PARENT_UNABLE_TO_BE_SET)}if(a&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=a){throw Error(Blockly.Component.Error.PARENT_UNABLE_TO_BE_SET)}this.parent_=a};Blockly.Component.prototype.getParent=function(){return this.parent_};Blockly.Component.prototype.isInDocument=function(){return this.inDocument_};Blockly.Component.prototype.createDom=function(){throw Error(Blockly.Component.Error.ABSTRACT_METHOD)};Blockly.Component.prototype.render=function(a){this.render_(a)};Blockly.Component.prototype.render_=function(a,b){if(this.inDocument_){throw Error(Blockly.Component.Error.ALREADY_RENDERED)}if(!this.element_){this.createDom()}if(a){a.insertBefore(this.element_,b||null)}else{document.body.appendChild(this.element_)}if(!this.parent_||this.parent_.isInDocument()){this.enterDocument()}};Blockly.Component.prototype.enterDocument=function(){this.inDocument_=!0;this.forEachChild(function(a){if(!a.isInDocument()&&a.getElement()){a.enterDocument()}})};Blockly.Component.prototype.exitDocument=function(){this.forEachChild(function(a){if(a.isInDocument()){a.exitDocument()}});this.inDocument_=!1};Blockly.Component.prototype.dispose=function(){if(!this.disposed_){this.disposed_=!0;this.disposeInternal()}};Blockly.Component.prototype.disposeInternal=function(){if(this.inDocument_){this.exitDocument()}this.forEachChild(function(a){a.dispose()});if(this.element_){Blockly.utils.dom.removeNode(this.element_)}this.children_=null;this.childIndex_=null;this.element_=null;this.parent_=null};Blockly.Component.prototype.addChild=function(a,b){this.addChildAt(a,this.getChildCount(),b)};Blockly.Component.prototype.addChildAt=function(a,b,c){if(a.inDocument_&&(c||!this.inDocument_)){throw Error(Blockly.Component.Error.ALREADY_RENDERED)}if(0>b||b>this.getChildCount()){throw Error(Blockly.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS)}this.childIndex_[a.getId()]=a;if(a.getParent()==this){var d=this.children_.indexOf(a);if(-1<d){this.children_.splice(d,1)}}a.setParent(this);this.children_.splice(b,0,a);if(a.inDocument_&&this.inDocument_&&a.getParent()==this){var e=this.getContentElement(),f=e.childNodes[b]||null;if(f!=a.getElement()){e.insertBefore(a.getElement(),f)}}else if(c){if(!this.element_){this.createDom()}var g=this.getChildAt(b+1);a.render_(this.getContentElement(),g?g.element_:null)}else if(this.inDocument_&&!a.inDocument_&&a.element_&&a.element_.parentNode&&a.element_.parentNode.nodeType==Blockly.utils.dom.NodeType.ELEMENT_NODE){a.enterDocument()}};Blockly.Component.prototype.getContentElement=function(){return this.element_};Blockly.Component.prototype.hasChildren=function(){return 0!=this.children_.length};Blockly.Component.prototype.getChildCount=function(){return this.children_.length};Blockly.Component.prototype.getChild=function(a){return a?this.childIndex_[a]||null:null};Blockly.Component.prototype.getChildAt=function(a){return this.children_[a]||null};Blockly.Component.prototype.forEachChild=function(a,b){for(var c=0;c<this.children_.length;c++){a.call(b,this.children_[c],c)}};
//# sourceMappingURL=component.min.js.map
