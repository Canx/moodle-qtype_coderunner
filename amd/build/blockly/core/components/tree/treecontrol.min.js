'use strict';goog.provide("Blockly.tree.TreeControl");goog.require("Blockly.tree.TreeNode");goog.require("Blockly.tree.BaseNode");goog.require("Blockly.utils.aria");goog.require("Blockly.utils.object");goog.require("Blockly.utils.style");Blockly.tree.TreeControl=function(a,b){this.toolbox_=a;this.onClickWrapper_=null;this.onKeydownWrapper_=null;Blockly.tree.BaseNode.call(this,"",b);this.expanded_=!0;this.selected_=!0;this.selectedItem_=this;this.onBeforeSelected_=null;this.onAfterSelected_=null};Blockly.utils.object.inherits(Blockly.tree.TreeControl,Blockly.tree.BaseNode);Blockly.tree.TreeControl.prototype.getTree=function(){return this};Blockly.tree.TreeControl.prototype.getToolbox=function(){return this.toolbox_};Blockly.tree.TreeControl.prototype.getDepth=function(){return 0};Blockly.tree.TreeControl.prototype.setExpanded=function(a){this.expanded_=a};Blockly.tree.TreeControl.prototype.getIconElement=function(){var a=this.getRowElement();return a?a.firstChild:null};Blockly.tree.TreeControl.prototype.updateExpandIcon=function(){};Blockly.tree.TreeControl.prototype.getRowClassName=function(){return Blockly.tree.TreeControl.superClass_.getRowClassName.call(this)+" "+this.config_.cssHideRoot};Blockly.tree.TreeControl.prototype.getCalculatedIconClass=function(){var a=this.expanded_;if(a&&this.expandedIconClass){return this.expandedIconClass}var b=this.iconClass;if(!a&&b){return b}return""};Blockly.tree.TreeControl.prototype.setSelectedItem=function(a){if(a==this.selectedItem_){return}if(this.onBeforeSelected_&&!this.onBeforeSelected_.call(this.toolbox_,a)){return}var b=this.getSelectedItem();if(this.selectedItem_){this.selectedItem_.setSelected(!1)}this.selectedItem_=a;if(a){a.setSelected(!0)}if(this.onAfterSelected_){this.onAfterSelected_.call(this.toolbox_,b,a)}};Blockly.tree.TreeControl.prototype.onBeforeSelected=function(a){this.onBeforeSelected_=a};Blockly.tree.TreeControl.prototype.onAfterSelected=function(a){this.onAfterSelected_=a};Blockly.tree.TreeControl.prototype.getSelectedItem=function(){return this.selectedItem_};Blockly.tree.TreeControl.prototype.initAccessibility=function(){Blockly.tree.TreeControl.superClass_.initAccessibility.call(this);var a=this.getElement();Blockly.utils.aria.setRole(a,Blockly.utils.aria.Role.TREE);Blockly.utils.aria.setState(a,Blockly.utils.aria.State.LABELLEDBY,this.getLabelElement().id)};Blockly.tree.TreeControl.prototype.enterDocument=function(){Blockly.tree.TreeControl.superClass_.enterDocument.call(this);var a=this.getElement();a.className=this.config_.cssRoot;a.setAttribute("hideFocus","true");this.attachEvents_();this.initAccessibility()};Blockly.tree.TreeControl.prototype.exitDocument=function(){Blockly.tree.TreeControl.superClass_.exitDocument.call(this);this.detachEvents_()};Blockly.tree.TreeControl.prototype.attachEvents_=function(){var a=this.getElement();a.tabIndex=0;this.onClickWrapper_=Blockly.bindEventWithChecks_(a,"click",this,this.handleMouseEvent_);this.onKeydownWrapper_=Blockly.bindEvent_(a,"keydown",this,this.handleKeyEvent_)};Blockly.tree.TreeControl.prototype.detachEvents_=function(){if(this.onClickWrapper_){Blockly.unbindEvent_(this.onClickWrapper_);this.onClickWrapper_=null}if(this.onKeydownWrapper_){Blockly.unbindEvent_(this.onKeydownWrapper_);this.onKeydownWrapper_=null}};Blockly.tree.TreeControl.prototype.handleMouseEvent_=function(a){var b=this.getNodeFromEvent_(a);if(b&&"click"==a.type){b.onClick_(a)}};Blockly.tree.TreeControl.prototype.handleKeyEvent_=function(a){var b=!!(this.selectedItem_&&this.selectedItem_.onKeyDown(a));if(b){Blockly.utils.style.scrollIntoContainerView(this.selectedItem_.getElement(),this.getElement().parentNode);a.preventDefault()}return b};Blockly.tree.TreeControl.prototype.getNodeFromEvent_=function(a){var b=null,c=a.target;while(c){var d=c.id;b=Blockly.tree.BaseNode.allNodes[d];if(b){return b}if(c==this.getElement()){break}if(c.getAttribute("role")==Blockly.utils.aria.Role.GROUP){return null}c=c.parentNode}return null};Blockly.tree.TreeControl.prototype.createNode=function(a){return new Blockly.tree.TreeNode(this.toolbox_,a||"",this.config_)};
//# sourceMappingURL=treecontrol.min.js.map
