{"version":3,"sources":["../../../src/blockly/core/tooltip.js"],"names":["goog","provide","require","Blockly","Tooltip","visible","blocked_","LIMIT","mouseOutPid_","showPid_","lastX_","lastY_","element_","poisonedElement_","OFFSET_X","OFFSET_Y","RADIUS_OK","HOVER_MS","MARGINS","DIV","createDom","document","createElement","className","container","parentContainer","body","appendChild","bindMouseEvents","element","mouseOverWrapper_","bindEvent_","onMouseOver_","mouseOutWrapper_","onMouseOut_","addEventListener","onMouseMove_","unbindMouseEvents","unbindEvent_","removeEventListener","e","currentTarget","tooltip","hide","clearTimeout","setTimeout","dx","pageX","dy","pageY","Math","sqrt","show_","dispose","style","display","block","unblock","textContent","tip","utils","string","wrap","lines","split","i","div","length","createTextNode","rtl","RTL","windowWidth","documentElement","clientWidth","windowHeight","clientHeight","direction","anchorX","offsetWidth","anchorY","offsetHeight","window","scrollY","max","scrollX","top","left"],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Library to create tooltips for Blockly.\n * First, call Blockly.Tooltip.init() after onload.\n * Second, set the 'tooltip' property on any SVG element that needs a tooltip.\n * If the tooltip is a string, then that message will be displayed.\n * If the tooltip is an SVG element, then that object's tooltip will be used.\n * Third, call Blockly.Tooltip.bindMouseEvents(e) passing the SVG element.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.Tooltip\n * @namespace\n */\ngoog.provide('Blockly.Tooltip');\n\ngoog.require('Blockly.utils.string');\n\n\n/**\n * Is a tooltip currently showing?\n */\nBlockly.Tooltip.visible = false;\n\n/**\n * Is someone else blocking the tooltip from being shown?\n * @type {boolean}\n * @private\n */\nBlockly.Tooltip.blocked_ = false;\n\n/**\n * Maximum width (in characters) of a tooltip.\n */\nBlockly.Tooltip.LIMIT = 50;\n\n/**\n * PID of suspended thread to clear tooltip on mouse out.\n * @private\n */\nBlockly.Tooltip.mouseOutPid_ = 0;\n\n/**\n * PID of suspended thread to show the tooltip.\n * @private\n */\nBlockly.Tooltip.showPid_ = 0;\n\n/**\n * Last observed X location of the mouse pointer (freezes when tooltip appears).\n * @private\n */\nBlockly.Tooltip.lastX_ = 0;\n\n/**\n * Last observed Y location of the mouse pointer (freezes when tooltip appears).\n * @private\n */\nBlockly.Tooltip.lastY_ = 0;\n\n/**\n * Current element being pointed at.\n * @type {Element}\n * @private\n */\nBlockly.Tooltip.element_ = null;\n\n/**\n * Once a tooltip has opened for an element, that element is 'poisoned' and\n * cannot respawn a tooltip until the pointer moves over a different element.\n * @type {Element}\n * @private\n */\nBlockly.Tooltip.poisonedElement_ = null;\n\n/**\n * Horizontal offset between mouse cursor and tooltip.\n */\nBlockly.Tooltip.OFFSET_X = 0;\n\n/**\n * Vertical offset between mouse cursor and tooltip.\n */\nBlockly.Tooltip.OFFSET_Y = 10;\n\n/**\n * Radius mouse can move before killing tooltip.\n */\nBlockly.Tooltip.RADIUS_OK = 10;\n\n/**\n * Delay before tooltip appears.\n */\nBlockly.Tooltip.HOVER_MS = 750;\n\n/**\n * Horizontal padding between tooltip and screen edge.\n */\nBlockly.Tooltip.MARGINS = 5;\n\n/**\n * The HTML container.  Set once by Blockly.Tooltip.createDom.\n * @type {Element}\n */\nBlockly.Tooltip.DIV = null;\n\n/**\n * Create the tooltip div and inject it onto the page.\n */\nBlockly.Tooltip.createDom = function() {\n  if (Blockly.Tooltip.DIV) {\n    return;  // Already created.\n  }\n  // Create an HTML container for popup overlays (e.g. editor widgets).\n  Blockly.Tooltip.DIV = document.createElement('div');\n  Blockly.Tooltip.DIV.className = 'blocklyTooltipDiv';\n  var container = Blockly.parentContainer || document.body;\n  container.appendChild(Blockly.Tooltip.DIV);\n};\n\n/**\n * Binds the required mouse events onto an SVG element.\n * @param {!Element} element SVG element onto which tooltip is to be bound.\n */\nBlockly.Tooltip.bindMouseEvents = function(element) {\n  element.mouseOverWrapper_ = Blockly.bindEvent_(element, 'mouseover', null,\n      Blockly.Tooltip.onMouseOver_);\n  element.mouseOutWrapper_ = Blockly.bindEvent_(element, 'mouseout', null,\n      Blockly.Tooltip.onMouseOut_);\n\n  // Don't use bindEvent_ for mousemove since that would create a\n  // corresponding touch handler, even though this only makes sense in the\n  // context of a mouseover/mouseout.\n  element.addEventListener('mousemove', Blockly.Tooltip.onMouseMove_, false);\n};\n\n/**\n * Unbinds tooltip mouse events from the SVG element.\n * @param {!Element} element SVG element onto which tooltip is bound.\n */\nBlockly.Tooltip.unbindMouseEvents = function(element) {\n  if (!element) {\n    return;\n  }\n  Blockly.unbindEvent_(element.mouseOverWrapper_);\n  Blockly.unbindEvent_(element.mouseOutWrapper_);\n  element.removeEventListener('mousemove', Blockly.Tooltip.onMouseMove_);\n};\n\n/**\n * Hide the tooltip if the mouse is over a different object.\n * Initialize the tooltip to potentially appear for this object.\n * @param {!Event} e Mouse event.\n * @private\n */\nBlockly.Tooltip.onMouseOver_ = function(e) {\n  if (Blockly.Tooltip.blocked_) {\n    // Someone doesn't want us to show tooltips.\n    return;\n  }\n  // If the tooltip is an object, treat it as a pointer to the next object in\n  // the chain to look at.  Terminate when a string or function is found.\n  var element = e.currentTarget;\n  while ((typeof element.tooltip != 'string') &&\n         (typeof element.tooltip != 'function')) {\n    element = element.tooltip;\n  }\n  if (Blockly.Tooltip.element_ != element) {\n    Blockly.Tooltip.hide();\n    Blockly.Tooltip.poisonedElement_ = null;\n    Blockly.Tooltip.element_ = element;\n  }\n  // Forget about any immediately preceding mouseOut event.\n  clearTimeout(Blockly.Tooltip.mouseOutPid_);\n};\n\n/**\n * Hide the tooltip if the mouse leaves the object and enters the workspace.\n * @param {!Event} _e Mouse event.\n * @private\n */\nBlockly.Tooltip.onMouseOut_ = function(_e) {\n  if (Blockly.Tooltip.blocked_) {\n    // Someone doesn't want us to show tooltips.\n    return;\n  }\n  // Moving from one element to another (overlapping or with no gap) generates\n  // a mouseOut followed instantly by a mouseOver.  Fork off the mouseOut\n  // event and kill it if a mouseOver is received immediately.\n  // This way the task only fully executes if mousing into the void.\n  Blockly.Tooltip.mouseOutPid_ = setTimeout(function() {\n    Blockly.Tooltip.element_ = null;\n    Blockly.Tooltip.poisonedElement_ = null;\n    Blockly.Tooltip.hide();\n  }, 1);\n  clearTimeout(Blockly.Tooltip.showPid_);\n};\n\n/**\n * When hovering over an element, schedule a tooltip to be shown.  If a tooltip\n * is already visible, hide it if the mouse strays out of a certain radius.\n * @param {!Event} e Mouse event.\n * @private\n */\nBlockly.Tooltip.onMouseMove_ = function(e) {\n  if (!Blockly.Tooltip.element_ || !Blockly.Tooltip.element_.tooltip) {\n    // No tooltip here to show.\n    return;\n  } else if (Blockly.Tooltip.blocked_) {\n    // Someone doesn't want us to show tooltips.  We are probably handling a\n    // user gesture, such as a click or drag.\n    return;\n  }\n  if (Blockly.Tooltip.visible) {\n    // Compute the distance between the mouse position when the tooltip was\n    // shown and the current mouse position.  Pythagorean theorem.\n    var dx = Blockly.Tooltip.lastX_ - e.pageX;\n    var dy = Blockly.Tooltip.lastY_ - e.pageY;\n    if (Math.sqrt(dx * dx + dy * dy) > Blockly.Tooltip.RADIUS_OK) {\n      Blockly.Tooltip.hide();\n    }\n  } else if (Blockly.Tooltip.poisonedElement_ != Blockly.Tooltip.element_) {\n    // The mouse moved, clear any previously scheduled tooltip.\n    clearTimeout(Blockly.Tooltip.showPid_);\n    // Maybe this time the mouse will stay put.  Schedule showing of tooltip.\n    Blockly.Tooltip.lastX_ = e.pageX;\n    Blockly.Tooltip.lastY_ = e.pageY;\n    Blockly.Tooltip.showPid_ =\n        setTimeout(Blockly.Tooltip.show_, Blockly.Tooltip.HOVER_MS);\n  }\n};\n\n/**\n * Dispose of the tooltip.\n * @package\n */\nBlockly.Tooltip.dispose = function() {\n  Blockly.Tooltip.element_ = null;\n  Blockly.Tooltip.poisonedElement_ = null;\n  Blockly.Tooltip.hide();\n};\n\n/**\n * Hide the tooltip.\n */\nBlockly.Tooltip.hide = function() {\n  if (Blockly.Tooltip.visible) {\n    Blockly.Tooltip.visible = false;\n    if (Blockly.Tooltip.DIV) {\n      Blockly.Tooltip.DIV.style.display = 'none';\n    }\n  }\n  if (Blockly.Tooltip.showPid_) {\n    clearTimeout(Blockly.Tooltip.showPid_);\n  }\n};\n\n/**\n * Hide any in-progress tooltips and block showing new tooltips until the next\n * call to unblock().\n * @package\n */\nBlockly.Tooltip.block = function() {\n  Blockly.Tooltip.hide();\n  Blockly.Tooltip.blocked_ = true;\n};\n\n/**\n * Unblock tooltips: allow them to be scheduled and shown according to their own\n * logic.\n * @package\n */\nBlockly.Tooltip.unblock = function() {\n  Blockly.Tooltip.blocked_ = false;\n};\n\n/**\n * Create the tooltip and show it.\n * @private\n */\nBlockly.Tooltip.show_ = function() {\n  if (Blockly.Tooltip.blocked_) {\n    // Someone doesn't want us to show tooltips.\n    return;\n  }\n  Blockly.Tooltip.poisonedElement_ = Blockly.Tooltip.element_;\n  if (!Blockly.Tooltip.DIV) {\n    return;\n  }\n  // Erase all existing text.\n  Blockly.Tooltip.DIV.textContent = '';\n  // Get the new text.\n  var tip = Blockly.Tooltip.element_.tooltip;\n  while (typeof tip == 'function') {\n    tip = tip();\n  }\n  tip = Blockly.utils.string.wrap(tip, Blockly.Tooltip.LIMIT);\n  // Create new text, line by line.\n  var lines = tip.split('\\n');\n  for (var i = 0; i < lines.length; i++) {\n    var div = document.createElement('div');\n    div.appendChild(document.createTextNode(lines[i]));\n    Blockly.Tooltip.DIV.appendChild(div);\n  }\n  var rtl = Blockly.Tooltip.element_.RTL;\n  var windowWidth = document.documentElement.clientWidth;\n  var windowHeight = document.documentElement.clientHeight;\n  // Display the tooltip.\n  Blockly.Tooltip.DIV.style.direction = rtl ? 'rtl' : 'ltr';\n  Blockly.Tooltip.DIV.style.display = 'block';\n  Blockly.Tooltip.visible = true;\n  // Move the tooltip to just below the cursor.\n  var anchorX = Blockly.Tooltip.lastX_;\n  if (rtl) {\n    anchorX -= Blockly.Tooltip.OFFSET_X + Blockly.Tooltip.DIV.offsetWidth;\n  } else {\n    anchorX += Blockly.Tooltip.OFFSET_X;\n  }\n  var anchorY = Blockly.Tooltip.lastY_ + Blockly.Tooltip.OFFSET_Y;\n\n  if (anchorY + Blockly.Tooltip.DIV.offsetHeight >\n      windowHeight + window.scrollY) {\n    // Falling off the bottom of the screen; shift the tooltip up.\n    anchorY -= Blockly.Tooltip.DIV.offsetHeight + 2 * Blockly.Tooltip.OFFSET_Y;\n  }\n  if (rtl) {\n    // Prevent falling off left edge in RTL mode.\n    anchorX = Math.max(Blockly.Tooltip.MARGINS - window.scrollX, anchorX);\n  } else {\n    if (anchorX + Blockly.Tooltip.DIV.offsetWidth >\n        windowWidth + window.scrollX - 2 * Blockly.Tooltip.MARGINS) {\n      // Falling off the right edge of the screen;\n      // clamp the tooltip on the edge.\n      anchorX = windowWidth - Blockly.Tooltip.DIV.offsetWidth -\n          2 * Blockly.Tooltip.MARGINS;\n    }\n  }\n  Blockly.Tooltip.DIV.style.top = anchorY + 'px';\n  Blockly.Tooltip.DIV.style.left = anchorX + 'px';\n};\n"],"file":"tooltip.min.js"}