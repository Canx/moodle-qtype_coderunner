{"version":3,"sources":["../../../../src/blockly/generators/javascript/logic.js"],"names":["goog","provide","require","Blockly","JavaScript","block","n","code","branchCode","conditionCode","STATEMENT_PREFIX","injectId","valueToCode","ORDER_NONE","statementToCode","STATEMENT_SUFFIX","prefixLines","INDENT","getInput","operator","getFieldValue","order","ORDER_EQUALITY","ORDER_RELATIONAL","argument0","argument1","ORDER_LOGICAL_AND","ORDER_LOGICAL_OR","defaultArgument","ORDER_LOGICAL_NOT","ORDER_ATOMIC","value_if","ORDER_CONDITIONAL","value_then","value_else"],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for logic blocks.\n * @author q.neutron@gmail.com (Quynh Neutron)\n */\n'use strict';\n\ngoog.provide('Blockly.JavaScript.logic');\n\ngoog.require('Blockly.JavaScript');\n\n\nBlockly.JavaScript['controls_if'] = function(block) {\n  // If/elseif/else condition.\n  var n = 0;\n  var code = '', branchCode, conditionCode;\n  if (Blockly.JavaScript.STATEMENT_PREFIX) {\n    // Automatic prefix insertion is switched off for this block.  Add manually.\n    code += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX,\n        block);\n  }\n  do {\n    conditionCode = Blockly.JavaScript.valueToCode(block, 'IF' + n,\n        Blockly.JavaScript.ORDER_NONE) || 'false';\n    branchCode = Blockly.JavaScript.statementToCode(block, 'DO' + n);\n    if (Blockly.JavaScript.STATEMENT_SUFFIX) {\n      branchCode = Blockly.JavaScript.prefixLines(\n          Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX,\n          block), Blockly.JavaScript.INDENT) + branchCode;\n    }\n    code += (n > 0 ? ' else ' : '') +\n        'if (' + conditionCode + ') {\\n' + branchCode + '}';\n    ++n;\n  } while (block.getInput('IF' + n));\n\n  if (block.getInput('ELSE') || Blockly.JavaScript.STATEMENT_SUFFIX) {\n    branchCode = Blockly.JavaScript.statementToCode(block, 'ELSE');\n    if (Blockly.JavaScript.STATEMENT_SUFFIX) {\n      branchCode = Blockly.JavaScript.prefixLines(\n          Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX,\n          block), Blockly.JavaScript.INDENT) + branchCode;\n    }\n    code += ' else {\\n' + branchCode + '}';\n  }\n  return code + '\\n';\n};\n\nBlockly.JavaScript['controls_ifelse'] = Blockly.JavaScript['controls_if'];\n\nBlockly.JavaScript['logic_compare'] = function(block) {\n  // Comparison operator.\n  var OPERATORS = {\n    'EQ': '==',\n    'NEQ': '!=',\n    'LT': '<',\n    'LTE': '<=',\n    'GT': '>',\n    'GTE': '>='\n  };\n  var operator = OPERATORS[block.getFieldValue('OP')];\n  var order = (operator == '==' || operator == '!=') ?\n      Blockly.JavaScript.ORDER_EQUALITY : Blockly.JavaScript.ORDER_RELATIONAL;\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'A', order) || '0';\n  var argument1 = Blockly.JavaScript.valueToCode(block, 'B', order) || '0';\n  var code = argument0 + ' ' + operator + ' ' + argument1;\n  return [code, order];\n};\n\nBlockly.JavaScript['logic_operation'] = function(block) {\n  // Operations 'and', 'or'.\n  var operator = (block.getFieldValue('OP') == 'AND') ? '&&' : '||';\n  var order = (operator == '&&') ? Blockly.JavaScript.ORDER_LOGICAL_AND :\n      Blockly.JavaScript.ORDER_LOGICAL_OR;\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'A', order);\n  var argument1 = Blockly.JavaScript.valueToCode(block, 'B', order);\n  if (!argument0 && !argument1) {\n    // If there are no arguments, then the return value is false.\n    argument0 = 'false';\n    argument1 = 'false';\n  } else {\n    // Single missing arguments have no effect on the return value.\n    var defaultArgument = (operator == '&&') ? 'true' : 'false';\n    if (!argument0) {\n      argument0 = defaultArgument;\n    }\n    if (!argument1) {\n      argument1 = defaultArgument;\n    }\n  }\n  var code = argument0 + ' ' + operator + ' ' + argument1;\n  return [code, order];\n};\n\nBlockly.JavaScript['logic_negate'] = function(block) {\n  // Negation.\n  var order = Blockly.JavaScript.ORDER_LOGICAL_NOT;\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'BOOL', order) ||\n      'true';\n  var code = '!' + argument0;\n  return [code, order];\n};\n\nBlockly.JavaScript['logic_boolean'] = function(block) {\n  // Boolean values true and false.\n  var code = (block.getFieldValue('BOOL') == 'TRUE') ? 'true' : 'false';\n  return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n\nBlockly.JavaScript['logic_null'] = function(block) {\n  // Null data type.\n  return ['null', Blockly.JavaScript.ORDER_ATOMIC];\n};\n\nBlockly.JavaScript['logic_ternary'] = function(block) {\n  // Ternary operator.\n  var value_if = Blockly.JavaScript.valueToCode(block, 'IF',\n      Blockly.JavaScript.ORDER_CONDITIONAL) || 'false';\n  var value_then = Blockly.JavaScript.valueToCode(block, 'THEN',\n      Blockly.JavaScript.ORDER_CONDITIONAL) || 'null';\n  var value_else = Blockly.JavaScript.valueToCode(block, 'ELSE',\n      Blockly.JavaScript.ORDER_CONDITIONAL) || 'null';\n  var code = value_if + ' ? ' + value_then + ' : ' + value_else;\n  return [code, Blockly.JavaScript.ORDER_CONDITIONAL];\n};\n"],"file":"logic.min.js"}