'use strict';goog.provide("Blockly.JavaScript.texts");goog.require("Blockly.JavaScript");Blockly.JavaScript.text=function(a){var b=Blockly.JavaScript.quote_(a.getFieldValue("TEXT"));return[b,Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.text_multiline=function(a){var b=Blockly.JavaScript.multiline_quote_(a.getFieldValue("TEXT"));if(-1!=b.indexOf("\n")){b="("+b+")"}return[b,Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.text.forceString_=function(a){if(Blockly.JavaScript.text.forceString_.strRegExp.test(a)){return a}return"String("+a+")"};Blockly.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/;Blockly.JavaScript.text_join=function(a){switch(a.itemCount_){case 0:return["''",Blockly.JavaScript.ORDER_ATOMIC];case 1:var b=Blockly.JavaScript.valueToCode(a,"ADD0",Blockly.JavaScript.ORDER_NONE)||"''",c=Blockly.JavaScript.text.forceString_(b);return[c,Blockly.JavaScript.ORDER_FUNCTION_CALL];case 2:var d=Blockly.JavaScript.valueToCode(a,"ADD0",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(a,"ADD1",Blockly.JavaScript.ORDER_NONE)||"''",c=Blockly.JavaScript.text.forceString_(d)+" + "+Blockly.JavaScript.text.forceString_(e);return[c,Blockly.JavaScript.ORDER_ADDITION];default:for(var f=Array(a.itemCount_),g=0;g<a.itemCount_;g++){f[g]=Blockly.JavaScript.valueToCode(a,"ADD"+g,Blockly.JavaScript.ORDER_COMMA)||"''"}var c="["+f.join(",")+"].join('')";return[c,Blockly.JavaScript.ORDER_FUNCTION_CALL];}};Blockly.JavaScript.text_append=function(a){var b=Blockly.JavaScript.variableDB_.getName(a.getFieldValue("VAR"),Blockly.VARIABLE_CATEGORY_NAME),c=Blockly.JavaScript.valueToCode(a,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''";return b+" += "+Blockly.JavaScript.text.forceString_(c)+";\n"};Blockly.JavaScript.text_length=function(a){var b=Blockly.JavaScript.valueToCode(a,"VALUE",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"''";return[b+".length",Blockly.JavaScript.ORDER_MEMBER]};Blockly.JavaScript.text_isEmpty=function(a){var b=Blockly.JavaScript.valueToCode(a,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''";return["!"+b+".length",Blockly.JavaScript.ORDER_LOGICAL_NOT]};Blockly.JavaScript.text_indexOf=function(a){var b="FIRST"==a.getFieldValue("END")?"indexOf":"lastIndexOf",c=Blockly.JavaScript.valueToCode(a,"FIND",Blockly.JavaScript.ORDER_NONE)||"''",d=Blockly.JavaScript.valueToCode(a,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''",e=d+"."+b+"("+c+")";if(a.workspace.options.oneBasedIndex){return[e+" + 1",Blockly.JavaScript.ORDER_ADDITION]}return[e,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.text_charAt=function(a){var b=a.getFieldValue("WHERE")||"FROM_START",c="RANDOM"==b?Blockly.JavaScript.ORDER_NONE:Blockly.JavaScript.ORDER_MEMBER,d=Blockly.JavaScript.valueToCode(a,"VALUE",c)||"''";switch(b){case"FIRST":var e=d+".charAt(0)";return[e,Blockly.JavaScript.ORDER_FUNCTION_CALL];case"LAST":var e=d+".slice(-1)";return[e,Blockly.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":var f=Blockly.JavaScript.getAdjusted(a,"AT"),e=d+".charAt("+f+")";return[e,Blockly.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":var f=Blockly.JavaScript.getAdjusted(a,"AT",1,!0),e=d+".slice("+f+").charAt(0)";return[e,Blockly.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":var g=Blockly.JavaScript.provideFunction_("textRandomLetter",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"]),e=g+"("+d+")";return[e,Blockly.JavaScript.ORDER_FUNCTION_CALL];}throw Error("Unhandled option (text_charAt).")};Blockly.JavaScript.text.getIndex_=function(a,b,c){if("FIRST"==b){return"0"}else if("FROM_END"==b){return a+".length - 1 - "+c}else if("LAST"==b){return a+".length - 1"}else{return c}};Blockly.JavaScript.text_getSubstring=function(a){var b=Blockly.JavaScript.valueToCode(a,"STRING",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"''",c=a.getFieldValue("WHERE1"),d=a.getFieldValue("WHERE2");if("FIRST"==c&&"LAST"==d){var e=b}else if(b.match(/^'?\w+'?$/)||"FROM_END"!=c&&"LAST"!=c&&"FROM_END"!=d&&"LAST"!=d){switch(c){case"FROM_START":var f=Blockly.JavaScript.getAdjusted(a,"AT1");break;case"FROM_END":var f=Blockly.JavaScript.getAdjusted(a,"AT1",1,!1,Blockly.JavaScript.ORDER_SUBTRACTION);f=b+".length - "+f;break;case"FIRST":var f="0";break;default:throw Error("Unhandled option (text_getSubstring).");}switch(d){case"FROM_START":var g=Blockly.JavaScript.getAdjusted(a,"AT2",1);break;case"FROM_END":var g=Blockly.JavaScript.getAdjusted(a,"AT2",0,!1,Blockly.JavaScript.ORDER_SUBTRACTION);g=b+".length - "+g;break;case"LAST":var g=b+".length";break;default:throw Error("Unhandled option (text_getSubstring).");}e=b+".slice("+f+", "+g+")"}else{var f=Blockly.JavaScript.getAdjusted(a,"AT1"),g=Blockly.JavaScript.getAdjusted(a,"AT2"),h=Blockly.JavaScript.text.getIndex_,i={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},j=Blockly.JavaScript.provideFunction_("subsequence"+i[c]+i[d],["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==c||"FROM_START"==c?", at1":"")+("FROM_END"==d||"FROM_START"==d?", at2":"")+") {","  var start = "+h("sequence",c,"at1")+";","  var end = "+h("sequence",d,"at2")+" + 1;","  return sequence.slice(start, end);","}"]),e=j+"("+b+("FROM_END"==c||"FROM_START"==c?", "+f:"")+("FROM_END"==d||"FROM_START"==d?", "+g:"")+")"}return[e,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.text_changeCase=function(a){var b={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[a.getFieldValue("CASE")],c=b?Blockly.JavaScript.ORDER_MEMBER:Blockly.JavaScript.ORDER_NONE,d=Blockly.JavaScript.valueToCode(a,"TEXT",c)||"''";if(b){var e=d+b}else{var f=Blockly.JavaScript.provideFunction_("textToTitleCase",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"]),e=f+"("+d+")"}return[e,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.text_trim=function(a){var b={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[a.getFieldValue("MODE")],c=Blockly.JavaScript.valueToCode(a,"TEXT",Blockly.JavaScript.ORDER_MEMBER)||"''";return[c+b,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.text_print=function(a){var b=Blockly.JavaScript.valueToCode(a,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''";return"window.alert("+b+");\n"};Blockly.JavaScript.text_prompt_ext=function(a){if(a.getField("TEXT")){var b=Blockly.JavaScript.quote_(a.getFieldValue("TEXT"))}else{var b=Blockly.JavaScript.valueToCode(a,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''"}var c="window.prompt("+b+")",d="NUMBER"==a.getFieldValue("TYPE");if(d){c="Number("+c+")"}return[c,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.text_prompt=Blockly.JavaScript.text_prompt_ext;Blockly.JavaScript.text_count=function(a){var b=Blockly.JavaScript.valueToCode(a,"TEXT",Blockly.JavaScript.ORDER_MEMBER)||"''",c=Blockly.JavaScript.valueToCode(a,"SUB",Blockly.JavaScript.ORDER_NONE)||"''",d=Blockly.JavaScript.provideFunction_("textCount",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"]);return[d+"("+b+", "+c+")",Blockly.JavaScript.ORDER_SUBTRACTION]};Blockly.JavaScript.text_replace=function(a){var b=Blockly.JavaScript.valueToCode(a,"TEXT",Blockly.JavaScript.ORDER_MEMBER)||"''",c=Blockly.JavaScript.valueToCode(a,"FROM",Blockly.JavaScript.ORDER_NONE)||"''",d=Blockly.JavaScript.valueToCode(a,"TO",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.provideFunction_("textReplace",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {","  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,\"\\\\$1\")","                 .replace(/\\x08/g,\"\\\\x08\");","  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"]);return[e+"("+b+", "+c+", "+d+")",Blockly.JavaScript.ORDER_MEMBER]};Blockly.JavaScript.text_reverse=function(a){var b=Blockly.JavaScript.valueToCode(a,"TEXT",Blockly.JavaScript.ORDER_MEMBER)||"''";return[b+".split('').reverse().join('')",Blockly.JavaScript.ORDER_MEMBER]};
//# sourceMappingURL=text.min.js.map
