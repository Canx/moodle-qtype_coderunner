'use strict';goog.provide("Blockly.JavaScript.lists");goog.require("Blockly.JavaScript");Blockly.JavaScript.lists_create_empty=function(){return["[]",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.lists_create_with=function(a){for(var b=Array(a.itemCount_),c=0;c<a.itemCount_;c++){b[c]=Blockly.JavaScript.valueToCode(a,"ADD"+c,Blockly.JavaScript.ORDER_COMMA)||"null"}var d="["+b.join(", ")+"]";return[d,Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.lists_repeat=function(a){var b=Blockly.JavaScript.provideFunction_("listsRepeat",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"]),c=Blockly.JavaScript.valueToCode(a,"ITEM",Blockly.JavaScript.ORDER_COMMA)||"null",d=Blockly.JavaScript.valueToCode(a,"NUM",Blockly.JavaScript.ORDER_COMMA)||"0";return[b+"("+c+", "+d+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.lists_length=function(a){var b=Blockly.JavaScript.valueToCode(a,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]";return[b+".length",Blockly.JavaScript.ORDER_MEMBER]};Blockly.JavaScript.lists_isEmpty=function(a){var b=Blockly.JavaScript.valueToCode(a,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]";return["!"+b+".length",Blockly.JavaScript.ORDER_LOGICAL_NOT]};Blockly.JavaScript.lists_indexOf=function(a){var b="FIRST"==a.getFieldValue("END")?"indexOf":"lastIndexOf",c=Blockly.JavaScript.valueToCode(a,"FIND",Blockly.JavaScript.ORDER_NONE)||"''",d=Blockly.JavaScript.valueToCode(a,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]",e=d+"."+b+"("+c+")";if(a.workspace.options.oneBasedIndex){return[e+" + 1",Blockly.JavaScript.ORDER_ADDITION]}return[e,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.lists_getIndex=function(a){var b=a.getFieldValue("MODE")||"GET",c=a.getFieldValue("WHERE")||"FROM_START",d="RANDOM"==c?Blockly.JavaScript.ORDER_COMMA:Blockly.JavaScript.ORDER_MEMBER,e=Blockly.JavaScript.valueToCode(a,"VALUE",d)||"[]";switch(c){case"FIRST":if("GET"==b){var f=e+"[0]";return[f,Blockly.JavaScript.ORDER_MEMBER]}else if("GET_REMOVE"==b){var f=e+".shift()";return[f,Blockly.JavaScript.ORDER_MEMBER]}else if("REMOVE"==b){return e+".shift();\n"}break;case"LAST":if("GET"==b){var f=e+".slice(-1)[0]";return[f,Blockly.JavaScript.ORDER_MEMBER]}else if("GET_REMOVE"==b){var f=e+".pop()";return[f,Blockly.JavaScript.ORDER_MEMBER]}else if("REMOVE"==b){return e+".pop();\n"}break;case"FROM_START":var g=Blockly.JavaScript.getAdjusted(a,"AT");if("GET"==b){var f=e+"["+g+"]";return[f,Blockly.JavaScript.ORDER_MEMBER]}else if("GET_REMOVE"==b){var f=e+".splice("+g+", 1)[0]";return[f,Blockly.JavaScript.ORDER_FUNCTION_CALL]}else if("REMOVE"==b){return e+".splice("+g+", 1);\n"}break;case"FROM_END":var g=Blockly.JavaScript.getAdjusted(a,"AT",1,!0);if("GET"==b){var f=e+".slice("+g+")[0]";return[f,Blockly.JavaScript.ORDER_FUNCTION_CALL]}else if("GET_REMOVE"==b){var f=e+".splice("+g+", 1)[0]";return[f,Blockly.JavaScript.ORDER_FUNCTION_CALL]}else if("REMOVE"==b){return e+".splice("+g+", 1);"}break;case"RANDOM":var h=Blockly.JavaScript.provideFunction_("listsGetRandomItem",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"]);f=h+"("+e+", "+("GET"!=b)+")";if("GET"==b||"GET_REMOVE"==b){return[f,Blockly.JavaScript.ORDER_FUNCTION_CALL]}else if("REMOVE"==b){return f+";\n"}break;}throw Error("Unhandled combination (lists_getIndex).")};Blockly.JavaScript.lists_setIndex=function(a){var c=Blockly.JavaScript.valueToCode(a,"LIST",Blockly.JavaScript.ORDER_MEMBER)||"[]",d=a.getFieldValue("MODE")||"GET",e=a.getFieldValue("WHERE")||"FROM_START",f=Blockly.JavaScript.valueToCode(a,"TO",Blockly.JavaScript.ORDER_ASSIGNMENT)||"null";function b(){if(c.match(/^\w+$/)){return""}var a=Blockly.JavaScript.variableDB_.getDistinctName("tmpList",Blockly.VARIABLE_CATEGORY_NAME),b="var "+a+" = "+c+";\n";c=a;return b}switch(e){case"FIRST":if("SET"==d){return c+"[0] = "+f+";\n"}else if("INSERT"==d){return c+".unshift("+f+");\n"}break;case"LAST":if("SET"==d){var g=b();g+=c+"["+c+".length - 1] = "+f+";\n";return g}else if("INSERT"==d){return c+".push("+f+");\n"}break;case"FROM_START":var h=Blockly.JavaScript.getAdjusted(a,"AT");if("SET"==d){return c+"["+h+"] = "+f+";\n"}else if("INSERT"==d){return c+".splice("+h+", 0, "+f+");\n"}break;case"FROM_END":var h=Blockly.JavaScript.getAdjusted(a,"AT",1,!1,Blockly.JavaScript.ORDER_SUBTRACTION),g=b();if("SET"==d){g+=c+"["+c+".length - "+h+"] = "+f+";\n";return g}else if("INSERT"==d){g+=c+".splice("+c+".length - "+h+", 0, "+f+");\n";return g}break;case"RANDOM":var g=b(),i=Blockly.JavaScript.variableDB_.getDistinctName("tmpX",Blockly.VARIABLE_CATEGORY_NAME);g+="var "+i+" = Math.floor(Math.random() * "+c+".length);\n";if("SET"==d){g+=c+"["+i+"] = "+f+";\n";return g}else if("INSERT"==d){g+=c+".splice("+i+", 0, "+f+");\n";return g}break;}throw Error("Unhandled combination (lists_setIndex).")};Blockly.JavaScript.lists.getIndex_=function(a,b,c){if("FIRST"==b){return"0"}else if("FROM_END"==b){return a+".length - 1 - "+c}else if("LAST"==b){return a+".length - 1"}else{return c}};Blockly.JavaScript.lists_getSublist=function(a){var b=Blockly.JavaScript.valueToCode(a,"LIST",Blockly.JavaScript.ORDER_MEMBER)||"[]",c=a.getFieldValue("WHERE1"),d=a.getFieldValue("WHERE2");if("FIRST"==c&&"LAST"==d){var e=b+".slice(0)"}else if(b.match(/^\w+$/)||"FROM_END"!=c&&"FROM_START"==d){switch(c){case"FROM_START":var f=Blockly.JavaScript.getAdjusted(a,"AT1");break;case"FROM_END":var f=Blockly.JavaScript.getAdjusted(a,"AT1",1,!1,Blockly.JavaScript.ORDER_SUBTRACTION);f=b+".length - "+f;break;case"FIRST":var f="0";break;default:throw Error("Unhandled option (lists_getSublist).");}switch(d){case"FROM_START":var g=Blockly.JavaScript.getAdjusted(a,"AT2",1);break;case"FROM_END":var g=Blockly.JavaScript.getAdjusted(a,"AT2",0,!1,Blockly.JavaScript.ORDER_SUBTRACTION);g=b+".length - "+g;break;case"LAST":var g=b+".length";break;default:throw Error("Unhandled option (lists_getSublist).");}e=b+".slice("+f+", "+g+")"}else{var f=Blockly.JavaScript.getAdjusted(a,"AT1"),g=Blockly.JavaScript.getAdjusted(a,"AT2"),h=Blockly.JavaScript.lists.getIndex_,i={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},j=Blockly.JavaScript.provideFunction_("subsequence"+i[c]+i[d],["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==c||"FROM_START"==c?", at1":"")+("FROM_END"==d||"FROM_START"==d?", at2":"")+") {","  var start = "+h("sequence",c,"at1")+";","  var end = "+h("sequence",d,"at2")+" + 1;","  return sequence.slice(start, end);","}"]),e=j+"("+b+("FROM_END"==c||"FROM_START"==c?", "+f:"")+("FROM_END"==d||"FROM_START"==d?", "+g:"")+")"}return[e,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.lists_sort=function(a){var b=Blockly.JavaScript.valueToCode(a,"LIST",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"[]",c="1"===a.getFieldValue("DIRECTION")?1:-1,d=a.getFieldValue("TYPE"),e=Blockly.JavaScript.provideFunction_("listsGetSortCompare",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {","    \"NUMERIC\": function(a, b) {","        return Number(a) - Number(b); },","    \"TEXT\": function(a, b) {","        return a.toString() > b.toString() ? 1 : -1; },","    \"IGNORE_CASE\": function(a, b) {","        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"]);return[b+".slice().sort("+e+"(\""+d+"\", "+c+"))",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.lists_split=function(a){var b=Blockly.JavaScript.valueToCode(a,"INPUT",Blockly.JavaScript.ORDER_MEMBER),c=Blockly.JavaScript.valueToCode(a,"DELIM",Blockly.JavaScript.ORDER_NONE)||"''",d=a.getFieldValue("MODE");if("SPLIT"==d){if(!b){b="''"}var e="split"}else if("JOIN"==d){if(!b){b="[]"}var e="join"}else{throw Error("Unknown mode: "+d)}var f=b+"."+e+"("+c+")";return[f,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.lists_reverse=function(a){var b=Blockly.JavaScript.valueToCode(a,"LIST",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"[]";return[b+".slice().reverse()",Blockly.JavaScript.ORDER_FUNCTION_CALL]};
//# sourceMappingURL=lists.min.js.map
