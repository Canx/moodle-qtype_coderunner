'use strict';goog.provide("Blockly.PHP.math");goog.require("Blockly.PHP");Blockly.PHP.math_number=function(a){var b=+a.getFieldValue("NUM"),c=0<=b?Blockly.PHP.ORDER_ATOMIC:Blockly.PHP.ORDER_UNARY_NEGATION;if(b==1/0){b="INF"}else if(b==-Infinity){b="-INF"}return[b,c]};Blockly.PHP.math_arithmetic=function(a){var b={ADD:[" + ",Blockly.PHP.ORDER_ADDITION],MINUS:[" - ",Blockly.PHP.ORDER_SUBTRACTION],MULTIPLY:[" * ",Blockly.PHP.ORDER_MULTIPLICATION],DIVIDE:[" / ",Blockly.PHP.ORDER_DIVISION],POWER:[" ** ",Blockly.PHP.ORDER_POWER]},c=b[a.getFieldValue("OP")],d=c[0],e=c[1],f=Blockly.PHP.valueToCode(a,"A",e)||"0",g=Blockly.PHP.valueToCode(a,"B",e)||"0";return[f+d+g,e]};Blockly.PHP.math_single=function(a){var b=a.getFieldValue("OP"),c,d;if("NEG"==b){d=Blockly.PHP.valueToCode(a,"NUM",Blockly.PHP.ORDER_UNARY_NEGATION)||"0";if("-"==d[0]){d=" "+d}c="-"+d;return[c,Blockly.PHP.ORDER_UNARY_NEGATION]}if("SIN"==b||"COS"==b||"TAN"==b){d=Blockly.PHP.valueToCode(a,"NUM",Blockly.PHP.ORDER_DIVISION)||"0"}else{d=Blockly.PHP.valueToCode(a,"NUM",Blockly.PHP.ORDER_NONE)||"0"}switch(b){case"ABS":c="abs("+d+")";break;case"ROOT":c="sqrt("+d+")";break;case"LN":c="log("+d+")";break;case"EXP":c="exp("+d+")";break;case"POW10":c="pow(10,"+d+")";break;case"ROUND":c="round("+d+")";break;case"ROUNDUP":c="ceil("+d+")";break;case"ROUNDDOWN":c="floor("+d+")";break;case"SIN":c="sin("+d+" / 180 * pi())";break;case"COS":c="cos("+d+" / 180 * pi())";break;case"TAN":c="tan("+d+" / 180 * pi())";break;}if(c){return[c,Blockly.PHP.ORDER_FUNCTION_CALL]}switch(b){case"LOG10":c="log("+d+") / log(10)";break;case"ASIN":c="asin("+d+") / pi() * 180";break;case"ACOS":c="acos("+d+") / pi() * 180";break;case"ATAN":c="atan("+d+") / pi() * 180";break;default:throw Error("Unknown math operator: "+b);}return[c,Blockly.PHP.ORDER_DIVISION]};Blockly.PHP.math_constant=function(a){var b={PI:["M_PI",Blockly.PHP.ORDER_ATOMIC],E:["M_E",Blockly.PHP.ORDER_ATOMIC],GOLDEN_RATIO:["(1 + sqrt(5)) / 2",Blockly.PHP.ORDER_DIVISION],SQRT2:["M_SQRT2",Blockly.PHP.ORDER_ATOMIC],SQRT1_2:["M_SQRT1_2",Blockly.PHP.ORDER_ATOMIC],INFINITY:["INF",Blockly.PHP.ORDER_ATOMIC]};return b[a.getFieldValue("CONSTANT")]};Blockly.PHP.math_number_property=function(a){var b=Blockly.PHP.valueToCode(a,"NUMBER_TO_CHECK",Blockly.PHP.ORDER_MODULUS)||"0",c=a.getFieldValue("PROPERTY"),d;if("PRIME"==c){var e=Blockly.PHP.provideFunction_("math_isPrime",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if ($n == 2 || $n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (!is_numeric($n) || $n <= 1 || $n % 1 != 0 || $n % 2 == 0 || $n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for ($x = 6; $x <= sqrt($n) + 1; $x += 6) {","    if ($n % ($x - 1) == 0 || $n % ($x + 1) == 0) {","      return false;","    }","  }","  return true;","}"]);d=e+"("+b+")";return[d,Blockly.PHP.ORDER_FUNCTION_CALL]}switch(c){case"EVEN":d=b+" % 2 == 0";break;case"ODD":d=b+" % 2 == 1";break;case"WHOLE":d="is_int("+b+")";break;case"POSITIVE":d=b+" > 0";break;case"NEGATIVE":d=b+" < 0";break;case"DIVISIBLE_BY":var f=Blockly.PHP.valueToCode(a,"DIVISOR",Blockly.PHP.ORDER_MODULUS)||"0";d=b+" % "+f+" == 0";break;}return[d,Blockly.PHP.ORDER_EQUALITY]};Blockly.PHP.math_change=function(a){var b=Blockly.PHP.valueToCode(a,"DELTA",Blockly.PHP.ORDER_ADDITION)||"0",c=Blockly.PHP.variableDB_.getName(a.getFieldValue("VAR"),Blockly.VARIABLE_CATEGORY_NAME);return c+" += "+b+";\n"};Blockly.PHP.math_round=Blockly.PHP.math_single;Blockly.PHP.math_trig=Blockly.PHP.math_single;Blockly.PHP.math_on_list=function(a){var b=a.getFieldValue("OP"),c,d;switch(b){case"SUM":c=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_FUNCTION_CALL)||"array()";d="array_sum("+c+")";break;case"MIN":c=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_FUNCTION_CALL)||"array()";d="min("+c+")";break;case"MAX":c=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_FUNCTION_CALL)||"array()";d="max("+c+")";break;case"AVERAGE":var e=Blockly.PHP.provideFunction_("math_mean",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($myList) {","  return array_sum($myList) / count($myList);","}"]);c=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_NONE)||"array()";d=e+"("+c+")";break;case"MEDIAN":var e=Blockly.PHP.provideFunction_("math_median",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($arr) {","  sort($arr,SORT_NUMERIC);","  return (count($arr) % 2) ? $arr[floor(count($arr)/2)] : ","      ($arr[floor(count($arr)/2)] + $arr[floor(count($arr)/2) - 1]) / 2;","}"]);c=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_NONE)||"[]";d=e+"("+c+")";break;case"MODE":var e=Blockly.PHP.provideFunction_("math_modes",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($values) {","  if (empty($values)) return array();","  $counts = array_count_values($values);","  arsort($counts); // Sort counts in descending order","  $modes = array_keys($counts, current($counts), true);","  return $modes;","}"]);c=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_NONE)||"[]";d=e+"("+c+")";break;case"STD_DEV":var e=Blockly.PHP.provideFunction_("math_standard_deviation",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($numbers) {","  $n = count($numbers);","  if (!$n) return null;","  $mean = array_sum($numbers) / count($numbers);","  foreach($numbers as $key => $num) $devs[$key] = pow($num - $mean, 2);","  return sqrt(array_sum($devs) / (count($devs) - 1));","}"]);c=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_NONE)||"[]";d=e+"("+c+")";break;case"RANDOM":var e=Blockly.PHP.provideFunction_("math_random_list",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($list) {","  $x = rand(0, count($list)-1);","  return $list[$x];","}"]);c=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_NONE)||"[]";d=e+"("+c+")";break;default:throw Error("Unknown operator: "+b);}return[d,Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.math_modulo=function(a){var b=Blockly.PHP.valueToCode(a,"DIVIDEND",Blockly.PHP.ORDER_MODULUS)||"0",c=Blockly.PHP.valueToCode(a,"DIVISOR",Blockly.PHP.ORDER_MODULUS)||"0";return[b+" % "+c,Blockly.PHP.ORDER_MODULUS]};Blockly.PHP.math_constrain=function(a){var b=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_COMMA)||"0",c=Blockly.PHP.valueToCode(a,"LOW",Blockly.PHP.ORDER_COMMA)||"0",d=Blockly.PHP.valueToCode(a,"HIGH",Blockly.PHP.ORDER_COMMA)||"Infinity";return["min(max("+b+", "+c+"), "+d+")",Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.math_random_int=function(a){var b=Blockly.PHP.valueToCode(a,"FROM",Blockly.PHP.ORDER_COMMA)||"0",c=Blockly.PHP.valueToCode(a,"TO",Blockly.PHP.ORDER_COMMA)||"0",d=Blockly.PHP.provideFunction_("math_random_int",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($a, $b) {","  if ($a > $b) {","    return rand($b, $a);","  }","  return rand($a, $b);","}"]);return[d+"("+b+", "+c+")",Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.math_random_float=function(){return["(float)rand()/(float)getrandmax()",Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.math_atan2=function(a){var b=Blockly.PHP.valueToCode(a,"X",Blockly.PHP.ORDER_COMMA)||"0",c=Blockly.PHP.valueToCode(a,"Y",Blockly.PHP.ORDER_COMMA)||"0";return["atan2("+c+", "+b+") / pi() * 180",Blockly.PHP.ORDER_DIVISION]};
//# sourceMappingURL=math.min.js.map
