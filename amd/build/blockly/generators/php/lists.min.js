'use strict';goog.provide("Blockly.PHP.lists");goog.require("Blockly.PHP");Blockly.PHP.lists_create_empty=function(){return["array()",Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.lists_create_with=function(a){for(var b=Array(a.itemCount_),c=0;c<a.itemCount_;c++){b[c]=Blockly.PHP.valueToCode(a,"ADD"+c,Blockly.PHP.ORDER_COMMA)||"null"}b="array("+b.join(", ")+")";return[b,Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.lists_repeat=function(a){var b=Blockly.PHP.provideFunction_("lists_repeat",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($value, $count) {","  $array = array();","  for ($index = 0; $index < $count; $index++) {","    $array[] = $value;","  }","  return $array;","}"]),c=Blockly.PHP.valueToCode(a,"ITEM",Blockly.PHP.ORDER_COMMA)||"null",d=Blockly.PHP.valueToCode(a,"NUM",Blockly.PHP.ORDER_COMMA)||"0";return[b+"("+c+", "+d+")",Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.lists_length=function(a){var b=Blockly.PHP.provideFunction_("length",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($value) {","  if (is_string($value)) {","    return strlen($value);","  } else {","    return count($value);","  }","}"]),c=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_NONE)||"''";return[b+"("+c+")",Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.lists_isEmpty=function(a){var b=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_FUNCTION_CALL)||"array()";return["empty("+b+")",Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.lists_indexOf=function(a){var b=Blockly.PHP.valueToCode(a,"FIND",Blockly.PHP.ORDER_NONE)||"''",c=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_MEMBER)||"[]";if(a.workspace.options.oneBasedIndex){var d=" 0",e=" + 1"}else{var d=" -1",e=""}if("FIRST"==a.getFieldValue("END")){var f=Blockly.PHP.provideFunction_("indexOf",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($haystack, $needle) {","  for ($index = 0; $index < count($haystack); $index++) {","    if ($haystack[$index] == $needle) return $index"+e+";","  }","  return "+d+";","}"])}else{var f=Blockly.PHP.provideFunction_("lastIndexOf",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($haystack, $needle) {","  $last = "+d+";","  for ($index = 0; $index < count($haystack); $index++) {","    if ($haystack[$index] == $needle) $last = $index"+e+";","  }","  return $last;","}"])}var g=f+"("+c+", "+b+")";return[g,Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.lists_getIndex=function(a){var b=a.getFieldValue("MODE")||"GET",c=a.getFieldValue("WHERE")||"FROM_START";switch(c){case"FIRST":if("GET"==b){var d=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_MEMBER)||"array()",e=d+"[0]";return[e,Blockly.PHP.ORDER_MEMBER]}else if("GET_REMOVE"==b){var d=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_NONE)||"array()",e="array_shift("+d+")";return[e,Blockly.PHP.ORDER_FUNCTION_CALL]}else if("REMOVE"==b){var d=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_NONE)||"array()";return"array_shift("+d+");\n"}break;case"LAST":if("GET"==b){var d=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_NONE)||"array()",e="end("+d+")";return[e,Blockly.PHP.ORDER_FUNCTION_CALL]}else if("GET_REMOVE"==b){var d=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_NONE)||"array()",e="array_pop("+d+")";return[e,Blockly.PHP.ORDER_FUNCTION_CALL]}else if("REMOVE"==b){var d=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_NONE)||"array()";return"array_pop("+d+");\n"}break;case"FROM_START":var f=Blockly.PHP.getAdjusted(a,"AT");if("GET"==b){var d=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_MEMBER)||"array()",e=d+"["+f+"]";return[e,Blockly.PHP.ORDER_MEMBER]}else if("GET_REMOVE"==b){var d=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_COMMA)||"array()",e="array_splice("+d+", "+f+", 1)[0]";return[e,Blockly.PHP.ORDER_FUNCTION_CALL]}else if("REMOVE"==b){var d=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_COMMA)||"array()";return"array_splice("+d+", "+f+", 1);\n"}break;case"FROM_END":if("GET"==b){var d=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_COMMA)||"array()",f=Blockly.PHP.getAdjusted(a,"AT",1,!0),e="array_slice("+d+", "+f+", 1)[0]";return[e,Blockly.PHP.ORDER_FUNCTION_CALL]}else if("GET_REMOVE"==b||"REMOVE"==b){var d=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_NONE)||"array()",f=Blockly.PHP.getAdjusted(a,"AT",1,!1,Blockly.PHP.ORDER_SUBTRACTION);e="array_splice("+d+", count("+d+") - "+f+", 1)[0]";if("GET_REMOVE"==b){return[e,Blockly.PHP.ORDER_FUNCTION_CALL]}else if("REMOVE"==b){return e+";\n"}}break;case"RANDOM":var d=Blockly.PHP.valueToCode(a,"VALUE",Blockly.PHP.ORDER_NONE)||"array()";if("GET"==b){var g=Blockly.PHP.provideFunction_("lists_get_random_item",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($list) {","  return $list[rand(0,count($list)-1)];","}"]);e=g+"("+d+")";return[e,Blockly.PHP.ORDER_FUNCTION_CALL]}else if("GET_REMOVE"==b){var g=Blockly.PHP.provideFunction_("lists_get_remove_random_item",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list) {","  $x = rand(0,count($list)-1);","  unset($list[$x]);","  return array_values($list);","}"]);e=g+"("+d+")";return[e,Blockly.PHP.ORDER_FUNCTION_CALL]}else if("REMOVE"==b){var g=Blockly.PHP.provideFunction_("lists_remove_random_item",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list) {","  unset($list[rand(0,count($list)-1)]);","}"]);return g+"("+d+");\n"}break;}throw Error("Unhandled combination (lists_getIndex).")};Blockly.PHP.lists_setIndex=function(a){var c=a.getFieldValue("MODE")||"GET",d=a.getFieldValue("WHERE")||"FROM_START",e=Blockly.PHP.valueToCode(a,"TO",Blockly.PHP.ORDER_ASSIGNMENT)||"null";function b(){if(f.match(/^\$\w+$/)){return""}var a=Blockly.PHP.variableDB_.getDistinctName("tmp_list",Blockly.VARIABLE_CATEGORY_NAME),b=a+" = &"+f+";\n";f=a;return b}switch(d){case"FIRST":if("SET"==c){var f=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_MEMBER)||"array()";return f+"[0] = "+e+";\n"}else if("INSERT"==c){var f=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_COMMA)||"array()";return"array_unshift("+f+", "+e+");\n"}break;case"LAST":var f=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_COMMA)||"array()";if("SET"==c){var g=Blockly.PHP.provideFunction_("lists_set_last_item",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list, $value) {","  $list[count($list) - 1] = $value;","}"]);return g+"("+f+", "+e+");\n"}else if("INSERT"==c){return"array_push("+f+", "+e+");\n"}break;case"FROM_START":var h=Blockly.PHP.getAdjusted(a,"AT");if("SET"==c){var f=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_MEMBER)||"array()";return f+"["+h+"] = "+e+";\n"}else if("INSERT"==c){var f=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_COMMA)||"array()";return"array_splice("+f+", "+h+", 0, "+e+");\n"}break;case"FROM_END":var f=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_COMMA)||"array()",h=Blockly.PHP.getAdjusted(a,"AT",1);if("SET"==c){var g=Blockly.PHP.provideFunction_("lists_set_from_end",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list, $at, $value) {","  $list[count($list) - $at] = $value;","}"]);return g+"("+f+", "+h+", "+e+");\n"}else if("INSERT"==c){var g=Blockly.PHP.provideFunction_("lists_insert_from_end",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list, $at, $value) {","  return array_splice($list, count($list) - $at, 0, $value);","}"]);return g+"("+f+", "+h+", "+e+");\n"}break;case"RANDOM":var f=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_REFERENCE)||"array()",i=b(),j=Blockly.PHP.variableDB_.getDistinctName("tmp_x",Blockly.VARIABLE_CATEGORY_NAME);i+=j+" = rand(0, count("+f+")-1);\n";if("SET"==c){i+=f+"["+j+"] = "+e+";\n";return i}else if("INSERT"==c){i+="array_splice("+f+", "+j+", 0, "+e+");\n";return i}break;}throw Error("Unhandled combination (lists_setIndex).")};Blockly.PHP.lists_getSublist=function(a){var b=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_COMMA)||"array()",c=a.getFieldValue("WHERE1"),d=a.getFieldValue("WHERE2");if("FIRST"==c&&"LAST"==d){var e=b}else if(b.match(/^\$\w+$/)||"FROM_END"!=c&&"FROM_START"==d){switch(c){case"FROM_START":var f=Blockly.PHP.getAdjusted(a,"AT1");break;case"FROM_END":var f=Blockly.PHP.getAdjusted(a,"AT1",1,!1,Blockly.PHP.ORDER_SUBTRACTION);f="count("+b+") - "+f;break;case"FIRST":var f="0";break;default:throw Error("Unhandled option (lists_getSublist).");}switch(d){case"FROM_START":var g=Blockly.PHP.getAdjusted(a,"AT2",0,!1,Blockly.PHP.ORDER_SUBTRACTION),h=g+" - ";if(Blockly.isNumber(f+"")||(f+"").match(/^\(.+\)$/)){h+=f}else{h+="("+f+")"}h+=" + 1";break;case"FROM_END":var g=Blockly.PHP.getAdjusted(a,"AT2",0,!1,Blockly.PHP.ORDER_SUBTRACTION),h="count("+b+") - "+g+" - ";if(Blockly.isNumber(f+"")||(f+"").match(/^\(.+\)$/)){h+=f}else{h+="("+f+")"}break;case"LAST":var h="count("+b+") - ";if(Blockly.isNumber(f+"")||(f+"").match(/^\(.+\)$/)){h+=f}else{h+="("+f+")"}break;default:throw Error("Unhandled option (lists_getSublist).");}e="array_slice("+b+", "+f+", "+h+")"}else{var f=Blockly.PHP.getAdjusted(a,"AT1"),g=Blockly.PHP.getAdjusted(a,"AT2"),i=Blockly.PHP.provideFunction_("lists_get_sublist",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($list, $where1, $at1, $where2, $at2) {","  if ($where1 == 'FROM_END') {","    $at1 = count($list) - 1 - $at1;","  } else if ($where1 == 'FIRST') {","    $at1 = 0;","  } else if ($where1 != 'FROM_START') {","    throw new Exception('Unhandled option (lists_get_sublist).');","  }","  $length = 0;","  if ($where2 == 'FROM_START') {","    $length = $at2 - $at1 + 1;","  } else if ($where2 == 'FROM_END') {","    $length = count($list) - $at1 - $at2;","  } else if ($where2 == 'LAST') {","    $length = count($list) - $at1;","  } else {","    throw new Exception('Unhandled option (lists_get_sublist).');","  }","  return array_slice($list, $at1, $length);","}"]),e=i+"("+b+", '"+c+"', "+f+", '"+d+"', "+g+")"}return[e,Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.lists_sort=function(a){var b=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_COMMA)||"array()",c="1"===a.getFieldValue("DIRECTION")?1:-1,d=a.getFieldValue("TYPE"),e=Blockly.PHP.provideFunction_("lists_sort",["function "+Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($list, $type, $direction) {","  $sortCmpFuncs = array(","    \"NUMERIC\" => \"strnatcasecmp\",","    \"TEXT\" => \"strcmp\",","    \"IGNORE_CASE\" => \"strcasecmp\"","  );","  $sortCmp = $sortCmpFuncs[$type];","  $list2 = $list;","  usort($list2, $sortCmp);","  if ($direction == -1) {","    $list2 = array_reverse($list2);","  }","  return $list2;","}"]);return[e+"("+b+", \""+d+"\", "+c+")",Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.lists_split=function(a){var b=Blockly.PHP.valueToCode(a,"INPUT",Blockly.PHP.ORDER_COMMA),c=Blockly.PHP.valueToCode(a,"DELIM",Blockly.PHP.ORDER_COMMA)||"''",d=a.getFieldValue("MODE");if("SPLIT"==d){if(!b){b="''"}var e="explode"}else if("JOIN"==d){if(!b){b="array()"}var e="implode"}else{throw Error("Unknown mode: "+d)}var f=e+"("+c+", "+b+")";return[f,Blockly.PHP.ORDER_FUNCTION_CALL]};Blockly.PHP.lists_reverse=function(a){var b=Blockly.PHP.valueToCode(a,"LIST",Blockly.PHP.ORDER_COMMA)||"[]";return["array_reverse("+b+")",Blockly.PHP.ORDER_FUNCTION_CALL]};
//# sourceMappingURL=lists.min.js.map
