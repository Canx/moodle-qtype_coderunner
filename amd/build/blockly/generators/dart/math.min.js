'use strict';goog.provide("Blockly.Dart.math");goog.require("Blockly.Dart");Blockly.Dart.addReservedWords("Math");Blockly.Dart.math_number=function(a){var b=+a.getFieldValue("NUM"),c;if(b==1/0){b="double.infinity";c=Blockly.Dart.ORDER_UNARY_POSTFIX}else if(b==-Infinity){b="-double.infinity";c=Blockly.Dart.ORDER_UNARY_PREFIX}else{c=0>b?Blockly.Dart.ORDER_UNARY_PREFIX:Blockly.Dart.ORDER_ATOMIC}return[b,c]};Blockly.Dart.math_arithmetic=function(a){var b={ADD:[" + ",Blockly.Dart.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Dart.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Dart.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Dart.ORDER_MULTIPLICATIVE],POWER:[null,Blockly.Dart.ORDER_NONE]},c=b[a.getFieldValue("OP")],d=c[0],e=c[1],f=Blockly.Dart.valueToCode(a,"A",e)||"0",g=Blockly.Dart.valueToCode(a,"B",e)||"0",h;if(!d){Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";h="Math.pow("+f+", "+g+")";return[h,Blockly.Dart.ORDER_UNARY_POSTFIX]}h=f+d+g;return[h,e]};Blockly.Dart.math_single=function(a){var b=a.getFieldValue("OP"),c,d;if("NEG"==b){d=Blockly.Dart.valueToCode(a,"NUM",Blockly.Dart.ORDER_UNARY_PREFIX)||"0";if("-"==d[0]){d=" "+d}c="-"+d;return[c,Blockly.Dart.ORDER_UNARY_PREFIX]}Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";if("ABS"==b||"ROUND"==b.substring(0,5)){d=Blockly.Dart.valueToCode(a,"NUM",Blockly.Dart.ORDER_UNARY_POSTFIX)||"0"}else if("SIN"==b||"COS"==b||"TAN"==b){d=Blockly.Dart.valueToCode(a,"NUM",Blockly.Dart.ORDER_MULTIPLICATIVE)||"0"}else{d=Blockly.Dart.valueToCode(a,"NUM",Blockly.Dart.ORDER_NONE)||"0"}switch(b){case"ABS":c=d+".abs()";break;case"ROOT":c="Math.sqrt("+d+")";break;case"LN":c="Math.log("+d+")";break;case"EXP":c="Math.exp("+d+")";break;case"POW10":c="Math.pow(10,"+d+")";break;case"ROUND":c=d+".round()";break;case"ROUNDUP":c=d+".ceil()";break;case"ROUNDDOWN":c=d+".floor()";break;case"SIN":c="Math.sin("+d+" / 180 * Math.pi)";break;case"COS":c="Math.cos("+d+" / 180 * Math.pi)";break;case"TAN":c="Math.tan("+d+" / 180 * Math.pi)";break;}if(c){return[c,Blockly.Dart.ORDER_UNARY_POSTFIX]}switch(b){case"LOG10":c="Math.log("+d+") / Math.log(10)";break;case"ASIN":c="Math.asin("+d+") / Math.pi * 180";break;case"ACOS":c="Math.acos("+d+") / Math.pi * 180";break;case"ATAN":c="Math.atan("+d+") / Math.pi * 180";break;default:throw Error("Unknown math operator: "+b);}return[c,Blockly.Dart.ORDER_MULTIPLICATIVE]};Blockly.Dart.math_constant=function(a){var b={PI:["Math.pi",Blockly.Dart.ORDER_UNARY_POSTFIX],E:["Math.e",Blockly.Dart.ORDER_UNARY_POSTFIX],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",Blockly.Dart.ORDER_MULTIPLICATIVE],SQRT2:["Math.sqrt2",Blockly.Dart.ORDER_UNARY_POSTFIX],SQRT1_2:["Math.sqrt1_2",Blockly.Dart.ORDER_UNARY_POSTFIX],INFINITY:["double.infinity",Blockly.Dart.ORDER_ATOMIC]},c=a.getFieldValue("CONSTANT");if("INFINITY"!=c){Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;"}return b[c]};Blockly.Dart.math_number_property=function(a){var b=Blockly.Dart.valueToCode(a,"NUMBER_TO_CHECK",Blockly.Dart.ORDER_MULTIPLICATIVE);if(!b){return["false",Blockly.Dart.ORDER_ATOMIC]}var c=a.getFieldValue("PROPERTY"),d;if("PRIME"==c){Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var e=Blockly.Dart.provideFunction_("math_isPrime",["bool "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is null, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (n == null || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"]);d=e+"("+b+")";return[d,Blockly.Dart.ORDER_UNARY_POSTFIX]}switch(c){case"EVEN":d=b+" % 2 == 0";break;case"ODD":d=b+" % 2 == 1";break;case"WHOLE":d=b+" % 1 == 0";break;case"POSITIVE":d=b+" > 0";break;case"NEGATIVE":d=b+" < 0";break;case"DIVISIBLE_BY":var f=Blockly.Dart.valueToCode(a,"DIVISOR",Blockly.Dart.ORDER_MULTIPLICATIVE);if(!f){return["false",Blockly.Dart.ORDER_ATOMIC]}d=b+" % "+f+" == 0";break;}return[d,Blockly.Dart.ORDER_EQUALITY]};Blockly.Dart.math_change=function(a){var b=Blockly.Dart.valueToCode(a,"DELTA",Blockly.Dart.ORDER_ADDITIVE)||"0",c=Blockly.Dart.variableDB_.getName(a.getFieldValue("VAR"),Blockly.VARIABLE_CATEGORY_NAME);return c+" = ("+c+" is num ? "+c+" : 0) + "+b+";\n"};Blockly.Dart.math_round=Blockly.Dart.math_single;Blockly.Dart.math_trig=Blockly.Dart.math_single;Blockly.Dart.math_on_list=function(a){var b=a.getFieldValue("OP"),c=Blockly.Dart.valueToCode(a,"LIST",Blockly.Dart.ORDER_NONE)||"[]",d;switch(b){case"SUM":var e=Blockly.Dart.provideFunction_("math_sum",["num "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List<num> myList) {","  num sumVal = 0;","  myList.forEach((num entry) {sumVal += entry;});","  return sumVal;","}"]);d=e+"("+c+")";break;case"MIN":Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var e=Blockly.Dart.provideFunction_("math_min",["num "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List<num> myList) {","  if (myList.isEmpty) return null;","  num minVal = myList[0];","  myList.forEach((num entry) {minVal = Math.min(minVal, entry);});","  return minVal;","}"]);d=e+"("+c+")";break;case"MAX":Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var e=Blockly.Dart.provideFunction_("math_max",["num "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List<num> myList) {","  if (myList.isEmpty) return null;","  num maxVal = myList[0];","  myList.forEach((num entry) {maxVal = Math.max(maxVal, entry);});","  return maxVal;","}"]);d=e+"("+c+")";break;case"AVERAGE":var e=Blockly.Dart.provideFunction_("math_mean",["num "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List myList) {","  // First filter list for numbers only.","  List localList = new List.from(myList);","  localList.removeWhere((a) => a is! num);","  if (localList.isEmpty) return null;","  num sumVal = 0;","  localList.forEach((var entry) {sumVal += entry;});","  return sumVal / localList.length;","}"]);d=e+"("+c+")";break;case"MEDIAN":var e=Blockly.Dart.provideFunction_("math_median",["num "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List myList) {","  // First filter list for numbers only, then sort, then return middle value","  // or the average of two middle values if list has an even number of elements.","  List localList = new List.from(myList);","  localList.removeWhere((a) => a is! num);","  if (localList.isEmpty) return null;","  localList.sort((a, b) => (a - b));","  int index = localList.length ~/ 2;","  if (localList.length % 2 == 1) {","    return localList[index];","  } else {","    return (localList[index - 1] + localList[index]) / 2;","  }","}"]);d=e+"("+c+")";break;case"MODE":Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var e=Blockly.Dart.provideFunction_("math_modes",["List "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List values) {","  List modes = [];","  List counts = [];","  int maxCount = 0;","  for (int i = 0; i < values.length; i++) {","    var value = values[i];","    bool found = false;","    int thisCount;","    for (int j = 0; j < counts.length; j++) {","      if (counts[j][0] == value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.add([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (int j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.add(counts[j][0]);","    }","  }","  return modes;","}"]);d=e+"("+c+")";break;case"STD_DEV":Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var e=Blockly.Dart.provideFunction_("math_standard_deviation",["num "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List myList) {","  // First filter list for numbers only.","  List numbers = new List.from(myList);","  numbers.removeWhere((a) => a is! num);","  if (numbers.isEmpty) return null;","  num n = numbers.length;","  num sum = 0;","  numbers.forEach((x) => sum += x);","  num mean = sum / n;","  num sumSquare = 0;","  numbers.forEach((x) => sumSquare += Math.pow(x - mean, 2));","  return Math.sqrt(sumSquare / n);","}"]);d=e+"("+c+")";break;case"RANDOM":Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var e=Blockly.Dart.provideFunction_("math_random_item",["dynamic "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List myList) {","  int x = new Math.Random().nextInt(myList.length);","  return myList[x];","}"]);d=e+"("+c+")";break;default:throw Error("Unknown operator: "+b);}return[d,Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.math_modulo=function(a){var b=Blockly.Dart.valueToCode(a,"DIVIDEND",Blockly.Dart.ORDER_MULTIPLICATIVE)||"0",c=Blockly.Dart.valueToCode(a,"DIVISOR",Blockly.Dart.ORDER_MULTIPLICATIVE)||"0";return[b+" % "+c,Blockly.Dart.ORDER_MULTIPLICATIVE]};Blockly.Dart.math_constrain=function(a){Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var b=Blockly.Dart.valueToCode(a,"VALUE",Blockly.Dart.ORDER_NONE)||"0",c=Blockly.Dart.valueToCode(a,"LOW",Blockly.Dart.ORDER_NONE)||"0",d=Blockly.Dart.valueToCode(a,"HIGH",Blockly.Dart.ORDER_NONE)||"double.infinity";return["Math.min(Math.max("+b+", "+c+"), "+d+")",Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.math_random_int=function(a){Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var b=Blockly.Dart.valueToCode(a,"FROM",Blockly.Dart.ORDER_NONE)||"0",c=Blockly.Dart.valueToCode(a,"TO",Blockly.Dart.ORDER_NONE)||"0",d=Blockly.Dart.provideFunction_("math_random_int",["int "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(num a, num b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    num c = a;","    a = b;","    b = c;","  }","  return new Math.Random().nextInt(b - a + 1) + a;","}"]);return[d+"("+b+", "+c+")",Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.math_random_float=function(){Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";return["new Math.Random().nextDouble()",Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.math_atan2=function(a){Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var b=Blockly.Dart.valueToCode(a,"X",Blockly.Dart.ORDER_NONE)||"0",c=Blockly.Dart.valueToCode(a,"Y",Blockly.Dart.ORDER_NONE)||"0";return["Math.atan2("+c+", "+b+") / Math.pi * 180",Blockly.Dart.ORDER_MULTIPLICATIVE]};
//# sourceMappingURL=math.min.js.map
