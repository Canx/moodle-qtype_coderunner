'use strict';goog.provide("Blockly.Dart.lists");goog.require("Blockly.Dart");Blockly.Dart.addReservedWords("Math");Blockly.Dart.lists_create_empty=function(){return["[]",Blockly.Dart.ORDER_ATOMIC]};Blockly.Dart.lists_create_with=function(a){for(var b=Array(a.itemCount_),c=0;c<a.itemCount_;c++){b[c]=Blockly.Dart.valueToCode(a,"ADD"+c,Blockly.Dart.ORDER_NONE)||"null"}var d="["+b.join(", ")+"]";return[d,Blockly.Dart.ORDER_ATOMIC]};Blockly.Dart.lists_repeat=function(a){var b=Blockly.Dart.valueToCode(a,"ITEM",Blockly.Dart.ORDER_NONE)||"null",c=Blockly.Dart.valueToCode(a,"NUM",Blockly.Dart.ORDER_NONE)||"0";return["new List.filled("+c+", "+b+")",Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.lists_length=function(a){var b=Blockly.Dart.valueToCode(a,"VALUE",Blockly.Dart.ORDER_UNARY_POSTFIX)||"[]";return[b+".length",Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.lists_isEmpty=function(a){var b=Blockly.Dart.valueToCode(a,"VALUE",Blockly.Dart.ORDER_UNARY_POSTFIX)||"[]";return[b+".isEmpty",Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.lists_indexOf=function(a){var b="FIRST"==a.getFieldValue("END")?"indexOf":"lastIndexOf",c=Blockly.Dart.valueToCode(a,"FIND",Blockly.Dart.ORDER_NONE)||"''",d=Blockly.Dart.valueToCode(a,"VALUE",Blockly.Dart.ORDER_UNARY_POSTFIX)||"[]",e=d+"."+b+"("+c+")";if(a.workspace.options.oneBasedIndex){return[e+" + 1",Blockly.Dart.ORDER_ADDITIVE]}return[e,Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.lists_getIndex=function(a){var c=a.getFieldValue("MODE")||"GET",d=a.getFieldValue("WHERE")||"FROM_START",e="RANDOM"==d||"FROM_END"==d?Blockly.Dart.ORDER_NONE:Blockly.Dart.ORDER_UNARY_POSTFIX,f=Blockly.Dart.valueToCode(a,"VALUE",e)||"[]";function b(){var a=Blockly.Dart.variableDB_.getDistinctName("tmp_list",Blockly.VARIABLE_CATEGORY_NAME),b="List "+a+" = "+f+";\n";f=a;return b}if(("RANDOM"==d&&"REMOVE"==c||"FROM_END"==d)&&!f.match(/^\w+$/)){if("RANDOM"==d){Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var g=b(),h=Blockly.Dart.variableDB_.getDistinctName("tmp_x",Blockly.VARIABLE_CATEGORY_NAME);g+="int "+h+" = new Math.Random().nextInt("+f+".length);\n";g+=f+".removeAt("+h+");\n";return g}else{if("REMOVE"==c){var i=Blockly.Dart.getAdjusted(a,"AT",1,!1,Blockly.Dart.ORDER_ADDITIVE),g=b();g+=f+".removeAt("+f+".length - "+i+");\n";return g}else if("GET"==c){var i=Blockly.Dart.getAdjusted(a,"AT",1),j=Blockly.Dart.provideFunction_("lists_get_from_end",["dynamic "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List my_list, num x) {","  x = my_list.length - x;","  return my_list[x];","}"]),g=j+"("+f+", "+i+")";return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]}else if("GET_REMOVE"==c){var i=Blockly.Dart.getAdjusted(a,"AT",1),j=Blockly.Dart.provideFunction_("lists_remove_from_end",["dynamic "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List my_list, num x) {","  x = my_list.length - x;","  return my_list.removeAt(x);","}"]),g=j+"("+f+", "+i+")";return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]}}}else{switch(d){case"FIRST":if("GET"==c){var g=f+".first";return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]}else if("GET_REMOVE"==c){var g=f+".removeAt(0)";return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]}else if("REMOVE"==c){return f+".removeAt(0);\n"}break;case"LAST":if("GET"==c){var g=f+".last";return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]}else if("GET_REMOVE"==c){var g=f+".removeLast()";return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]}else if("REMOVE"==c){return f+".removeLast();\n"}break;case"FROM_START":var i=Blockly.Dart.getAdjusted(a,"AT");if("GET"==c){var g=f+"["+i+"]";return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]}else if("GET_REMOVE"==c){var g=f+".removeAt("+i+")";return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]}else if("REMOVE"==c){return f+".removeAt("+i+");\n"}break;case"FROM_END":var i=Blockly.Dart.getAdjusted(a,"AT",1,!1,Blockly.Dart.ORDER_ADDITIVE);if("GET"==c){var g=f+"["+f+".length - "+i+"]";return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]}else if("GET_REMOVE"==c||"REMOVE"==c){var g=f+".removeAt("+f+".length - "+i+")";if("GET_REMOVE"==c){return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]}else if("REMOVE"==c){return g+";\n"}}break;case"RANDOM":Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";if("REMOVE"==c){var h=Blockly.Dart.variableDB_.getDistinctName("tmp_x",Blockly.VARIABLE_CATEGORY_NAME),g="int "+h+" = new Math.Random().nextInt("+f+".length);\n";g+=f+".removeAt("+h+");\n";return g}else if("GET"==c){var j=Blockly.Dart.provideFunction_("lists_get_random_item",["dynamic "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List my_list) {","  int x = new Math.Random().nextInt(my_list.length);","  return my_list[x];","}"]),g=j+"("+f+")";return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]}else if("GET_REMOVE"==c){var j=Blockly.Dart.provideFunction_("lists_remove_random_item",["dynamic "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List my_list) {","  int x = new Math.Random().nextInt(my_list.length);","  return my_list.removeAt(x);","}"]),g=j+"("+f+")";return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]}break;}}throw Error("Unhandled combination (lists_getIndex).")};Blockly.Dart.lists_setIndex=function(a){var c=a.getFieldValue("MODE")||"GET",d=a.getFieldValue("WHERE")||"FROM_START",e=Blockly.Dart.valueToCode(a,"LIST",Blockly.Dart.ORDER_UNARY_POSTFIX)||"[]",f=Blockly.Dart.valueToCode(a,"TO",Blockly.Dart.ORDER_ASSIGNMENT)||"null";function b(){if(e.match(/^\w+$/)){return""}var a=Blockly.Dart.variableDB_.getDistinctName("tmp_list",Blockly.VARIABLE_CATEGORY_NAME),b="List "+a+" = "+e+";\n";e=a;return b}switch(d){case"FIRST":if("SET"==c){return e+"[0] = "+f+";\n"}else if("INSERT"==c){return e+".insert(0, "+f+");\n"}break;case"LAST":if("SET"==c){var g=b();g+=e+"["+e+".length - 1] = "+f+";\n";return g}else if("INSERT"==c){return e+".add("+f+");\n"}break;case"FROM_START":var h=Blockly.Dart.getAdjusted(a,"AT");if("SET"==c){return e+"["+h+"] = "+f+";\n"}else if("INSERT"==c){return e+".insert("+h+", "+f+");\n"}break;case"FROM_END":var h=Blockly.Dart.getAdjusted(a,"AT",1,!1,Blockly.Dart.ORDER_ADDITIVE),g=b();if("SET"==c){g+=e+"["+e+".length - "+h+"] = "+f+";\n";return g}else if("INSERT"==c){g+=e+".insert("+e+".length - "+h+", "+f+");\n";return g}break;case"RANDOM":Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var g=b(),i=Blockly.Dart.variableDB_.getDistinctName("tmp_x",Blockly.VARIABLE_CATEGORY_NAME);g+="int "+i+" = new Math.Random().nextInt("+e+".length);\n";if("SET"==c){g+=e+"["+i+"] = "+f+";\n";return g}else if("INSERT"==c){g+=e+".insert("+i+", "+f+");\n";return g}break;}throw Error("Unhandled combination (lists_setIndex).")};Blockly.Dart.lists_getSublist=function(a){var b=Blockly.Dart.valueToCode(a,"LIST",Blockly.Dart.ORDER_UNARY_POSTFIX)||"[]",c=a.getFieldValue("WHERE1"),d=a.getFieldValue("WHERE2");if(b.match(/^\w+$/)||"FROM_END"!=c&&"FROM_START"==d){switch(c){case"FROM_START":var e=Blockly.Dart.getAdjusted(a,"AT1");break;case"FROM_END":var e=Blockly.Dart.getAdjusted(a,"AT1",1,!1,Blockly.Dart.ORDER_ADDITIVE);e=b+".length - "+e;break;case"FIRST":var e="0";break;default:throw Error("Unhandled option (lists_getSublist).");}switch(d){case"FROM_START":var f=Blockly.Dart.getAdjusted(a,"AT2",1);break;case"FROM_END":var f=Blockly.Dart.getAdjusted(a,"AT2",0,!1,Blockly.Dart.ORDER_ADDITIVE);f=b+".length - "+f;break;case"LAST":break;default:throw Error("Unhandled option (lists_getSublist).");}if("LAST"==d){var g=b+".sublist("+e+")"}else{var g=b+".sublist("+e+", "+f+")"}}else{var e=Blockly.Dart.getAdjusted(a,"AT1"),f=Blockly.Dart.getAdjusted(a,"AT2"),h=Blockly.Dart.provideFunction_("lists_get_sublist",["List "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List list, String where1, num at1, String where2, num at2) {","  int getAt(String where, num at) {","    if (where == 'FROM_END') {","      at = list.length - 1 - at;","    } else if (where == 'FIRST') {","      at = 0;","    } else if (where == 'LAST') {","      at = list.length - 1;","    } else if (where != 'FROM_START') {","      throw 'Unhandled option (lists_getSublist).';","    }","    return at;","  }","  at1 = getAt(where1, at1);","  at2 = getAt(where2, at2) + 1;","  return list.sublist(at1, at2);","}"]),g=h+"("+b+", '"+c+"', "+e+", '"+d+"', "+f+")"}return[g,Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.lists_sort=function(a){var b=Blockly.Dart.valueToCode(a,"LIST",Blockly.Dart.ORDER_NONE)||"[]",c="1"===a.getFieldValue("DIRECTION")?1:-1,d=a.getFieldValue("TYPE"),e=Blockly.Dart.provideFunction_("lists_sort",["List "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List list, String type, int direction) {","  var compareFuncs = {","    \"NUMERIC\": (a, b) => (direction * a.compareTo(b)).toInt(),","    \"TEXT\": (a, b) => direction * a.toString().compareTo(b.toString()),","    \"IGNORE_CASE\": ","       (a, b) => direction * ","      a.toString().toLowerCase().compareTo(b.toString().toLowerCase())","  };","  list = new List.from(list);","  var compare = compareFuncs[type];","  list.sort(compare);","  return list;","}"]);return[e+"("+b+", \""+d+"\", "+c+")",Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.lists_split=function(a){var b=Blockly.Dart.valueToCode(a,"INPUT",Blockly.Dart.ORDER_UNARY_POSTFIX),c=Blockly.Dart.valueToCode(a,"DELIM",Blockly.Dart.ORDER_NONE)||"''",d=a.getFieldValue("MODE");if("SPLIT"==d){if(!b){b="''"}var e="split"}else if("JOIN"==d){if(!b){b="[]"}var e="join"}else{throw Error("Unknown mode: "+d)}var f=b+"."+e+"("+c+")";return[f,Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.lists_reverse=function(a){var b=Blockly.Dart.valueToCode(a,"LIST",Blockly.Dart.ORDER_NONE)||"[]";return["new List.from("+b+".reversed)",Blockly.Dart.ORDER_UNARY_POSTFIX]};
//# sourceMappingURL=lists.min.js.map
