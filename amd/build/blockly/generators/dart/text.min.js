'use strict';goog.provide("Blockly.Dart.texts");goog.require("Blockly.Dart");Blockly.Dart.addReservedWords("Html,Math");Blockly.Dart.text=function(a){var b=Blockly.Dart.quote_(a.getFieldValue("TEXT"));return[b,Blockly.Dart.ORDER_ATOMIC]};Blockly.Dart.text_multiline=function(a){var b=Blockly.Dart.multiline_quote_(a.getFieldValue("TEXT"));return[b,Blockly.Dart.ORDER_ATOMIC]};Blockly.Dart.text_join=function(a){switch(a.itemCount_){case 0:return["''",Blockly.Dart.ORDER_ATOMIC];case 1:var b=Blockly.Dart.valueToCode(a,"ADD0",Blockly.Dart.ORDER_UNARY_POSTFIX)||"''",c=b+".toString()";return[c,Blockly.Dart.ORDER_UNARY_POSTFIX];default:for(var d=Array(a.itemCount_),e=0;e<a.itemCount_;e++){d[e]=Blockly.Dart.valueToCode(a,"ADD"+e,Blockly.Dart.ORDER_NONE)||"''"}var c="["+d.join(",")+"].join()";return[c,Blockly.Dart.ORDER_UNARY_POSTFIX];}};Blockly.Dart.text_append=function(a){var b=Blockly.Dart.variableDB_.getName(a.getFieldValue("VAR"),Blockly.VARIABLE_CATEGORY_NAME),c=Blockly.Dart.valueToCode(a,"TEXT",Blockly.Dart.ORDER_NONE)||"''";return b+" = ["+b+", "+c+"].join();\n"};Blockly.Dart.text_length=function(a){var b=Blockly.Dart.valueToCode(a,"VALUE",Blockly.Dart.ORDER_UNARY_POSTFIX)||"''";return[b+".length",Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.text_isEmpty=function(a){var b=Blockly.Dart.valueToCode(a,"VALUE",Blockly.Dart.ORDER_UNARY_POSTFIX)||"''";return[b+".isEmpty",Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.text_indexOf=function(a){var b="FIRST"==a.getFieldValue("END")?"indexOf":"lastIndexOf",c=Blockly.Dart.valueToCode(a,"FIND",Blockly.Dart.ORDER_NONE)||"''",d=Blockly.Dart.valueToCode(a,"VALUE",Blockly.Dart.ORDER_UNARY_POSTFIX)||"''",e=d+"."+b+"("+c+")";if(a.workspace.options.oneBasedIndex){return[e+" + 1",Blockly.Dart.ORDER_ADDITIVE]}return[e,Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.text_charAt=function(a){var b=a.getFieldValue("WHERE")||"FROM_START",c=Blockly.Dart.valueToCode(a,"VALUE",Blockly.Dart.ORDER_UNARY_POSTFIX)||"''";switch(b){case"FIRST":var d=c+"[0]";return[d,Blockly.Dart.ORDER_UNARY_POSTFIX];case"FROM_START":var e=Blockly.Dart.getAdjusted(a,"AT"),d=c+"["+e+"]";return[d,Blockly.Dart.ORDER_UNARY_POSTFIX];case"LAST":e=1;case"FROM_END":var e=Blockly.Dart.getAdjusted(a,"AT",1),f=Blockly.Dart.provideFunction_("text_get_from_end",["String "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String text, num x) {","  return text[text.length - x];","}"]);d=f+"("+c+", "+e+")";return[d,Blockly.Dart.ORDER_UNARY_POSTFIX];case"RANDOM":Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var f=Blockly.Dart.provideFunction_("text_random_letter",["String "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String text) {","  int x = new Math.Random().nextInt(text.length);","  return text[x];","}"]);d=f+"("+c+")";return[d,Blockly.Dart.ORDER_UNARY_POSTFIX];}throw Error("Unhandled option (text_charAt).")};Blockly.Dart.text_getSubstring=function(a){var b=Blockly.Dart.valueToCode(a,"STRING",Blockly.Dart.ORDER_UNARY_POSTFIX)||"''",c=a.getFieldValue("WHERE1"),d=a.getFieldValue("WHERE2");if("FIRST"==c&&"LAST"==d){var e=b}else if(b.match(/^'?\w+'?$/)||"FROM_END"!=c&&"FROM_START"==d){switch(c){case"FROM_START":var f=Blockly.Dart.getAdjusted(a,"AT1");break;case"FROM_END":var f=Blockly.Dart.getAdjusted(a,"AT1",1,!1,Blockly.Dart.ORDER_ADDITIVE);f=b+".length - "+f;break;case"FIRST":var f="0";break;default:throw Error("Unhandled option (text_getSubstring).");}switch(d){case"FROM_START":var g=Blockly.Dart.getAdjusted(a,"AT2",1);break;case"FROM_END":var g=Blockly.Dart.getAdjusted(a,"AT2",0,!1,Blockly.Dart.ORDER_ADDITIVE);g=b+".length - "+g;break;case"LAST":break;default:throw Error("Unhandled option (text_getSubstring).");}if("LAST"==d){var e=b+".substring("+f+")"}else{var e=b+".substring("+f+", "+g+")"}}else{var f=Blockly.Dart.getAdjusted(a,"AT1"),g=Blockly.Dart.getAdjusted(a,"AT2"),h=Blockly.Dart.provideFunction_("text_get_substring",["String "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String text, String where1, num at1, String where2, num at2) {","  int getAt(String where, num at) {","    if (where == 'FROM_END') {","      at = text.length - 1 - at;","    } else if (where == 'FIRST') {","      at = 0;","    } else if (where == 'LAST') {","      at = text.length - 1;","    } else if (where != 'FROM_START') {","      throw 'Unhandled option (text_getSubstring).';","    }","    return at;","  }","  at1 = getAt(where1, at1);","  at2 = getAt(where2, at2) + 1;","  return text.substring(at1, at2);","}"]),e=h+"("+b+", '"+c+"', "+f+", '"+d+"', "+g+")"}return[e,Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.text_changeCase=function(a){var b={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[a.getFieldValue("CASE")],c=b?Blockly.Dart.ORDER_UNARY_POSTFIX:Blockly.Dart.ORDER_NONE,d=Blockly.Dart.valueToCode(a,"TEXT",c)||"''";if(b){var e=d+b}else{var f=Blockly.Dart.provideFunction_("text_toTitleCase",["String "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String str) {","  RegExp exp = new RegExp(r'\\b');","  List<String> list = str.split(exp);","  final title = new StringBuffer();","  for (String part in list) {","    if (part.length > 0) {","      title.write(part[0].toUpperCase());","      if (part.length > 0) {","        title.write(part.substring(1).toLowerCase());","      }","    }","  }","  return title.toString();","}"]),e=f+"("+d+")"}return[e,Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.text_trim=function(a){var b={LEFT:".replaceFirst(new RegExp(r'^\\s+'), '')",RIGHT:".replaceFirst(new RegExp(r'\\s+$'), '')",BOTH:".trim()"}[a.getFieldValue("MODE")],c=Blockly.Dart.valueToCode(a,"TEXT",Blockly.Dart.ORDER_UNARY_POSTFIX)||"''";return[c+b,Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.text_print=function(a){var b=Blockly.Dart.valueToCode(a,"TEXT",Blockly.Dart.ORDER_NONE)||"''";return"print("+b+");\n"};Blockly.Dart.text_prompt_ext=function(a){Blockly.Dart.definitions_.import_dart_html="import 'dart:html' as Html;";if(a.getField("TEXT")){var b=Blockly.Dart.quote_(a.getFieldValue("TEXT"))}else{var b=Blockly.Dart.valueToCode(a,"TEXT",Blockly.Dart.ORDER_NONE)||"''"}var c="Html.window.prompt("+b+", '')",d="NUMBER"==a.getFieldValue("TYPE");if(d){Blockly.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";c="Math.parseDouble("+c+")"}return[c,Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.text_prompt=Blockly.Dart.text_prompt_ext;Blockly.Dart.text_count=function(a){var b=Blockly.Dart.valueToCode(a,"TEXT",Blockly.Dart.ORDER_UNARY_POSTFIX)||"''",c=Blockly.Dart.valueToCode(a,"SUB",Blockly.Dart.ORDER_NONE)||"''",d=Blockly.Dart.provideFunction_("text_count",["int "+Blockly.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String haystack, String needle) {","  if (needle.length == 0) {","    return haystack.length + 1;","  }","  int index = 0;","  int count = 0;","  while (index != -1) {","    index = haystack.indexOf(needle, index);","    if (index != -1) {","      count++;","     index += needle.length;","    }","  }","  return count;","}"]);return[d+"("+b+", "+c+")",Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.text_replace=function(a){var b=Blockly.Dart.valueToCode(a,"TEXT",Blockly.Dart.ORDER_UNARY_POSTFIX)||"''",c=Blockly.Dart.valueToCode(a,"FROM",Blockly.Dart.ORDER_NONE)||"''",d=Blockly.Dart.valueToCode(a,"TO",Blockly.Dart.ORDER_NONE)||"''";return[b+".replaceAll("+c+", "+d+")",Blockly.Dart.ORDER_UNARY_POSTFIX]};Blockly.Dart.text_reverse=function(a){var b=Blockly.Dart.valueToCode(a,"TEXT",Blockly.Dart.ORDER_UNARY_POSTFIX)||"''";return["new String.fromCharCodes("+b+".runes.toList().reversed)",Blockly.Dart.ORDER_UNARY_POSTFIX]};
//# sourceMappingURL=text.min.js.map
