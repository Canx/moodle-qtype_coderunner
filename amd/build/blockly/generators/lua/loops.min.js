'use strict';goog.provide("Blockly.Lua.loops");goog.require("Blockly.Lua");Blockly.Lua.CONTINUE_STATEMENT="goto continue\n";Blockly.Lua.addContinueLabel_=function(a){if(-1!=a.indexOf(Blockly.Lua.CONTINUE_STATEMENT)){return a+Blockly.Lua.INDENT+"::continue::\n"}else{return a}};Blockly.Lua.controls_repeat_ext=function(a){if(a.getField("TIMES")){var b=+a.getFieldValue("TIMES")+""}else{var b=Blockly.Lua.valueToCode(a,"TIMES",Blockly.Lua.ORDER_NONE)||"0"}if(Blockly.isNumber(b)){b=parseInt(b,10)}else{b="math.floor("+b+")"}var c=Blockly.Lua.statementToCode(a,"DO");c=Blockly.Lua.addLoopTrap(c,a);c=Blockly.Lua.addContinueLabel_(c);var d=Blockly.Lua.variableDB_.getDistinctName("count",Blockly.VARIABLE_CATEGORY_NAME),e="for "+d+" = 1, "+b+" do\n"+c+"end\n";return e};Blockly.Lua.controls_repeat=Blockly.Lua.controls_repeat_ext;Blockly.Lua.controls_whileUntil=function(a){var b="UNTIL"==a.getFieldValue("MODE"),c=Blockly.Lua.valueToCode(a,"BOOL",b?Blockly.Lua.ORDER_UNARY:Blockly.Lua.ORDER_NONE)||"false",d=Blockly.Lua.statementToCode(a,"DO");d=Blockly.Lua.addLoopTrap(d,a);d=Blockly.Lua.addContinueLabel_(d);if(b){c="not "+c}return"while "+c+" do\n"+d+"end\n"};Blockly.Lua.controls_for=function(a){var b=Blockly.Lua.variableDB_.getName(a.getFieldValue("VAR"),Blockly.VARIABLE_CATEGORY_NAME),c=Blockly.Lua.valueToCode(a,"FROM",Blockly.Lua.ORDER_NONE)||"0",d=Blockly.Lua.valueToCode(a,"TO",Blockly.Lua.ORDER_NONE)||"0",e=Blockly.Lua.valueToCode(a,"BY",Blockly.Lua.ORDER_NONE)||"1",f=Blockly.Lua.statementToCode(a,"DO");f=Blockly.Lua.addLoopTrap(f,a);f=Blockly.Lua.addContinueLabel_(f);var g="",h;if(Blockly.isNumber(c)&&Blockly.isNumber(d)&&Blockly.isNumber(e)){var i=Math.abs(+e);h=(+c<=+d?"":"-")+i}else{g="";h=Blockly.Lua.variableDB_.getDistinctName(b+"_inc",Blockly.VARIABLE_CATEGORY_NAME);g+=h+" = ";if(Blockly.isNumber(e)){g+=Math.abs(e)+"\n"}else{g+="math.abs("+e+")\n"}g+="if ("+c+") > ("+d+") then\n";g+=Blockly.Lua.INDENT+h+" = -"+h+"\n";g+="end\n"}g+="for "+b+" = "+c+", "+d+", "+h;g+=" do\n"+f+"end\n";return g};Blockly.Lua.controls_forEach=function(a){var b=Blockly.Lua.variableDB_.getName(a.getFieldValue("VAR"),Blockly.VARIABLE_CATEGORY_NAME),c=Blockly.Lua.valueToCode(a,"LIST",Blockly.Lua.ORDER_NONE)||"{}",d=Blockly.Lua.statementToCode(a,"DO");d=Blockly.Lua.addLoopTrap(d,a);d=Blockly.Lua.addContinueLabel_(d);var e="for _, "+b+" in ipairs("+c+") do \n"+d+"end\n";return e};Blockly.Lua.controls_flow_statements=function(a){var b="";if(Blockly.Lua.STATEMENT_PREFIX){b+=Blockly.Lua.injectId(Blockly.Lua.STATEMENT_PREFIX,a)}if(Blockly.Lua.STATEMENT_SUFFIX){b+=Blockly.Lua.injectId(Blockly.Lua.STATEMENT_SUFFIX,a)}if(Blockly.Lua.STATEMENT_PREFIX){var c=Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(a);if(c&&!c.suppressPrefixSuffix){b+=Blockly.Lua.injectId(Blockly.Lua.STATEMENT_PREFIX,c)}}switch(a.getFieldValue("FLOW")){case"BREAK":return b+"break\n";case"CONTINUE":return b+Blockly.Lua.CONTINUE_STATEMENT;}throw Error("Unknown flow statement.")};
//# sourceMappingURL=loops.min.js.map
