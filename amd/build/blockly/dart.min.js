function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a,b){if("function"==typeof define&&define.amd){define ("qtype_coderunner/blockly/dart",["./core"],b)}else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))){module.exports=b(require("./core"))}else{a.Blockly.Dart=b(a.Blockly)}})(this,function(i){'use strict';i.Dart=new i.Generator("Dart");i.Dart.addReservedWords("assert,break,case,catch,class,const,continue,default,do,else,enum,extends,false,final,finally,for,if,in,is,new,null,rethrow,return,super,switch,this,throw,true,try,var,void,while,with,print,identityHashCode,identical,BidirectionalIterator,Comparable,double,Function,int,Invocation,Iterable,Iterator,List,Map,Match,num,Pattern,RegExp,Set,StackTrace,String,StringSink,Type,bool,DateTime,Deprecated,Duration,Expando,Null,Object,RuneIterator,Runes,Stopwatch,StringBuffer,Symbol,Uri,Comparator,AbstractClassInstantiationError,ArgumentError,AssertionError,CastError,ConcurrentModificationError,CyclicInitializationError,Error,Exception,FallThroughError,FormatException,IntegerDivisionByZeroException,NoSuchMethodError,NullThrownError,OutOfMemoryError,RangeError,StackOverflowError,StateError,TypeError,UnimplementedError,UnsupportedError");i.Dart.ORDER_ATOMIC=0;i.Dart.ORDER_UNARY_POSTFIX=1;i.Dart.ORDER_UNARY_PREFIX=2;i.Dart.ORDER_MULTIPLICATIVE=3;i.Dart.ORDER_ADDITIVE=4;i.Dart.ORDER_SHIFT=5;i.Dart.ORDER_BITWISE_AND=6;i.Dart.ORDER_BITWISE_XOR=7;i.Dart.ORDER_BITWISE_OR=8;i.Dart.ORDER_RELATIONAL=9;i.Dart.ORDER_EQUALITY=10;i.Dart.ORDER_LOGICAL_AND=11;i.Dart.ORDER_LOGICAL_OR=12;i.Dart.ORDER_IF_NULL=13;i.Dart.ORDER_CONDITIONAL=14;i.Dart.ORDER_CASCADE=15;i.Dart.ORDER_ASSIGNMENT=16;i.Dart.ORDER_NONE=99;i.Dart.init=function(e){i.Dart.definitions_=Object.create(null);i.Dart.functionNames_=Object.create(null);i.Dart.variableDB_?i.Dart.variableDB_.reset():i.Dart.variableDB_=new i.Names(i.Dart.RESERVED_WORDS_);i.Dart.variableDB_.setVariableMap(e.getVariableMap());for(var f=[],b=i.Variables.allDeveloperVariables(e),c=0;c<b.length;c++){f.push(i.Dart.variableDB_.getName(b[c],i.Names.DEVELOPER_VARIABLE_TYPE))}e=i.Variables.allUsedVarModels(e);for(c=0;c<e.length;c++){f.push(i.Dart.variableDB_.getName(e[c].getId(),i.VARIABLE_CATEGORY_NAME))}f.length&&(i.Dart.definitions_.variables="var "+f.join(", ")+";")};i.Dart.finish=function(f){f&&(f=i.Dart.prefixLines(f,i.Dart.INDENT));f="main() {\n"+f+"}";var g=[],b=[],c;for(c in i.Dart.definitions_){var h=i.Dart.definitions_[c];h.match(/^import\s/)?g.push(h):b.push(h)}delete i.Dart.definitions_;delete i.Dart.functionNames_;i.Dart.variableDB_.reset();return(g.join("\n")+"\n\n"+b.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+f};i.Dart.scrubNakedValue=function(b){return b+";\n"};i.Dart.quote_=function(b){b=b.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/\$/g,"\\$").replace(/'/g,"\\'");return"'"+b+"'"};i.Dart.multiline_quote_=function(b){b=b.replace(/'''/g,"\\'\\'\\'");return"'''"+b+"'''"};i.Dart.scrub_=function(g,h,b){var j="";if(!g.outputConnection||!g.outputConnection.targetConnection){var k=g.getCommentText();k&&(k=i.utils.string.wrap(k,i.Dart.COMMENT_WRAP-3),j=g.getProcedureDef?j+i.Dart.prefixLines(k+"\n","/// "):j+i.Dart.prefixLines(k+"\n","// "));for(var l=0;l<g.inputList.length;l++){g.inputList[l].type==i.INPUT_VALUE&&(k=g.inputList[l].connection.targetBlock())&&(k=i.Dart.allNestedComments(k))&&(j+=i.Dart.prefixLines(k,"// "))}}g=g.nextConnection&&g.nextConnection.targetBlock();b=b?"":i.Dart.blockToCode(g);return j+h+b};i.Dart.getAdjusted=function(h,j,b,k,d){b=b||0;d=d||i.Dart.ORDER_NONE;h.workspace.options.oneBasedIndex&&b--;var l=h.workspace.options.oneBasedIndex?"1":"0";h=b?i.Dart.valueToCode(h,j,i.Dart.ORDER_ADDITIVE)||l:k?i.Dart.valueToCode(h,j,i.Dart.ORDER_UNARY_PREFIX)||l:i.Dart.valueToCode(h,j,d)||l;if(i.isNumber(h))h=parseInt(h,10)+b,k&&(h=-h);else{if(0<b){h=h+" + "+b;var f=i.Dart.ORDER_ADDITIVE}else 0>b&&(h=h+" - "+-b,f=i.Dart.ORDER_ADDITIVE);k&&(h=b?"-("+h+")":"-"+h,f=i.Dart.ORDER_UNARY_PREFIX);f=Math.floor(f);d=Math.floor(d);f&&d>=f&&(h="("+h+")")}return h};i.Dart.colour={};i.Dart.addReservedWords("Math");i.Dart.colour_picker=function(b){return[i.Dart.quote_(b.getFieldValue("COLOUR")),i.Dart.ORDER_ATOMIC]};i.Dart.colour_random=function(){i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";return[i.Dart.provideFunction_("colour_random",["String "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"() {","  String hex = '0123456789abcdef';","  var rnd = new Math.Random();","  return '#${hex[rnd.nextInt(16)]}${hex[rnd.nextInt(16)]}'","      '${hex[rnd.nextInt(16)]}${hex[rnd.nextInt(16)]}'","      '${hex[rnd.nextInt(16)]}${hex[rnd.nextInt(16)]}';","}"])+"()",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.colour_rgb=function(d){var e=i.Dart.valueToCode(d,"RED",i.Dart.ORDER_NONE)||0,b=i.Dart.valueToCode(d,"GREEN",i.Dart.ORDER_NONE)||0;d=i.Dart.valueToCode(d,"BLUE",i.Dart.ORDER_NONE)||0;i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";return[i.Dart.provideFunction_("colour_rgb",["String "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(num r, num g, num b) {","  num rn = (Math.max(Math.min(r, 100), 0) * 2.55).round();","  String rs = rn.toInt().toRadixString(16);","  rs = '0$rs';","  rs = rs.substring(rs.length - 2);","  num gn = (Math.max(Math.min(g, 100), 0) * 2.55).round();","  String gs = gn.toInt().toRadixString(16);","  gs = '0$gs';","  gs = gs.substring(gs.length - 2);","  num bn = (Math.max(Math.min(b, 100), 0) * 2.55).round();","  String bs = bn.toInt().toRadixString(16);","  bs = '0$bs';","  bs = bs.substring(bs.length - 2);","  return '#$rs$gs$bs';","}"])+"("+e+", "+b+", "+d+")",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.colour_blend=function(d){var e=i.Dart.valueToCode(d,"COLOUR1",i.Dart.ORDER_NONE)||"'#000000'",b=i.Dart.valueToCode(d,"COLOUR2",i.Dart.ORDER_NONE)||"'#000000'";d=i.Dart.valueToCode(d,"RATIO",i.Dart.ORDER_NONE)||.5;i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";return[i.Dart.provideFunction_("colour_blend",["String "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String c1, String c2, num ratio) {","  ratio = Math.max(Math.min(ratio, 1), 0);","  int r1 = int.parse('0x${c1.substring(1, 3)}');","  int g1 = int.parse('0x${c1.substring(3, 5)}');","  int b1 = int.parse('0x${c1.substring(5, 7)}');","  int r2 = int.parse('0x${c2.substring(1, 3)}');","  int g2 = int.parse('0x${c2.substring(3, 5)}');","  int b2 = int.parse('0x${c2.substring(5, 7)}');","  num rn = (r1 * (1 - ratio) + r2 * ratio).round();","  String rs = rn.toInt().toRadixString(16);","  num gn = (g1 * (1 - ratio) + g2 * ratio).round();","  String gs = gn.toInt().toRadixString(16);","  num bn = (b1 * (1 - ratio) + b2 * ratio).round();","  String bs = bn.toInt().toRadixString(16);","  rs = '0$rs';","  rs = rs.substring(rs.length - 2);","  gs = '0$gs';","  gs = gs.substring(gs.length - 2);","  bs = '0$bs';","  bs = bs.substring(bs.length - 2);","  return '#$rs$gs$bs';","}"])+"("+e+", "+b+", "+d+")",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.lists={};i.Dart.addReservedWords("Math");i.Dart.lists_create_empty=function(){return["[]",i.Dart.ORDER_ATOMIC]};i.Dart.lists_create_with=function(d){for(var a=Array(d.itemCount_),b=0;b<d.itemCount_;b++){a[b]=i.Dart.valueToCode(d,"ADD"+b,i.Dart.ORDER_NONE)||"null"}return["["+a.join(", ")+"]",i.Dart.ORDER_ATOMIC]};i.Dart.lists_repeat=function(c){var a=i.Dart.valueToCode(c,"ITEM",i.Dart.ORDER_NONE)||"null";return["new List.filled("+(i.Dart.valueToCode(c,"NUM",i.Dart.ORDER_NONE)||"0")+", "+a+")",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.lists_length=function(b){return[(i.Dart.valueToCode(b,"VALUE",i.Dart.ORDER_UNARY_POSTFIX)||"[]")+".length",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.lists_isEmpty=function(b){return[(i.Dart.valueToCode(b,"VALUE",i.Dart.ORDER_UNARY_POSTFIX)||"[]")+".isEmpty",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.lists_indexOf=function(d){var a="FIRST"==d.getFieldValue("END")?"indexOf":"lastIndexOf",e=i.Dart.valueToCode(d,"FIND",i.Dart.ORDER_NONE)||"''";a=(i.Dart.valueToCode(d,"VALUE",i.Dart.ORDER_UNARY_POSTFIX)||"[]")+"."+a+"("+e+")";return d.workspace.options.oneBasedIndex?[a+" + 1",i.Dart.ORDER_ADDITIVE]:[a,i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.lists_getIndex=function(f){function g(){var c=i.Dart.variableDB_.getDistinctName("tmp_list",i.VARIABLE_CATEGORY_NAME),a="List "+c+" = "+j+";\n";j=c;return a}var b=f.getFieldValue("MODE")||"GET",h=f.getFieldValue("WHERE")||"FROM_START",j=i.Dart.valueToCode(f,"VALUE","RANDOM"==h||"FROM_END"==h?i.Dart.ORDER_NONE:i.Dart.ORDER_UNARY_POSTFIX)||"[]";if(("RANDOM"!=h||"REMOVE"!=b)&&"FROM_END"!=h||j.match(/^\w+$/))switch(h){case"FIRST":if("GET"==b)return[j+".first",i.Dart.ORDER_UNARY_POSTFIX];if("GET_REMOVE"==b)return[j+".removeAt(0)",i.Dart.ORDER_UNARY_POSTFIX];if("REMOVE"==b)return j+".removeAt(0);\n";break;case"LAST":if("GET"==b)return[j+".last",i.Dart.ORDER_UNARY_POSTFIX];if("GET_REMOVE"==b)return[j+".removeLast()",i.Dart.ORDER_UNARY_POSTFIX];if("REMOVE"==b)return j+".removeLast();\n";break;case"FROM_START":h=i.Dart.getAdjusted(f,"AT");if("GET"==b)return[j+"["+h+"]",i.Dart.ORDER_UNARY_POSTFIX];if("GET_REMOVE"==b)return[j+".removeAt("+h+")",i.Dart.ORDER_UNARY_POSTFIX];if("REMOVE"==b)return j+".removeAt("+h+");\n";break;case"FROM_END":h=i.Dart.getAdjusted(f,"AT",1,!1,i.Dart.ORDER_ADDITIVE);if("GET"==b)return[j+"["+j+".length - "+h+"]",i.Dart.ORDER_UNARY_POSTFIX];if("GET_REMOVE"==b||"REMOVE"==b){f=j+".removeAt("+j+".length - "+h+")";if("GET_REMOVE"==b)return[f,i.Dart.ORDER_UNARY_POSTFIX];if("REMOVE"==b)return f+";\n"}break;case"RANDOM":i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";if("REMOVE"==b)return b=i.Dart.variableDB_.getDistinctName("tmp_x",i.VARIABLE_CATEGORY_NAME),"int "+b+" = new Math.Random().nextInt("+j+".length);\n"+(j+".removeAt("+b+");\n");if("GET"==b)return b=i.Dart.provideFunction_("lists_get_random_item",["dynamic "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List my_list) {","  int x = new Math.Random().nextInt(my_list.length);","  return my_list[x];","}"]),[b+"("+j+")",i.Dart.ORDER_UNARY_POSTFIX];if("GET_REMOVE"==b)return b=i.Dart.provideFunction_("lists_remove_random_item",["dynamic "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List my_list) {","  int x = new Math.Random().nextInt(my_list.length);","  return my_list.removeAt(x);","}"]),[b+"("+j+")",i.Dart.ORDER_UNARY_POSTFIX];}else{if("RANDOM"==h)return i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",f=g(),b=i.Dart.variableDB_.getDistinctName("tmp_x",i.VARIABLE_CATEGORY_NAME),f+("int "+b+" = new Math.Random().nextInt("+j+".length);\n")+(j+".removeAt("+b+");\n");if("REMOVE"==b)return h=i.Dart.getAdjusted(f,"AT",1,!1,i.Dart.ORDER_ADDITIVE),f=g(),f+=j+".removeAt("+j+".length - "+h+");\n";if("GET"==b)return h=i.Dart.getAdjusted(f,"AT",1),b=i.Dart.provideFunction_("lists_get_from_end",["dynamic "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List my_list, num x) {","  x = my_list.length - x;","  return my_list[x];","}"]),[b+"("+j+", "+h+")",i.Dart.ORDER_UNARY_POSTFIX];if("GET_REMOVE"==b)return h=i.Dart.getAdjusted(f,"AT",1),b=i.Dart.provideFunction_("lists_remove_from_end",["dynamic "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List my_list, num x) {","  x = my_list.length - x;","  return my_list.removeAt(x);","}"]),[b+"("+j+", "+h+")",i.Dart.ORDER_UNARY_POSTFIX]}throw Error("Unhandled combination (lists_getIndex).")};i.Dart.lists_setIndex=function(g){function h(){if(j.match(/^\w+$/))return"";var c=i.Dart.variableDB_.getDistinctName("tmp_list",i.VARIABLE_CATEGORY_NAME),a="List "+c+" = "+j+";\n";j=c;return a}var b=g.getFieldValue("MODE")||"GET",c=g.getFieldValue("WHERE")||"FROM_START",j=i.Dart.valueToCode(g,"LIST",i.Dart.ORDER_UNARY_POSTFIX)||"[]",k=i.Dart.valueToCode(g,"TO",i.Dart.ORDER_ASSIGNMENT)||"null";switch(c){case"FIRST":if("SET"==b)return j+"[0] = "+k+";\n";if("INSERT"==b)return j+".insert(0, "+k+");\n";break;case"LAST":if("SET"==b)return g=h(),g+(j+"["+j+".length - 1] = "+k+";\n");if("INSERT"==b)return j+".add("+k+");\n";break;case"FROM_START":c=i.Dart.getAdjusted(g,"AT");if("SET"==b)return j+"["+c+"] = "+k+";\n";if("INSERT"==b)return j+".insert("+c+", "+k+");\n";break;case"FROM_END":c=i.Dart.getAdjusted(g,"AT",1,!1,i.Dart.ORDER_ADDITIVE);g=h();if("SET"==b)return g+(j+"["+j+".length - "+c+"] = "+k+";\n");if("INSERT"==b)return g+(j+".insert("+j+".length - "+c+", "+k+");\n");break;case"RANDOM":i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";g=h();c=i.Dart.variableDB_.getDistinctName("tmp_x",i.VARIABLE_CATEGORY_NAME);g+="int "+c+" = new Math.Random().nextInt("+j+".length);\n";if("SET"==b)return g+(j+"["+c+"] = "+k+";\n");if("INSERT"==b)return g+(j+".insert("+c+", "+k+");\n");}throw Error("Unhandled combination (lists_setIndex).")};i.Dart.lists_getSublist=function(g){var h=i.Dart.valueToCode(g,"LIST",i.Dart.ORDER_UNARY_POSTFIX)||"[]",b=g.getFieldValue("WHERE1"),c=g.getFieldValue("WHERE2");if(h.match(/^\w+$/)||"FROM_END"!=b&&"FROM_START"==c){switch(b){case"FROM_START":var d=i.Dart.getAdjusted(g,"AT1");break;case"FROM_END":d=i.Dart.getAdjusted(g,"AT1",1,!1,i.Dart.ORDER_ADDITIVE);d=h+".length - "+d;break;case"FIRST":d="0";break;default:throw Error("Unhandled option (lists_getSublist).");}switch(c){case"FROM_START":var j=i.Dart.getAdjusted(g,"AT2",1);break;case"FROM_END":j=i.Dart.getAdjusted(g,"AT2",0,!1,i.Dart.ORDER_ADDITIVE);j=h+".length - "+j;break;case"LAST":break;default:throw Error("Unhandled option (lists_getSublist).");}g="LAST"==c?h+".sublist("+d+")":h+".sublist("+d+", "+j+")"}else d=i.Dart.getAdjusted(g,"AT1"),j=i.Dart.getAdjusted(g,"AT2"),g=i.Dart.provideFunction_("lists_get_sublist",["List "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List list, String where1, num at1, String where2, num at2) {","  int getAt(String where, num at) {","    if (where == 'FROM_END') {","      at = list.length - 1 - at;","    } else if (where == 'FIRST') {","      at = 0;","    } else if (where == 'LAST') {","      at = list.length - 1;","    } else if (where != 'FROM_START') {","      throw 'Unhandled option (lists_getSublist).';","    }","    return at;","  }","  at1 = getAt(where1, at1);","  at2 = getAt(where2, at2) + 1;","  return list.sublist(at1, at2);","}"])+"("+h+", '"+b+"', "+d+", '"+c+"', "+j+")";return[g,i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.lists_sort=function(d){var e=i.Dart.valueToCode(d,"LIST",i.Dart.ORDER_NONE)||"[]",b="1"===d.getFieldValue("DIRECTION")?1:-1;d=d.getFieldValue("TYPE");return[i.Dart.provideFunction_("lists_sort",["List "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List list, String type, int direction) {","  var compareFuncs = {","    \"NUMERIC\": (a, b) => (direction * a.compareTo(b)).toInt(),","    \"TEXT\": (a, b) => direction * a.toString().compareTo(b.toString()),","    \"IGNORE_CASE\": ","       (a, b) => direction * ","      a.toString().toLowerCase().compareTo(b.toString().toLowerCase())","  };","  list = new List.from(list);","  var compare = compareFuncs[type];","  list.sort(compare);","  return list;","}"])+"("+e+", \""+d+"\", "+b+")",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.lists_split=function(d){var e=i.Dart.valueToCode(d,"INPUT",i.Dart.ORDER_UNARY_POSTFIX),f=i.Dart.valueToCode(d,"DELIM",i.Dart.ORDER_NONE)||"''";d=d.getFieldValue("MODE");if("SPLIT"==d)e||(e="''"),d="split";else if("JOIN"==d)e||(e="[]"),d="join";else throw Error("Unknown mode: "+d);return[e+"."+d+"("+f+")",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.lists_reverse=function(b){return["new List.from("+(i.Dart.valueToCode(b,"LIST",i.Dart.ORDER_NONE)||"[]")+".reversed)",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.logic={};i.Dart.controls_if=function(f){var a=0,g="";i.Dart.STATEMENT_PREFIX&&(g+=i.Dart.injectId(i.Dart.STATEMENT_PREFIX,f));do{var h=i.Dart.valueToCode(f,"IF"+a,i.Dart.ORDER_NONE)||"false",d=i.Dart.statementToCode(f,"DO"+a);i.Dart.STATEMENT_SUFFIX&&(d=i.Dart.prefixLines(i.Dart.injectId(i.Dart.STATEMENT_SUFFIX,f),i.Dart.INDENT)+d);g+=(0<a?"else ":"")+"if ("+h+") {\n"+d+"}";++a}while(f.getInput("IF"+a));if(f.getInput("ELSE")||i.Dart.STATEMENT_SUFFIX)d=i.Dart.statementToCode(f,"ELSE"),i.Dart.STATEMENT_SUFFIX&&(d=i.Dart.prefixLines(i.Dart.injectId(i.Dart.STATEMENT_SUFFIX,f),i.Dart.INDENT)+d),g+=" else {\n"+d+"}";return g+"\n"};i.Dart.controls_ifelse=i.Dart.controls_if;i.Dart.logic_compare=function(e){var f={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],b="=="==f||"!="==f?i.Dart.ORDER_EQUALITY:i.Dart.ORDER_RELATIONAL,c=i.Dart.valueToCode(e,"A",b)||"0";e=i.Dart.valueToCode(e,"B",b)||"0";return[c+" "+f+" "+e,b]};i.Dart.logic_operation=function(f){var g="AND"==f.getFieldValue("OP")?"&&":"||",b="&&"==g?i.Dart.ORDER_LOGICAL_AND:i.Dart.ORDER_LOGICAL_OR,c=i.Dart.valueToCode(f,"A",b);f=i.Dart.valueToCode(f,"B",b);if(c||f){var h="&&"==g?"true":"false";c||(c=h);f||(f=h)}else f=c="false";return[c+" "+g+" "+f,b]};i.Dart.logic_negate=function(c){var a=i.Dart.ORDER_UNARY_PREFIX;return["!"+(i.Dart.valueToCode(c,"BOOL",a)||"true"),a]};i.Dart.logic_boolean=function(b){return["TRUE"==b.getFieldValue("BOOL")?"true":"false",i.Dart.ORDER_ATOMIC]};i.Dart.logic_null=function(){return["null",i.Dart.ORDER_ATOMIC]};i.Dart.logic_ternary=function(d){var e=i.Dart.valueToCode(d,"IF",i.Dart.ORDER_CONDITIONAL)||"false",b=i.Dart.valueToCode(d,"THEN",i.Dart.ORDER_CONDITIONAL)||"null";d=i.Dart.valueToCode(d,"ELSE",i.Dart.ORDER_CONDITIONAL)||"null";return[e+" ? "+b+" : "+d,i.Dart.ORDER_CONDITIONAL]};i.Dart.loops={};i.Dart.controls_repeat_ext=function(f){var g=f.getField("TIMES")?+f.getFieldValue("TIMES")+"":i.Dart.valueToCode(f,"TIMES",i.Dart.ORDER_ASSIGNMENT)||"0",b=i.Dart.statementToCode(f,"DO");b=i.Dart.addLoopTrap(b,f);f="";var h=i.Dart.variableDB_.getDistinctName("count",i.VARIABLE_CATEGORY_NAME),d=g;g.match(/^\w+$/)||i.isNumber(g)||(d=i.Dart.variableDB_.getDistinctName("repeat_end",i.VARIABLE_CATEGORY_NAME),f+="var "+d+" = "+g+";\n");return f+("for (int "+h+" = 0; "+h+" < "+d+"; "+h+"++) {\n"+b+"}\n")};i.Dart.controls_repeat=i.Dart.controls_repeat_ext;i.Dart.controls_whileUntil=function(e){var a="UNTIL"==e.getFieldValue("MODE"),b=i.Dart.valueToCode(e,"BOOL",a?i.Dart.ORDER_UNARY_PREFIX:i.Dart.ORDER_NONE)||"false",f=i.Dart.statementToCode(e,"DO");f=i.Dart.addLoopTrap(f,e);a&&(b="!"+b);return"while ("+b+") {\n"+f+"}\n"};i.Dart.controls_for=function(h){var j=i.Dart.variableDB_.getName(h.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME),k=i.Dart.valueToCode(h,"FROM",i.Dart.ORDER_ASSIGNMENT)||"0",l=i.Dart.valueToCode(h,"TO",i.Dart.ORDER_ASSIGNMENT)||"0",m=i.Dart.valueToCode(h,"BY",i.Dart.ORDER_ASSIGNMENT)||"1",e=i.Dart.statementToCode(h,"DO");e=i.Dart.addLoopTrap(e,h);if(i.isNumber(k)&&i.isNumber(l)&&i.isNumber(m)){var n=+k<=+l;h="for ("+j+" = "+k+"; "+j+(n?" <= ":" >= ")+l+"; "+j;j=Math.abs(+m);h=(1==j?h+(n?"++":"--"):h+((n?" += ":" -= ")+j))+(") {\n"+e+"}\n")}else h="",n=k,k.match(/^\w+$/)||i.isNumber(k)||(n=i.Dart.variableDB_.getDistinctName(j+"_start",i.VARIABLE_CATEGORY_NAME),h+="var "+n+" = "+k+";\n"),k=l,l.match(/^\w+$/)||i.isNumber(l)||(k=i.Dart.variableDB_.getDistinctName(j+"_end",i.VARIABLE_CATEGORY_NAME),h+="var "+k+" = "+l+";\n"),l=i.Dart.variableDB_.getDistinctName(j+"_inc",i.VARIABLE_CATEGORY_NAME),h+="num "+l+" = ",h=i.isNumber(m)?h+(Math.abs(m)+";\n"):h+("("+m+").abs();\n"),h=h+("if ("+n+" > "+k+") {\n")+(i.Dart.INDENT+l+" = -"+l+";\n"),h+="}\n",h+="for ("+j+" = "+n+"; "+l+" >= 0 ? "+j+" <= "+k+" : "+j+" >= "+k+"; "+j+" += "+l+") {\n"+e+"}\n";return h};i.Dart.controls_forEach=function(e){var a=i.Dart.variableDB_.getName(e.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME),b=i.Dart.valueToCode(e,"LIST",i.Dart.ORDER_ASSIGNMENT)||"[]",c=i.Dart.statementToCode(e,"DO");c=i.Dart.addLoopTrap(c,e);return"for (var "+a+" in "+b+") {\n"+c+"}\n"};i.Dart.controls_flow_statements=function(d){var a="";i.Dart.STATEMENT_PREFIX&&(a+=i.Dart.injectId(i.Dart.STATEMENT_PREFIX,d));i.Dart.STATEMENT_SUFFIX&&(a+=i.Dart.injectId(i.Dart.STATEMENT_SUFFIX,d));if(i.Dart.STATEMENT_PREFIX){var e=i.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(d);e&&!e.suppressPrefixSuffix&&(a+=i.Dart.injectId(i.Dart.STATEMENT_PREFIX,e))}switch(d.getFieldValue("FLOW")){case"BREAK":return a+"break;\n";case"CONTINUE":return a+"continue;\n";}throw Error("Unknown flow statement.")};i.Dart.math={};i.Dart.addReservedWords("Math");i.Dart.math_number=function(c){c=+c.getFieldValue("NUM");if(1/0==c){c="double.infinity";var d=i.Dart.ORDER_UNARY_POSTFIX}else-Infinity==c?(c="-double.infinity",d=i.Dart.ORDER_UNARY_PREFIX):d=0>c?i.Dart.ORDER_UNARY_PREFIX:i.Dart.ORDER_ATOMIC;return[c,d]};i.Dart.math_arithmetic=function(e){var f={ADD:[" + ",i.Dart.ORDER_ADDITIVE],MINUS:[" - ",i.Dart.ORDER_ADDITIVE],MULTIPLY:[" * ",i.Dart.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",i.Dart.ORDER_MULTIPLICATIVE],POWER:[null,i.Dart.ORDER_NONE]}[e.getFieldValue("OP")],g=f[0];f=f[1];var c=i.Dart.valueToCode(e,"A",f)||"0";e=i.Dart.valueToCode(e,"B",f)||"0";return g?[c+g+e,f]:(i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",["Math.pow("+c+", "+e+")",i.Dart.ORDER_UNARY_POSTFIX])};i.Dart.math_single=function(d){var e=d.getFieldValue("OP");if("NEG"==e)return d=i.Dart.valueToCode(d,"NUM",i.Dart.ORDER_UNARY_PREFIX)||"0","-"==d[0]&&(d=" "+d),["-"+d,i.Dart.ORDER_UNARY_PREFIX];i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";d="ABS"==e||"ROUND"==e.substring(0,5)?i.Dart.valueToCode(d,"NUM",i.Dart.ORDER_UNARY_POSTFIX)||"0":"SIN"==e||"COS"==e||"TAN"==e?i.Dart.valueToCode(d,"NUM",i.Dart.ORDER_MULTIPLICATIVE)||"0":i.Dart.valueToCode(d,"NUM",i.Dart.ORDER_NONE)||"0";switch(e){case"ABS":var b=d+".abs()";break;case"ROOT":b="Math.sqrt("+d+")";break;case"LN":b="Math.log("+d+")";break;case"EXP":b="Math.exp("+d+")";break;case"POW10":b="Math.pow(10,"+d+")";break;case"ROUND":b=d+".round()";break;case"ROUNDUP":b=d+".ceil()";break;case"ROUNDDOWN":b=d+".floor()";break;case"SIN":b="Math.sin("+d+" / 180 * Math.pi)";break;case"COS":b="Math.cos("+d+" / 180 * Math.pi)";break;case"TAN":b="Math.tan("+d+" / 180 * Math.pi)";}if(b)return[b,i.Dart.ORDER_UNARY_POSTFIX];switch(e){case"LOG10":b="Math.log("+d+") / Math.log(10)";break;case"ASIN":b="Math.asin("+d+") / Math.pi * 180";break;case"ACOS":b="Math.acos("+d+") / Math.pi * 180";break;case"ATAN":b="Math.atan("+d+") / Math.pi * 180";break;default:throw Error("Unknown math operator: "+e);}return[b,i.Dart.ORDER_MULTIPLICATIVE]};i.Dart.math_constant=function(c){var d={PI:["Math.pi",i.Dart.ORDER_UNARY_POSTFIX],E:["Math.e",i.Dart.ORDER_UNARY_POSTFIX],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",i.Dart.ORDER_MULTIPLICATIVE],SQRT2:["Math.sqrt2",i.Dart.ORDER_UNARY_POSTFIX],SQRT1_2:["Math.sqrt1_2",i.Dart.ORDER_UNARY_POSTFIX],INFINITY:["double.infinity",i.Dart.ORDER_ATOMIC]};c=c.getFieldValue("CONSTANT");"INFINITY"!=c&&(i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;");return d[c]};i.Dart.math_number_property=function(e){var f=i.Dart.valueToCode(e,"NUMBER_TO_CHECK",i.Dart.ORDER_MULTIPLICATIVE);if(!f)return["false",i.Dart.ORDER_ATOMIC];var b=e.getFieldValue("PROPERTY");if("PRIME"==b)return i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",[i.Dart.provideFunction_("math_isPrime",["bool "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is null, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (n == null || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+f+")",i.Dart.ORDER_UNARY_POSTFIX];switch(b){case"EVEN":var c=f+" % 2 == 0";break;case"ODD":c=f+" % 2 == 1";break;case"WHOLE":c=f+" % 1 == 0";break;case"POSITIVE":c=f+" > 0";break;case"NEGATIVE":c=f+" < 0";break;case"DIVISIBLE_BY":e=i.Dart.valueToCode(e,"DIVISOR",i.Dart.ORDER_MULTIPLICATIVE);if(!e)return["false",i.Dart.ORDER_ATOMIC];c=f+" % "+e+" == 0";}return[c,i.Dart.ORDER_EQUALITY]};i.Dart.math_change=function(c){var d=i.Dart.valueToCode(c,"DELTA",i.Dart.ORDER_ADDITIVE)||"0";c=i.Dart.variableDB_.getName(c.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME);return c+" = ("+c+" is num ? "+c+" : 0) + "+d+";\n"};i.Dart.math_round=i.Dart.math_single;i.Dart.math_trig=i.Dart.math_single;i.Dart.math_on_list=function(c){var d=c.getFieldValue("OP");c=i.Dart.valueToCode(c,"LIST",i.Dart.ORDER_NONE)||"[]";switch(d){case"SUM":d=i.Dart.provideFunction_("math_sum",["num "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List<num> myList) {","  num sumVal = 0;","  myList.forEach((num entry) {sumVal += entry;});","  return sumVal;","}"]);d=d+"("+c+")";break;case"MIN":i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";d=i.Dart.provideFunction_("math_min",["num "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List<num> myList) {","  if (myList.isEmpty) return null;","  num minVal = myList[0];","  myList.forEach((num entry) {minVal = Math.min(minVal, entry);});","  return minVal;","}"]);d=d+"("+c+")";break;case"MAX":i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";d=i.Dart.provideFunction_("math_max",["num "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List<num> myList) {","  if (myList.isEmpty) return null;","  num maxVal = myList[0];","  myList.forEach((num entry) {maxVal = Math.max(maxVal, entry);});","  return maxVal;","}"]);d=d+"("+c+")";break;case"AVERAGE":d=i.Dart.provideFunction_("math_mean",["num "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List myList) {","  // First filter list for numbers only.","  List localList = new List.from(myList);","  localList.removeWhere((a) => a is! num);","  if (localList.isEmpty) return null;","  num sumVal = 0;","  localList.forEach((var entry) {sumVal += entry;});","  return sumVal / localList.length;","}"]);d=d+"("+c+")";break;case"MEDIAN":d=i.Dart.provideFunction_("math_median",["num "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List myList) {","  // First filter list for numbers only, then sort, then return middle value","  // or the average of two middle values if list has an even number of elements.","  List localList = new List.from(myList);","  localList.removeWhere((a) => a is! num);","  if (localList.isEmpty) return null;","  localList.sort((a, b) => (a - b));","  int index = localList.length ~/ 2;","  if (localList.length % 2 == 1) {","    return localList[index];","  } else {","    return (localList[index - 1] + localList[index]) / 2;","  }","}"]);d=d+"("+c+")";break;case"MODE":i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";d=i.Dart.provideFunction_("math_modes",["List "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List values) {","  List modes = [];","  List counts = [];","  int maxCount = 0;","  for (int i = 0; i < values.length; i++) {","    var value = values[i];","    bool found = false;","    int thisCount;","    for (int j = 0; j < counts.length; j++) {","      if (counts[j][0] == value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.add([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (int j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.add(counts[j][0]);","    }","  }","  return modes;","}"]);d=d+"("+c+")";break;case"STD_DEV":i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";d=i.Dart.provideFunction_("math_standard_deviation",["num "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List myList) {","  // First filter list for numbers only.","  List numbers = new List.from(myList);","  numbers.removeWhere((a) => a is! num);","  if (numbers.isEmpty) return null;","  num n = numbers.length;","  num sum = 0;","  numbers.forEach((x) => sum += x);","  num mean = sum / n;","  num sumSquare = 0;","  numbers.forEach((x) => sumSquare += Math.pow(x - mean, 2));","  return Math.sqrt(sumSquare / n);","}"]);d=d+"("+c+")";break;case"RANDOM":i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";d=i.Dart.provideFunction_("math_random_item",["dynamic "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List myList) {","  int x = new Math.Random().nextInt(myList.length);","  return myList[x];","}"]);d=d+"("+c+")";break;default:throw Error("Unknown operator: "+d);}return[d,i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.math_modulo=function(c){var d=i.Dart.valueToCode(c,"DIVIDEND",i.Dart.ORDER_MULTIPLICATIVE)||"0";c=i.Dart.valueToCode(c,"DIVISOR",i.Dart.ORDER_MULTIPLICATIVE)||"0";return[d+" % "+c,i.Dart.ORDER_MULTIPLICATIVE]};i.Dart.math_constrain=function(d){i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var e=i.Dart.valueToCode(d,"VALUE",i.Dart.ORDER_NONE)||"0",b=i.Dart.valueToCode(d,"LOW",i.Dart.ORDER_NONE)||"0";d=i.Dart.valueToCode(d,"HIGH",i.Dart.ORDER_NONE)||"double.infinity";return["Math.min(Math.max("+e+", "+b+"), "+d+")",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.math_random_int=function(c){i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var d=i.Dart.valueToCode(c,"FROM",i.Dart.ORDER_NONE)||"0";c=i.Dart.valueToCode(c,"TO",i.Dart.ORDER_NONE)||"0";return[i.Dart.provideFunction_("math_random_int",["int "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(num a, num b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    num c = a;","    a = b;","    b = c;","  }","  return new Math.Random().nextInt(b - a + 1) + a;","}"])+"("+d+", "+c+")",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.math_random_float=function(){i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";return["new Math.Random().nextDouble()",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.math_atan2=function(c){i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var a=i.Dart.valueToCode(c,"X",i.Dart.ORDER_NONE)||"0";return["Math.atan2("+(i.Dart.valueToCode(c,"Y",i.Dart.ORDER_NONE)||"0")+", "+a+") / Math.pi * 180",i.Dart.ORDER_MULTIPLICATIVE]};i.Dart.procedures={};i.Dart.procedures_defreturn=function(j){var a=i.Dart.variableDB_.getName(j.getFieldValue("NAME"),i.PROCEDURE_CATEGORY_NAME),b="";i.Dart.STATEMENT_PREFIX&&(b+=i.Dart.injectId(i.Dart.STATEMENT_PREFIX,j));i.Dart.STATEMENT_SUFFIX&&(b+=i.Dart.injectId(i.Dart.STATEMENT_SUFFIX,j));b&&(b=i.Dart.prefixLines(b,i.Dart.INDENT));var m="";i.Dart.INFINITE_LOOP_TRAP&&(m=i.Dart.prefixLines(i.Dart.injectId(i.Dart.INFINITE_LOOP_TRAP,j),i.Dart.INDENT));var n=i.Dart.statementToCode(j,"STACK"),e=i.Dart.valueToCode(j,"RETURN",i.Dart.ORDER_NONE)||"",o="";n&&e&&(o=b);e&&(e=i.Dart.INDENT+"return "+e+";\n");for(var p=e?"dynamic":"void",l=[],k=0;k<j.arguments_.length;k++){l[k]=i.Dart.variableDB_.getName(j.arguments_[k],i.VARIABLE_CATEGORY_NAME)}b=p+" "+a+"("+l.join(", ")+") {\n"+b+m+n+o+e+"}";b=i.Dart.scrub_(j,b);i.Dart.definitions_["%"+a]=b;return null};i.Dart.procedures_defnoreturn=i.Dart.procedures_defreturn;i.Dart.procedures_callreturn=function(e){for(var a=i.Dart.variableDB_.getName(e.getFieldValue("NAME"),i.PROCEDURE_CATEGORY_NAME),b=[],c=0;c<e.arguments_.length;c++){b[c]=i.Dart.valueToCode(e,"ARG"+c,i.Dart.ORDER_NONE)||"null"}return[a+"("+b.join(", ")+")",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.procedures_callnoreturn=function(b){return i.Dart.procedures_callreturn(b)[0]+";\n"};i.Dart.procedures_ifreturn=function(c){var d="if ("+(i.Dart.valueToCode(c,"CONDITION",i.Dart.ORDER_NONE)||"false")+") {\n";i.Dart.STATEMENT_SUFFIX&&(d+=i.Dart.prefixLines(i.Dart.injectId(i.Dart.STATEMENT_SUFFIX,c),i.Dart.INDENT));c.hasReturnValue_?(c=i.Dart.valueToCode(c,"VALUE",i.Dart.ORDER_NONE)||"null",d+=i.Dart.INDENT+"return "+c+";\n"):d+=i.Dart.INDENT+"return;\n";return d+"}\n"};i.Dart.texts={};i.Dart.addReservedWords("Html,Math");i.Dart.text=function(b){return[i.Dart.quote_(b.getFieldValue("TEXT")),i.Dart.ORDER_ATOMIC]};i.Dart.text_multiline=function(b){return[i.Dart.multiline_quote_(b.getFieldValue("TEXT")),i.Dart.ORDER_ATOMIC]};i.Dart.text_join=function(d){switch(d.itemCount_){case 0:return["''",i.Dart.ORDER_ATOMIC];case 1:return[(i.Dart.valueToCode(d,"ADD0",i.Dart.ORDER_UNARY_POSTFIX)||"''")+".toString()",i.Dart.ORDER_UNARY_POSTFIX];default:for(var e=Array(d.itemCount_),b=0;b<d.itemCount_;b++){e[b]=i.Dart.valueToCode(d,"ADD"+b,i.Dart.ORDER_NONE)||"''"}d="["+e.join(",")+"].join()";return[d,i.Dart.ORDER_UNARY_POSTFIX];}};i.Dart.text_append=function(c){var d=i.Dart.variableDB_.getName(c.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME);c=i.Dart.valueToCode(c,"TEXT",i.Dart.ORDER_NONE)||"''";return d+" = ["+d+", "+c+"].join();\n"};i.Dart.text_length=function(b){return[(i.Dart.valueToCode(b,"VALUE",i.Dart.ORDER_UNARY_POSTFIX)||"''")+".length",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.text_isEmpty=function(b){return[(i.Dart.valueToCode(b,"VALUE",i.Dart.ORDER_UNARY_POSTFIX)||"''")+".isEmpty",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.text_indexOf=function(d){var a="FIRST"==d.getFieldValue("END")?"indexOf":"lastIndexOf",e=i.Dart.valueToCode(d,"FIND",i.Dart.ORDER_NONE)||"''";a=(i.Dart.valueToCode(d,"VALUE",i.Dart.ORDER_UNARY_POSTFIX)||"''")+"."+a+"("+e+")";return d.workspace.options.oneBasedIndex?[a+" + 1",i.Dart.ORDER_ADDITIVE]:[a,i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.text_charAt=function(d){var e=d.getFieldValue("WHERE")||"FROM_START",f=i.Dart.valueToCode(d,"VALUE",i.Dart.ORDER_UNARY_POSTFIX)||"''";switch(e){case"FIRST":return[f+"[0]",i.Dart.ORDER_UNARY_POSTFIX];case"FROM_START":return d=i.Dart.getAdjusted(d,"AT"),[f+"["+d+"]",i.Dart.ORDER_UNARY_POSTFIX];case"LAST":case"FROM_END":return d=i.Dart.getAdjusted(d,"AT",1),e=i.Dart.provideFunction_("text_get_from_end",["String "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String text, num x) {","  return text[text.length - x];","}"]),[e+"("+f+", "+d+")",i.Dart.ORDER_UNARY_POSTFIX];case"RANDOM":return i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",e=i.Dart.provideFunction_("text_random_letter",["String "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String text) {","  int x = new Math.Random().nextInt(text.length);","  return text[x];","}"]),[e+"("+f+")",i.Dart.ORDER_UNARY_POSTFIX];}throw Error("Unhandled option (text_charAt).")};i.Dart.text_getSubstring=function(g){var h=i.Dart.valueToCode(g,"STRING",i.Dart.ORDER_UNARY_POSTFIX)||"''",b=g.getFieldValue("WHERE1"),c=g.getFieldValue("WHERE2");if("FIRST"==b&&"LAST"==c)g=h;else if(h.match(/^'?\w+'?$/)||"FROM_END"!=b&&"FROM_START"==c){switch(b){case"FROM_START":var d=i.Dart.getAdjusted(g,"AT1");break;case"FROM_END":d=i.Dart.getAdjusted(g,"AT1",1,!1,i.Dart.ORDER_ADDITIVE);d=h+".length - "+d;break;case"FIRST":d="0";break;default:throw Error("Unhandled option (text_getSubstring).");}switch(c){case"FROM_START":var j=i.Dart.getAdjusted(g,"AT2",1);break;case"FROM_END":j=i.Dart.getAdjusted(g,"AT2",0,!1,i.Dart.ORDER_ADDITIVE);j=h+".length - "+j;break;case"LAST":break;default:throw Error("Unhandled option (text_getSubstring).");}g="LAST"==c?h+".substring("+d+")":h+".substring("+d+", "+j+")"}else d=i.Dart.getAdjusted(g,"AT1"),j=i.Dart.getAdjusted(g,"AT2"),g=i.Dart.provideFunction_("text_get_substring",["String "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String text, String where1, num at1, String where2, num at2) {","  int getAt(String where, num at) {","    if (where == 'FROM_END') {","      at = text.length - 1 - at;","    } else if (where == 'FIRST') {","      at = 0;","    } else if (where == 'LAST') {","      at = text.length - 1;","    } else if (where != 'FROM_START') {","      throw 'Unhandled option (text_getSubstring).';","    }","    return at;","  }","  at1 = getAt(where1, at1);","  at2 = getAt(where2, at2) + 1;","  return text.substring(at1, at2);","}"])+"("+h+", '"+b+"', "+d+", '"+c+"', "+j+")";return[g,i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.text_changeCase=function(c){var d={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[c.getFieldValue("CASE")];c=i.Dart.valueToCode(c,"TEXT",d?i.Dart.ORDER_UNARY_POSTFIX:i.Dart.ORDER_NONE)||"''";return[d?c+d:i.Dart.provideFunction_("text_toTitleCase",["String "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String str) {","  RegExp exp = new RegExp(r'\\b');","  List<String> list = str.split(exp);","  final title = new StringBuffer();","  for (String part in list) {","    if (part.length > 0) {","      title.write(part[0].toUpperCase());","      if (part.length > 0) {","        title.write(part.substring(1).toLowerCase());","      }","    }","  }","  return title.toString();","}"])+"("+c+")",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.text_trim=function(c){var a={LEFT:".replaceFirst(new RegExp(r'^\\s+'), '')",RIGHT:".replaceFirst(new RegExp(r'\\s+$'), '')",BOTH:".trim()"}[c.getFieldValue("MODE")];return[(i.Dart.valueToCode(c,"TEXT",i.Dart.ORDER_UNARY_POSTFIX)||"''")+a,i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.text_print=function(b){return"print("+(i.Dart.valueToCode(b,"TEXT",i.Dart.ORDER_NONE)||"''")+");\n"};i.Dart.text_prompt_ext=function(c){i.Dart.definitions_.import_dart_html="import 'dart:html' as Html;";var a="Html.window.prompt("+(c.getField("TEXT")?i.Dart.quote_(c.getFieldValue("TEXT")):i.Dart.valueToCode(c,"TEXT",i.Dart.ORDER_NONE)||"''")+", '')";"NUMBER"==c.getFieldValue("TYPE")&&(i.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",a="Math.parseDouble("+a+")");return[a,i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.text_prompt=i.Dart.text_prompt_ext;i.Dart.text_count=function(c){var d=i.Dart.valueToCode(c,"TEXT",i.Dart.ORDER_UNARY_POSTFIX)||"''";c=i.Dart.valueToCode(c,"SUB",i.Dart.ORDER_NONE)||"''";return[i.Dart.provideFunction_("text_count",["int "+i.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String haystack, String needle) {","  if (needle.length == 0) {","    return haystack.length + 1;","  }","  int index = 0;","  int count = 0;","  while (index != -1) {","    index = haystack.indexOf(needle, index);","    if (index != -1) {","      count++;","     index += needle.length;","    }","  }","  return count;","}"])+"("+d+", "+c+")",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.text_replace=function(d){var e=i.Dart.valueToCode(d,"TEXT",i.Dart.ORDER_UNARY_POSTFIX)||"''",b=i.Dart.valueToCode(d,"FROM",i.Dart.ORDER_NONE)||"''";d=i.Dart.valueToCode(d,"TO",i.Dart.ORDER_NONE)||"''";return[e+".replaceAll("+b+", "+d+")",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.text_reverse=function(b){return["new String.fromCharCodes("+(i.Dart.valueToCode(b,"TEXT",i.Dart.ORDER_UNARY_POSTFIX)||"''")+".runes.toList().reversed)",i.Dart.ORDER_UNARY_POSTFIX]};i.Dart.variables={};i.Dart.variables_get=function(b){return[i.Dart.variableDB_.getName(b.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME),i.Dart.ORDER_ATOMIC]};i.Dart.variables_set=function(c){var a=i.Dart.valueToCode(c,"VALUE",i.Dart.ORDER_ASSIGNMENT)||"0";return i.Dart.variableDB_.getName(c.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME)+" = "+a+";\n"};i.Dart.variablesDynamic={};i.Dart.variables_get_dynamic=i.Dart.variables_get;i.Dart.variables_set_dynamic=i.Dart.variables_set;return i.Dart});
//# sourceMappingURL=dart.min.js.map
