function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a,b){if("function"==typeof define&&define.amd){define ("qtype_coderunner/blockly/php_compressed",["./blockly_compressed.js"],b)}else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))){module.exports=b(require("./blockly_compressed.js"))}else{a.Blockly.PHP=b(a.Blockly)}})(this,function(i){'use strict';i.PHP=new i.Generator("PHP");i.PHP.addReservedWords("__halt_compiler,abstract,and,array,as,break,callable,case,catch,class,clone,const,continue,declare,default,die,do,echo,else,elseif,empty,enddeclare,endfor,endforeach,endif,endswitch,endwhile,eval,exit,extends,final,for,foreach,function,global,goto,if,implements,include,include_once,instanceof,insteadof,interface,isset,list,namespace,new,or,print,private,protected,public,require,require_once,return,static,switch,throw,trait,try,unset,use,var,while,xor,PHP_VERSION,PHP_MAJOR_VERSION,PHP_MINOR_VERSION,PHP_RELEASE_VERSION,PHP_VERSION_ID,PHP_EXTRA_VERSION,PHP_ZTS,PHP_DEBUG,PHP_MAXPATHLEN,PHP_OS,PHP_SAPI,PHP_EOL,PHP_INT_MAX,PHP_INT_SIZE,DEFAULT_INCLUDE_PATH,PEAR_INSTALL_DIR,PEAR_EXTENSION_DIR,PHP_EXTENSION_DIR,PHP_PREFIX,PHP_BINDIR,PHP_BINARY,PHP_MANDIR,PHP_LIBDIR,PHP_DATADIR,PHP_SYSCONFDIR,PHP_LOCALSTATEDIR,PHP_CONFIG_FILE_PATH,PHP_CONFIG_FILE_SCAN_DIR,PHP_SHLIB_SUFFIX,E_ERROR,E_WARNING,E_PARSE,E_NOTICE,E_CORE_ERROR,E_CORE_WARNING,E_COMPILE_ERROR,E_COMPILE_WARNING,E_USER_ERROR,E_USER_WARNING,E_USER_NOTICE,E_DEPRECATED,E_USER_DEPRECATED,E_ALL,E_STRICT,__COMPILER_HALT_OFFSET__,TRUE,FALSE,NULL,__CLASS__,__DIR__,__FILE__,__FUNCTION__,__LINE__,__METHOD__,__NAMESPACE__,__TRAIT__");i.PHP.ORDER_ATOMIC=0;i.PHP.ORDER_CLONE=1;i.PHP.ORDER_NEW=1;i.PHP.ORDER_MEMBER=2.1;i.PHP.ORDER_FUNCTION_CALL=2.2;i.PHP.ORDER_POWER=3;i.PHP.ORDER_INCREMENT=4;i.PHP.ORDER_DECREMENT=4;i.PHP.ORDER_BITWISE_NOT=4;i.PHP.ORDER_CAST=4;i.PHP.ORDER_SUPPRESS_ERROR=4;i.PHP.ORDER_INSTANCEOF=5;i.PHP.ORDER_LOGICAL_NOT=6;i.PHP.ORDER_UNARY_PLUS=7.1;i.PHP.ORDER_UNARY_NEGATION=7.2;i.PHP.ORDER_MULTIPLICATION=8.1;i.PHP.ORDER_DIVISION=8.2;i.PHP.ORDER_MODULUS=8.3;i.PHP.ORDER_ADDITION=9.1;i.PHP.ORDER_SUBTRACTION=9.2;i.PHP.ORDER_STRING_CONCAT=9.3;i.PHP.ORDER_BITWISE_SHIFT=10;i.PHP.ORDER_RELATIONAL=11;i.PHP.ORDER_EQUALITY=12;i.PHP.ORDER_REFERENCE=13;i.PHP.ORDER_BITWISE_AND=13;i.PHP.ORDER_BITWISE_XOR=14;i.PHP.ORDER_BITWISE_OR=15;i.PHP.ORDER_LOGICAL_AND=16;i.PHP.ORDER_LOGICAL_OR=17;i.PHP.ORDER_IF_NULL=18;i.PHP.ORDER_CONDITIONAL=19;i.PHP.ORDER_ASSIGNMENT=20;i.PHP.ORDER_LOGICAL_AND_WEAK=21;i.PHP.ORDER_LOGICAL_XOR=22;i.PHP.ORDER_LOGICAL_OR_WEAK=23;i.PHP.ORDER_COMMA=24;i.PHP.ORDER_NONE=99;i.PHP.ORDER_OVERRIDES=[[i.PHP.ORDER_MEMBER,i.PHP.ORDER_FUNCTION_CALL],[i.PHP.ORDER_MEMBER,i.PHP.ORDER_MEMBER],[i.PHP.ORDER_LOGICAL_NOT,i.PHP.ORDER_LOGICAL_NOT],[i.PHP.ORDER_MULTIPLICATION,i.PHP.ORDER_MULTIPLICATION],[i.PHP.ORDER_ADDITION,i.PHP.ORDER_ADDITION],[i.PHP.ORDER_LOGICAL_AND,i.PHP.ORDER_LOGICAL_AND],[i.PHP.ORDER_LOGICAL_OR,i.PHP.ORDER_LOGICAL_OR]];i.PHP.init=function(e){i.PHP.definitions_=Object.create(null);i.PHP.functionNames_=Object.create(null);i.PHP.variableDB_?i.PHP.variableDB_.reset():i.PHP.variableDB_=new i.Names(i.PHP.RESERVED_WORDS_,"$");i.PHP.variableDB_.setVariableMap(e.getVariableMap());for(var f=[],b=i.Variables.allDeveloperVariables(e),g=0;g<b.length;g++){f.push(i.PHP.variableDB_.getName(b[g],i.Names.DEVELOPER_VARIABLE_TYPE)+";")}e=i.Variables.allUsedVarModels(e);for(g=0;b=e[g];g++){f.push(i.PHP.variableDB_.getName(b.getId(),i.VARIABLE_CATEGORY_NAME)+";")}i.PHP.definitions_.variables=f.join("\n")};i.PHP.finish=function(d){var a=[],b;for(b in i.PHP.definitions_){a.push(i.PHP.definitions_[b])}delete i.PHP.definitions_;delete i.PHP.functionNames_;i.PHP.variableDB_.reset();return a.join("\n\n")+"\n\n\n"+d};i.PHP.scrubNakedValue=function(b){return b+";\n"};i.PHP.quote_=function(b){b=b.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+b+"'"};i.PHP.multiline_quote_=function(b){return"<<<EOT\n"+b+"\nEOT"};i.PHP.scrub_=function(g,h,b){var j="";if(!g.outputConnection||!g.outputConnection.targetConnection){var k=g.getCommentText();k&&(k=i.utils.string.wrap(k,i.PHP.COMMENT_WRAP-3),j+=i.PHP.prefixLines(k,"// ")+"\n");for(var l=0;l<g.inputList.length;l++){g.inputList[l].type==i.INPUT_VALUE&&(k=g.inputList[l].connection.targetBlock())&&(k=i.PHP.allNestedComments(k))&&(j+=i.PHP.prefixLines(k,"// "))}}g=g.nextConnection&&g.nextConnection.targetBlock();b=b?"":i.PHP.blockToCode(g);return j+h+b};i.PHP.getAdjusted=function(h,j,b,k,d){b=b||0;d=d||i.PHP.ORDER_NONE;h.workspace.options.oneBasedIndex&&b--;var l=h.workspace.options.oneBasedIndex?"1":"0";h=0<b?i.PHP.valueToCode(h,j,i.PHP.ORDER_ADDITION)||l:0>b?i.PHP.valueToCode(h,j,i.PHP.ORDER_SUBTRACTION)||l:k?i.PHP.valueToCode(h,j,i.PHP.ORDER_UNARY_NEGATION)||l:i.PHP.valueToCode(h,j,d)||l;if(i.isNumber(h))h=+h+b,k&&(h=-h);else{if(0<b){h=h+" + "+b;var f=i.PHP.ORDER_ADDITION}else 0>b&&(h=h+" - "+-b,f=i.PHP.ORDER_SUBTRACTION);k&&(h=b?"-("+h+")":"-"+h,f=i.PHP.ORDER_UNARY_NEGATION);f=Math.floor(f);d=Math.floor(d);f&&d>=f&&(h="("+h+")")}return h};i.PHP.colour={};i.PHP.colour_picker=function(b){return[i.PHP.quote_(b.getFieldValue("COLOUR")),i.PHP.ORDER_ATOMIC]};i.PHP.colour_random=function(){return[i.PHP.provideFunction_("colour_random",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"() {","  return '#' . str_pad(dechex(mt_rand(0, 0xFFFFFF)), 6, '0', STR_PAD_LEFT);","}"])+"()",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.colour_rgb=function(d){var e=i.PHP.valueToCode(d,"RED",i.PHP.ORDER_COMMA)||0,b=i.PHP.valueToCode(d,"GREEN",i.PHP.ORDER_COMMA)||0;d=i.PHP.valueToCode(d,"BLUE",i.PHP.ORDER_COMMA)||0;return[i.PHP.provideFunction_("colour_rgb",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($r, $g, $b) {","  $r = round(max(min($r, 100), 0) * 2.55);","  $g = round(max(min($g, 100), 0) * 2.55);","  $b = round(max(min($b, 100), 0) * 2.55);","  $hex = '#';","  $hex .= str_pad(dechex($r), 2, '0', STR_PAD_LEFT);","  $hex .= str_pad(dechex($g), 2, '0', STR_PAD_LEFT);","  $hex .= str_pad(dechex($b), 2, '0', STR_PAD_LEFT);","  return $hex;","}"])+"("+e+", "+b+", "+d+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.colour_blend=function(d){var e=i.PHP.valueToCode(d,"COLOUR1",i.PHP.ORDER_COMMA)||"'#000000'",b=i.PHP.valueToCode(d,"COLOUR2",i.PHP.ORDER_COMMA)||"'#000000'";d=i.PHP.valueToCode(d,"RATIO",i.PHP.ORDER_COMMA)||.5;return[i.PHP.provideFunction_("colour_blend",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($c1, $c2, $ratio) {","  $ratio = max(min($ratio, 1), 0);","  $r1 = hexdec(substr($c1, 1, 2));","  $g1 = hexdec(substr($c1, 3, 2));","  $b1 = hexdec(substr($c1, 5, 2));","  $r2 = hexdec(substr($c2, 1, 2));","  $g2 = hexdec(substr($c2, 3, 2));","  $b2 = hexdec(substr($c2, 5, 2));","  $r = round($r1 * (1 - $ratio) + $r2 * $ratio);","  $g = round($g1 * (1 - $ratio) + $g2 * $ratio);","  $b = round($b1 * (1 - $ratio) + $b2 * $ratio);","  $hex = '#';","  $hex .= str_pad(dechex($r), 2, '0', STR_PAD_LEFT);","  $hex .= str_pad(dechex($g), 2, '0', STR_PAD_LEFT);","  $hex .= str_pad(dechex($b), 2, '0', STR_PAD_LEFT);","  return $hex;","}"])+"("+e+", "+b+", "+d+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.lists={};i.PHP.lists_create_empty=function(){return["array()",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.lists_create_with=function(d){for(var a=Array(d.itemCount_),e=0;e<d.itemCount_;e++){a[e]=i.PHP.valueToCode(d,"ADD"+e,i.PHP.ORDER_COMMA)||"null"}a="array("+a.join(", ")+")";return[a,i.PHP.ORDER_FUNCTION_CALL]};i.PHP.lists_repeat=function(d){var e=i.PHP.provideFunction_("lists_repeat",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($value, $count) {","  $array = array();","  for ($index = 0; $index < $count; $index++) {","    $array[] = $value;","  }","  return $array;","}"]),b=i.PHP.valueToCode(d,"ITEM",i.PHP.ORDER_COMMA)||"null";d=i.PHP.valueToCode(d,"NUM",i.PHP.ORDER_COMMA)||"0";return[e+"("+b+", "+d+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.lists_length=function(c){var d=i.PHP.provideFunction_("length",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($value) {","  if (is_string($value)) {","    return strlen($value);","  } else {","    return count($value);","  }","}"]);c=i.PHP.valueToCode(c,"VALUE",i.PHP.ORDER_NONE)||"''";return[d+"("+c+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.lists_isEmpty=function(b){return["empty("+(i.PHP.valueToCode(b,"VALUE",i.PHP.ORDER_FUNCTION_CALL)||"array()")+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.lists_indexOf=function(f){var a=i.PHP.valueToCode(f,"FIND",i.PHP.ORDER_NONE)||"''",b=i.PHP.valueToCode(f,"VALUE",i.PHP.ORDER_MEMBER)||"[]";if(f.workspace.options.oneBasedIndex)var c=" 0",g=" + 1";else c=" -1",g="";return[("FIRST"==f.getFieldValue("END")?i.PHP.provideFunction_("indexOf",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($haystack, $needle) {","  for ($index = 0; $index < count($haystack); $index++) {","    if ($haystack[$index] == $needle) return $index"+g+";","  }","  return "+c+";","}"]):i.PHP.provideFunction_("lastIndexOf",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($haystack, $needle) {","  $last = "+c+";","  for ($index = 0; $index < count($haystack); $index++) {","    if ($haystack[$index] == $needle) $last = $index"+g+";","  }","  return $last;","}"]))+"("+b+", "+a+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.lists_getIndex=function(e){var a=e.getFieldValue("MODE")||"GET";switch(e.getFieldValue("WHERE")||"FROM_START"){case"FIRST":if("GET"==a){var f=i.PHP.valueToCode(e,"VALUE",i.PHP.ORDER_MEMBER)||"array()";return[f+"[0]",i.PHP.ORDER_MEMBER]}if("GET_REMOVE"==a)return f=i.PHP.valueToCode(e,"VALUE",i.PHP.ORDER_NONE)||"array()",["array_shift("+f+")",i.PHP.ORDER_FUNCTION_CALL];if("REMOVE"==a)return f=i.PHP.valueToCode(e,"VALUE",i.PHP.ORDER_NONE)||"array()","array_shift("+f+");\n";break;case"LAST":if("GET"==a)return f=i.PHP.valueToCode(e,"VALUE",i.PHP.ORDER_NONE)||"array()",["end("+f+")",i.PHP.ORDER_FUNCTION_CALL];if("GET_REMOVE"==a)return f=i.PHP.valueToCode(e,"VALUE",i.PHP.ORDER_NONE)||"array()",["array_pop("+f+")",i.PHP.ORDER_FUNCTION_CALL];if("REMOVE"==a)return f=i.PHP.valueToCode(e,"VALUE",i.PHP.ORDER_NONE)||"array()","array_pop("+f+");\n";break;case"FROM_START":var g=i.PHP.getAdjusted(e,"AT");if("GET"==a)return f=i.PHP.valueToCode(e,"VALUE",i.PHP.ORDER_MEMBER)||"array()",[f+"["+g+"]",i.PHP.ORDER_MEMBER];if("GET_REMOVE"==a)return f=i.PHP.valueToCode(e,"VALUE",i.PHP.ORDER_COMMA)||"array()",["array_splice("+f+", "+g+", 1)[0]",i.PHP.ORDER_FUNCTION_CALL];if("REMOVE"==a)return f=i.PHP.valueToCode(e,"VALUE",i.PHP.ORDER_COMMA)||"array()","array_splice("+f+", "+g+", 1);\n";break;case"FROM_END":if("GET"==a)return f=i.PHP.valueToCode(e,"VALUE",i.PHP.ORDER_COMMA)||"array()",g=i.PHP.getAdjusted(e,"AT",1,!0),["array_slice("+f+", "+g+", 1)[0]",i.PHP.ORDER_FUNCTION_CALL];if("GET_REMOVE"==a||"REMOVE"==a){f=i.PHP.valueToCode(e,"VALUE",i.PHP.ORDER_NONE)||"array()";g=i.PHP.getAdjusted(e,"AT",1,!1,i.PHP.ORDER_SUBTRACTION);f="array_splice("+f+", count("+f+") - "+g+", 1)[0]";if("GET_REMOVE"==a)return[f,i.PHP.ORDER_FUNCTION_CALL];if("REMOVE"==a)return f+";\n"}break;case"RANDOM":f=i.PHP.valueToCode(e,"VALUE",i.PHP.ORDER_NONE)||"array()";if("GET"==a)return a=i.PHP.provideFunction_("lists_get_random_item",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($list) {","  return $list[rand(0,count($list)-1)];","}"]),[a+"("+f+")",i.PHP.ORDER_FUNCTION_CALL];if("GET_REMOVE"==a)return a=i.PHP.provideFunction_("lists_get_remove_random_item",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list) {","  $x = rand(0,count($list)-1);","  unset($list[$x]);","  return array_values($list);","}"]),[a+"("+f+")",i.PHP.ORDER_FUNCTION_CALL];if("REMOVE"==a)return a=i.PHP.provideFunction_("lists_remove_random_item",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list) {","  unset($list[rand(0,count($list)-1)]);","}"]),a+"("+f+");\n";}throw Error("Unhandled combination (lists_getIndex).")};i.PHP.lists_setIndex=function(f){var g=f.getFieldValue("MODE")||"GET",h=f.getFieldValue("WHERE")||"FROM_START",j=i.PHP.valueToCode(f,"TO",i.PHP.ORDER_ASSIGNMENT)||"null";switch(h){case"FIRST":if("SET"==g)return h=i.PHP.valueToCode(f,"LIST",i.PHP.ORDER_MEMBER)||"array()",h+"[0] = "+j+";\n";if("INSERT"==g)return h=i.PHP.valueToCode(f,"LIST",i.PHP.ORDER_COMMA)||"array()","array_unshift("+h+", "+j+");\n";break;case"LAST":h=i.PHP.valueToCode(f,"LIST",i.PHP.ORDER_COMMA)||"array()";if("SET"==g)return g=i.PHP.provideFunction_("lists_set_last_item",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list, $value) {","  $list[count($list) - 1] = $value;","}"]),g+"("+h+", "+j+");\n";if("INSERT"==g)return"array_push("+h+", "+j+");\n";break;case"FROM_START":var d=i.PHP.getAdjusted(f,"AT");if("SET"==g)return h=i.PHP.valueToCode(f,"LIST",i.PHP.ORDER_MEMBER)||"array()",h+"["+d+"] = "+j+";\n";if("INSERT"==g)return h=i.PHP.valueToCode(f,"LIST",i.PHP.ORDER_COMMA)||"array()","array_splice("+h+", "+d+", 0, "+j+");\n";break;case"FROM_END":h=i.PHP.valueToCode(f,"LIST",i.PHP.ORDER_COMMA)||"array()";d=i.PHP.getAdjusted(f,"AT",1);if("SET"==g)return g=i.PHP.provideFunction_("lists_set_from_end",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list, $at, $value) {","  $list[count($list) - $at] = $value;","}"]),g+"("+h+", "+d+", "+j+");\n";if("INSERT"==g)return g=i.PHP.provideFunction_("lists_insert_from_end",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list, $at, $value) {","  return array_splice($list, count($list) - $at, 0, $value);","}"]),g+"("+h+", "+d+", "+j+");\n";break;case"RANDOM":h=i.PHP.valueToCode(f,"LIST",i.PHP.ORDER_REFERENCE)||"array()";h.match(/^\$\w+$/)?f="":(f=i.PHP.variableDB_.getDistinctName("tmp_list",i.VARIABLE_CATEGORY_NAME),d=f+" = &"+h+";\n",h=f,f=d);d=i.PHP.variableDB_.getDistinctName("tmp_x",i.VARIABLE_CATEGORY_NAME);f+=d+" = rand(0, count("+h+")-1);\n";if("SET"==g)return f+(h+"["+d+"] = "+j+";\n");if("INSERT"==g)return f+("array_splice("+h+", "+d+", 0, "+j+");\n");}throw Error("Unhandled combination (lists_setIndex).")};i.PHP.lists_getSublist=function(f){var g=i.PHP.valueToCode(f,"LIST",i.PHP.ORDER_COMMA)||"array()",h=f.getFieldValue("WHERE1"),j=f.getFieldValue("WHERE2");if("FIRST"!=h||"LAST"!=j)if(g.match(/^\$\w+$/)||"FROM_END"!=h&&"FROM_START"==j){switch(h){case"FROM_START":var d=i.PHP.getAdjusted(f,"AT1");break;case"FROM_END":d=i.PHP.getAdjusted(f,"AT1",1,!1,i.PHP.ORDER_SUBTRACTION);d="count("+g+") - "+d;break;case"FIRST":d="0";break;default:throw Error("Unhandled option (lists_getSublist).");}switch(j){case"FROM_START":f=i.PHP.getAdjusted(f,"AT2",0,!1,i.PHP.ORDER_SUBTRACTION);h=f+" - ";h=i.isNumber(d+"")||(d+"").match(/^\(.+\)$/)?h+d:h+("("+d+")");h+=" + 1";break;case"FROM_END":f=i.PHP.getAdjusted(f,"AT2",0,!1,i.PHP.ORDER_SUBTRACTION);h="count("+g+") - "+f+" - ";h=i.isNumber(d+"")||(d+"").match(/^\(.+\)$/)?h+d:h+("("+d+")");break;case"LAST":h="count("+g+") - ";h=i.isNumber(d+"")||(d+"").match(/^\(.+\)$/)?h+d:h+("("+d+")");break;default:throw Error("Unhandled option (lists_getSublist).");}g="array_slice("+g+", "+d+", "+h+")"}else d=i.PHP.getAdjusted(f,"AT1"),f=i.PHP.getAdjusted(f,"AT2"),g=i.PHP.provideFunction_("lists_get_sublist",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($list, $where1, $at1, $where2, $at2) {","  if ($where1 == 'FROM_END') {","    $at1 = count($list) - 1 - $at1;","  } else if ($where1 == 'FIRST') {","    $at1 = 0;","  } else if ($where1 != 'FROM_START') {","    throw new Exception('Unhandled option (lists_get_sublist).');","  }","  $length = 0;","  if ($where2 == 'FROM_START') {","    $length = $at2 - $at1 + 1;","  } else if ($where2 == 'FROM_END') {","    $length = count($list) - $at1 - $at2;","  } else if ($where2 == 'LAST') {","    $length = count($list) - $at1;","  } else {","    throw new Exception('Unhandled option (lists_get_sublist).');","  }","  return array_slice($list, $at1, $length);","}"])+"("+g+", '"+h+"', "+d+", '"+j+"', "+f+")";return[g,i.PHP.ORDER_FUNCTION_CALL]};i.PHP.lists_sort=function(d){var e=i.PHP.valueToCode(d,"LIST",i.PHP.ORDER_COMMA)||"array()",b="1"===d.getFieldValue("DIRECTION")?1:-1;d=d.getFieldValue("TYPE");return[i.PHP.provideFunction_("lists_sort",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($list, $type, $direction) {","  $sortCmpFuncs = array(","    \"NUMERIC\" => \"strnatcasecmp\",","    \"TEXT\" => \"strcmp\",","    \"IGNORE_CASE\" => \"strcasecmp\"","  );","  $sortCmp = $sortCmpFuncs[$type];","  $list2 = $list;","  usort($list2, $sortCmp);","  if ($direction == -1) {","    $list2 = array_reverse($list2);","  }","  return $list2;","}"])+"("+e+", \""+d+"\", "+b+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.lists_split=function(d){var e=i.PHP.valueToCode(d,"INPUT",i.PHP.ORDER_COMMA),f=i.PHP.valueToCode(d,"DELIM",i.PHP.ORDER_COMMA)||"''";d=d.getFieldValue("MODE");if("SPLIT"==d)e||(e="''"),d="explode";else if("JOIN"==d)e||(e="array()"),d="implode";else throw Error("Unknown mode: "+d);return[d+"("+f+", "+e+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.lists_reverse=function(b){return["array_reverse("+(i.PHP.valueToCode(b,"LIST",i.PHP.ORDER_COMMA)||"[]")+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.logic={};i.PHP.controls_if=function(f){var a=0,g="";i.PHP.STATEMENT_PREFIX&&(g+=i.PHP.injectId(i.PHP.STATEMENT_PREFIX,f));do{var h=i.PHP.valueToCode(f,"IF"+a,i.PHP.ORDER_NONE)||"false",d=i.PHP.statementToCode(f,"DO"+a);i.PHP.STATEMENT_SUFFIX&&(d=i.PHP.prefixLines(i.PHP.injectId(i.PHP.STATEMENT_SUFFIX,f),i.PHP.INDENT)+d);g+=(0<a?" else ":"")+"if ("+h+") {\n"+d+"}";++a}while(f.getInput("IF"+a));if(f.getInput("ELSE")||i.PHP.STATEMENT_SUFFIX)d=i.PHP.statementToCode(f,"ELSE"),i.PHP.STATEMENT_SUFFIX&&(d=i.PHP.prefixLines(i.PHP.injectId(i.PHP.STATEMENT_SUFFIX,f),i.PHP.INDENT)+d),g+=" else {\n"+d+"}";return g+"\n"};i.PHP.controls_ifelse=i.PHP.controls_if;i.PHP.logic_compare=function(e){var f={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],b="=="==f||"!="==f?i.PHP.ORDER_EQUALITY:i.PHP.ORDER_RELATIONAL,c=i.PHP.valueToCode(e,"A",b)||"0";e=i.PHP.valueToCode(e,"B",b)||"0";return[c+" "+f+" "+e,b]};i.PHP.logic_operation=function(f){var g="AND"==f.getFieldValue("OP")?"&&":"||",b="&&"==g?i.PHP.ORDER_LOGICAL_AND:i.PHP.ORDER_LOGICAL_OR,c=i.PHP.valueToCode(f,"A",b);f=i.PHP.valueToCode(f,"B",b);if(c||f){var h="&&"==g?"true":"false";c||(c=h);f||(f=h)}else f=c="false";return[c+" "+g+" "+f,b]};i.PHP.logic_negate=function(c){var a=i.PHP.ORDER_LOGICAL_NOT;return["!"+(i.PHP.valueToCode(c,"BOOL",a)||"true"),a]};i.PHP.logic_boolean=function(b){return["TRUE"==b.getFieldValue("BOOL")?"true":"false",i.PHP.ORDER_ATOMIC]};i.PHP.logic_null=function(){return["null",i.PHP.ORDER_ATOMIC]};i.PHP.logic_ternary=function(d){var e=i.PHP.valueToCode(d,"IF",i.PHP.ORDER_CONDITIONAL)||"false",b=i.PHP.valueToCode(d,"THEN",i.PHP.ORDER_CONDITIONAL)||"null";d=i.PHP.valueToCode(d,"ELSE",i.PHP.ORDER_CONDITIONAL)||"null";return[e+" ? "+b+" : "+d,i.PHP.ORDER_CONDITIONAL]};i.PHP.loops={};i.PHP.controls_repeat_ext=function(f){var g=f.getField("TIMES")?+f.getFieldValue("TIMES")+"":i.PHP.valueToCode(f,"TIMES",i.PHP.ORDER_ASSIGNMENT)||"0",b=i.PHP.statementToCode(f,"DO");b=i.PHP.addLoopTrap(b,f);f="";var h=i.PHP.variableDB_.getDistinctName("count",i.VARIABLE_CATEGORY_NAME),d=g;g.match(/^\w+$/)||i.isNumber(g)||(d=i.PHP.variableDB_.getDistinctName("repeat_end",i.VARIABLE_CATEGORY_NAME),f+=d+" = "+g+";\n");return f+("for ("+h+" = 0; "+h+" < "+d+"; "+h+"++) {\n"+b+"}\n")};i.PHP.controls_repeat=i.PHP.controls_repeat_ext;i.PHP.controls_whileUntil=function(e){var a="UNTIL"==e.getFieldValue("MODE"),b=i.PHP.valueToCode(e,"BOOL",a?i.PHP.ORDER_LOGICAL_NOT:i.PHP.ORDER_NONE)||"false",f=i.PHP.statementToCode(e,"DO");f=i.PHP.addLoopTrap(f,e);a&&(b="!"+b);return"while ("+b+") {\n"+f+"}\n"};i.PHP.controls_for=function(h){var j=i.PHP.variableDB_.getName(h.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME),k=i.PHP.valueToCode(h,"FROM",i.PHP.ORDER_ASSIGNMENT)||"0",l=i.PHP.valueToCode(h,"TO",i.PHP.ORDER_ASSIGNMENT)||"0",m=i.PHP.valueToCode(h,"BY",i.PHP.ORDER_ASSIGNMENT)||"1",e=i.PHP.statementToCode(h,"DO");e=i.PHP.addLoopTrap(e,h);if(i.isNumber(k)&&i.isNumber(l)&&i.isNumber(m)){var n=+k<=+l;h="for ("+j+" = "+k+"; "+j+(n?" <= ":" >= ")+l+"; "+j;j=Math.abs(+m);h=(1==j?h+(n?"++":"--"):h+((n?" += ":" -= ")+j))+(") {\n"+e+"}\n")}else h="",n=k,k.match(/^\w+$/)||i.isNumber(k)||(n=i.PHP.variableDB_.getDistinctName(j+"_start",i.VARIABLE_CATEGORY_NAME),h+=n+" = "+k+";\n"),k=l,l.match(/^\w+$/)||i.isNumber(l)||(k=i.PHP.variableDB_.getDistinctName(j+"_end",i.VARIABLE_CATEGORY_NAME),h+=k+" = "+l+";\n"),l=i.PHP.variableDB_.getDistinctName(j+"_inc",i.VARIABLE_CATEGORY_NAME),h+=l+" = ",h=i.isNumber(m)?h+(Math.abs(m)+";\n"):h+("abs("+m+");\n"),h=h+("if ("+n+" > "+k+") {\n")+(i.PHP.INDENT+l+" = -"+l+";\n"),h+="}\n",h+="for ("+j+" = "+n+"; "+l+" >= 0 ? "+j+" <= "+k+" : "+j+" >= "+k+"; "+j+" += "+l+") {\n"+e+"}\n";return h};i.PHP.controls_forEach=function(e){var a=i.PHP.variableDB_.getName(e.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME),b=i.PHP.valueToCode(e,"LIST",i.PHP.ORDER_ASSIGNMENT)||"[]",c=i.PHP.statementToCode(e,"DO");c=i.PHP.addLoopTrap(c,e);return"foreach ("+b+" as "+a+") {\n"+c+"}\n"};i.PHP.controls_flow_statements=function(d){var a="";i.PHP.STATEMENT_PREFIX&&(a+=i.PHP.injectId(i.PHP.STATEMENT_PREFIX,d));i.PHP.STATEMENT_SUFFIX&&(a+=i.PHP.injectId(i.PHP.STATEMENT_SUFFIX,d));if(i.PHP.STATEMENT_PREFIX){var e=i.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(d);e&&!e.suppressPrefixSuffix&&(a+=i.PHP.injectId(i.PHP.STATEMENT_PREFIX,e))}switch(d.getFieldValue("FLOW")){case"BREAK":return a+"break;\n";case"CONTINUE":return a+"continue;\n";}throw Error("Unknown flow statement.")};i.PHP.math={};i.PHP.math_number=function(c){c=+c.getFieldValue("NUM");var d=0<=c?i.PHP.ORDER_ATOMIC:i.PHP.ORDER_UNARY_NEGATION;1/0==c?c="INF":-Infinity==c&&(c="-INF");return[c,d]};i.PHP.math_arithmetic=function(e){var f={ADD:[" + ",i.PHP.ORDER_ADDITION],MINUS:[" - ",i.PHP.ORDER_SUBTRACTION],MULTIPLY:[" * ",i.PHP.ORDER_MULTIPLICATION],DIVIDE:[" / ",i.PHP.ORDER_DIVISION],POWER:[" ** ",i.PHP.ORDER_POWER]}[e.getFieldValue("OP")],g=f[0];f=f[1];var c=i.PHP.valueToCode(e,"A",f)||"0";e=i.PHP.valueToCode(e,"B",f)||"0";return[c+g+e,f]};i.PHP.math_single=function(d){var e=d.getFieldValue("OP");if("NEG"==e)return d=i.PHP.valueToCode(d,"NUM",i.PHP.ORDER_UNARY_NEGATION)||"0","-"==d[0]&&(d=" "+d),["-"+d,i.PHP.ORDER_UNARY_NEGATION];d="SIN"==e||"COS"==e||"TAN"==e?i.PHP.valueToCode(d,"NUM",i.PHP.ORDER_DIVISION)||"0":i.PHP.valueToCode(d,"NUM",i.PHP.ORDER_NONE)||"0";switch(e){case"ABS":var b="abs("+d+")";break;case"ROOT":b="sqrt("+d+")";break;case"LN":b="log("+d+")";break;case"EXP":b="exp("+d+")";break;case"POW10":b="pow(10,"+d+")";break;case"ROUND":b="round("+d+")";break;case"ROUNDUP":b="ceil("+d+")";break;case"ROUNDDOWN":b="floor("+d+")";break;case"SIN":b="sin("+d+" / 180 * pi())";break;case"COS":b="cos("+d+" / 180 * pi())";break;case"TAN":b="tan("+d+" / 180 * pi())";}if(b)return[b,i.PHP.ORDER_FUNCTION_CALL];switch(e){case"LOG10":b="log("+d+") / log(10)";break;case"ASIN":b="asin("+d+") / pi() * 180";break;case"ACOS":b="acos("+d+") / pi() * 180";break;case"ATAN":b="atan("+d+") / pi() * 180";break;default:throw Error("Unknown math operator: "+e);}return[b,i.PHP.ORDER_DIVISION]};i.PHP.math_constant=function(b){return{PI:["M_PI",i.PHP.ORDER_ATOMIC],E:["M_E",i.PHP.ORDER_ATOMIC],GOLDEN_RATIO:["(1 + sqrt(5)) / 2",i.PHP.ORDER_DIVISION],SQRT2:["M_SQRT2",i.PHP.ORDER_ATOMIC],SQRT1_2:["M_SQRT1_2",i.PHP.ORDER_ATOMIC],INFINITY:["INF",i.PHP.ORDER_ATOMIC]}[b.getFieldValue("CONSTANT")]};i.PHP.math_number_property=function(e){var f=i.PHP.valueToCode(e,"NUMBER_TO_CHECK",i.PHP.ORDER_MODULUS)||"0",b=e.getFieldValue("PROPERTY");if("PRIME"==b)return[i.PHP.provideFunction_("math_isPrime",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if ($n == 2 || $n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (!is_numeric($n) || $n <= 1 || $n % 1 != 0 || $n % 2 == 0 || $n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for ($x = 6; $x <= sqrt($n) + 1; $x += 6) {","    if ($n % ($x - 1) == 0 || $n % ($x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+f+")",i.PHP.ORDER_FUNCTION_CALL];switch(b){case"EVEN":var c=f+" % 2 == 0";break;case"ODD":c=f+" % 2 == 1";break;case"WHOLE":c="is_int("+f+")";break;case"POSITIVE":c=f+" > 0";break;case"NEGATIVE":c=f+" < 0";break;case"DIVISIBLE_BY":e=i.PHP.valueToCode(e,"DIVISOR",i.PHP.ORDER_MODULUS)||"0",c=f+" % "+e+" == 0";}return[c,i.PHP.ORDER_EQUALITY]};i.PHP.math_change=function(c){var a=i.PHP.valueToCode(c,"DELTA",i.PHP.ORDER_ADDITION)||"0";return i.PHP.variableDB_.getName(c.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME)+" += "+a+";\n"};i.PHP.math_round=i.PHP.math_single;i.PHP.math_trig=i.PHP.math_single;i.PHP.math_on_list=function(c){var d=c.getFieldValue("OP");switch(d){case"SUM":c=i.PHP.valueToCode(c,"LIST",i.PHP.ORDER_FUNCTION_CALL)||"array()";c="array_sum("+c+")";break;case"MIN":c=i.PHP.valueToCode(c,"LIST",i.PHP.ORDER_FUNCTION_CALL)||"array()";c="min("+c+")";break;case"MAX":c=i.PHP.valueToCode(c,"LIST",i.PHP.ORDER_FUNCTION_CALL)||"array()";c="max("+c+")";break;case"AVERAGE":d=i.PHP.provideFunction_("math_mean",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($myList) {","  return array_sum($myList) / count($myList);","}"]);c=i.PHP.valueToCode(c,"LIST",i.PHP.ORDER_NONE)||"array()";c=d+"("+c+")";break;case"MEDIAN":d=i.PHP.provideFunction_("math_median",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($arr) {","  sort($arr,SORT_NUMERIC);","  return (count($arr) % 2) ? $arr[floor(count($arr)/2)] : ","      ($arr[floor(count($arr)/2)] + $arr[floor(count($arr)/2) - 1]) / 2;","}"]);c=i.PHP.valueToCode(c,"LIST",i.PHP.ORDER_NONE)||"[]";c=d+"("+c+")";break;case"MODE":d=i.PHP.provideFunction_("math_modes",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($values) {","  if (empty($values)) return array();","  $counts = array_count_values($values);","  arsort($counts); // Sort counts in descending order","  $modes = array_keys($counts, current($counts), true);","  return $modes;","}"]);c=i.PHP.valueToCode(c,"LIST",i.PHP.ORDER_NONE)||"[]";c=d+"("+c+")";break;case"STD_DEV":d=i.PHP.provideFunction_("math_standard_deviation",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($numbers) {","  $n = count($numbers);","  if (!$n) return null;","  $mean = array_sum($numbers) / count($numbers);","  foreach($numbers as $key => $num) $devs[$key] = pow($num - $mean, 2);","  return sqrt(array_sum($devs) / (count($devs) - 1));","}"]);c=i.PHP.valueToCode(c,"LIST",i.PHP.ORDER_NONE)||"[]";c=d+"("+c+")";break;case"RANDOM":d=i.PHP.provideFunction_("math_random_list",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($list) {","  $x = rand(0, count($list)-1);","  return $list[$x];","}"]);c=i.PHP.valueToCode(c,"LIST",i.PHP.ORDER_NONE)||"[]";c=d+"("+c+")";break;default:throw Error("Unknown operator: "+d);}return[c,i.PHP.ORDER_FUNCTION_CALL]};i.PHP.math_modulo=function(c){var d=i.PHP.valueToCode(c,"DIVIDEND",i.PHP.ORDER_MODULUS)||"0";c=i.PHP.valueToCode(c,"DIVISOR",i.PHP.ORDER_MODULUS)||"0";return[d+" % "+c,i.PHP.ORDER_MODULUS]};i.PHP.math_constrain=function(d){var e=i.PHP.valueToCode(d,"VALUE",i.PHP.ORDER_COMMA)||"0",b=i.PHP.valueToCode(d,"LOW",i.PHP.ORDER_COMMA)||"0";d=i.PHP.valueToCode(d,"HIGH",i.PHP.ORDER_COMMA)||"Infinity";return["min(max("+e+", "+b+"), "+d+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.math_random_int=function(c){var d=i.PHP.valueToCode(c,"FROM",i.PHP.ORDER_COMMA)||"0";c=i.PHP.valueToCode(c,"TO",i.PHP.ORDER_COMMA)||"0";return[i.PHP.provideFunction_("math_random_int",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($a, $b) {","  if ($a > $b) {","    return rand($b, $a);","  }","  return rand($a, $b);","}"])+"("+d+", "+c+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.math_random_float=function(){return["(float)rand()/(float)getrandmax()",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.math_atan2=function(c){var a=i.PHP.valueToCode(c,"X",i.PHP.ORDER_COMMA)||"0";return["atan2("+(i.PHP.valueToCode(c,"Y",i.PHP.ORDER_COMMA)||"0")+", "+a+") / pi() * 180",i.PHP.ORDER_DIVISION]};i.PHP.procedures={};i.PHP.procedures_defreturn=function(j){for(var a=[],n,o=j.workspace,p=i.Variables.allUsedVarModels(o)||[],q=0;n=p[q];q++){n=n.name,-1==j.getVars().indexOf(n)&&a.push(i.PHP.variableDB_.getName(n,i.VARIABLE_CATEGORY_NAME))}p=i.Variables.allDeveloperVariables(o);for(q=0;q<p.length;q++){a.push(i.PHP.variableDB_.getName(p[q],i.Names.DEVELOPER_VARIABLE_TYPE))}a=a.length?i.PHP.INDENT+"global "+a.join(", ")+";\n":"";o=i.PHP.variableDB_.getName(j.getFieldValue("NAME"),i.PROCEDURE_CATEGORY_NAME);n="";i.PHP.STATEMENT_PREFIX&&(n+=i.PHP.injectId(i.PHP.STATEMENT_PREFIX,j));i.PHP.STATEMENT_SUFFIX&&(n+=i.PHP.injectId(i.PHP.STATEMENT_SUFFIX,j));n&&(n=i.PHP.prefixLines(n,i.PHP.INDENT));var r="";i.PHP.INFINITE_LOOP_TRAP&&(r=i.PHP.prefixLines(i.PHP.injectId(i.PHP.INFINITE_LOOP_TRAP,j),i.PHP.INDENT));var s=i.PHP.statementToCode(j,"STACK"),k=i.PHP.valueToCode(j,"RETURN",i.PHP.ORDER_NONE)||"",t="";s&&k&&(t=n);k&&(k=i.PHP.INDENT+"return "+k+";\n");var u=[];p=j.getVars();for(q=0;q<p.length;q++){u[q]=i.PHP.variableDB_.getName(p[q],i.VARIABLE_CATEGORY_NAME)}a="function "+o+"("+u.join(", ")+") {\n"+a+n+r+s+t+k+"}";a=i.PHP.scrub_(j,a);i.PHP.definitions_["%"+o]=a;return null};i.PHP.procedures_defnoreturn=i.PHP.procedures_defreturn;i.PHP.procedures_callreturn=function(f){for(var a=i.PHP.variableDB_.getName(f.getFieldValue("NAME"),i.PROCEDURE_CATEGORY_NAME),b=[],c=f.getVars(),d=0;d<c.length;d++){b[d]=i.PHP.valueToCode(f,"ARG"+d,i.PHP.ORDER_COMMA)||"null"}return[a+"("+b.join(", ")+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.procedures_callnoreturn=function(b){return i.PHP.procedures_callreturn(b)[0]+";\n"};i.PHP.procedures_ifreturn=function(c){var d="if ("+(i.PHP.valueToCode(c,"CONDITION",i.PHP.ORDER_NONE)||"false")+") {\n";i.PHP.STATEMENT_SUFFIX&&(d+=i.PHP.prefixLines(i.PHP.injectId(i.PHP.STATEMENT_SUFFIX,c),i.PHP.INDENT));c.hasReturnValue_?(c=i.PHP.valueToCode(c,"VALUE",i.PHP.ORDER_NONE)||"null",d+=i.PHP.INDENT+"return "+c+";\n"):d+=i.PHP.INDENT+"return;\n";return d+"}\n"};i.PHP.texts={};i.PHP.text=function(b){return[i.PHP.quote_(b.getFieldValue("TEXT")),i.PHP.ORDER_ATOMIC]};i.PHP.text_multiline=function(b){return[i.PHP.multiline_quote_(b.getFieldValue("TEXT")),i.PHP.ORDER_ATOMIC]};i.PHP.text_join=function(d){if(0==d.itemCount_)return["''",i.PHP.ORDER_ATOMIC];if(1==d.itemCount_)return[i.PHP.valueToCode(d,"ADD0",i.PHP.ORDER_NONE)||"''",i.PHP.ORDER_FUNCTION_CALL];if(2==d.itemCount_){var e=i.PHP.valueToCode(d,"ADD0",i.PHP.ORDER_ATOMIC)||"''";d=i.PHP.valueToCode(d,"ADD1",i.PHP.ORDER_ATOMIC)||"''";return[e+" . "+d,i.PHP.ORDER_STRING_CONCAT]}e=Array(d.itemCount_);for(var f=0;f<d.itemCount_;f++){e[f]=i.PHP.valueToCode(d,"ADD"+f,i.PHP.ORDER_COMMA)||"''"}d="implode('', array("+e.join(",")+"))";return[d,i.PHP.ORDER_FUNCTION_CALL]};i.PHP.text_append=function(c){var d=i.PHP.variableDB_.getName(c.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME);c=i.PHP.valueToCode(c,"TEXT",i.PHP.ORDER_ASSIGNMENT)||"''";return d+" .= "+c+";\n"};i.PHP.text_length=function(c){var d=i.PHP.provideFunction_("length",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($value) {","  if (is_string($value)) {","    return strlen($value);","  } else {","    return count($value);","  }","}"]);c=i.PHP.valueToCode(c,"VALUE",i.PHP.ORDER_NONE)||"''";return[d+"("+c+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.text_isEmpty=function(b){return["empty("+(i.PHP.valueToCode(b,"VALUE",i.PHP.ORDER_NONE)||"''")+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.text_indexOf=function(g){var a="FIRST"==g.getFieldValue("END")?"strpos":"strrpos",b=i.PHP.valueToCode(g,"FIND",i.PHP.ORDER_NONE)||"''",c=i.PHP.valueToCode(g,"VALUE",i.PHP.ORDER_NONE)||"''";if(g.workspace.options.oneBasedIndex)var d=" 0",h=" + 1";else d=" -1",h="";return[i.PHP.provideFunction_("FIRST"==g.getFieldValue("END")?"text_indexOf":"text_lastIndexOf",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($text, $search) {","  $pos = "+a+"($text, $search);","  return $pos === false ? "+d+" : $pos"+h+";","}"])+"("+c+", "+b+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.text_charAt=function(d){var e=d.getFieldValue("WHERE")||"FROM_START",b=i.PHP.valueToCode(d,"VALUE","RANDOM"==e?i.PHP.ORDER_NONE:i.PHP.ORDER_COMMA)||"''";switch(e){case"FIRST":return["substr("+b+", 0, 1)",i.PHP.ORDER_FUNCTION_CALL];case"LAST":return["substr("+b+", -1)",i.PHP.ORDER_FUNCTION_CALL];case"FROM_START":return d=i.PHP.getAdjusted(d,"AT"),["substr("+b+", "+d+", 1)",i.PHP.ORDER_FUNCTION_CALL];case"FROM_END":return d=i.PHP.getAdjusted(d,"AT",1,!0),["substr("+b+", "+d+", 1)",i.PHP.ORDER_FUNCTION_CALL];case"RANDOM":return[i.PHP.provideFunction_("text_random_letter",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($text) {","  return $text[rand(0, strlen($text) - 1)];","}"])+"("+b+")",i.PHP.ORDER_FUNCTION_CALL];}throw Error("Unhandled option (text_charAt).")};i.PHP.text_getSubstring=function(f){var g=i.PHP.valueToCode(f,"STRING",i.PHP.ORDER_FUNCTION_CALL)||"''",h=f.getFieldValue("WHERE1"),c=f.getFieldValue("WHERE2");if("FIRST"!=h||"LAST"!=c){var d=i.PHP.getAdjusted(f,"AT1");f=i.PHP.getAdjusted(f,"AT2");g=i.PHP.provideFunction_("text_get_substring",["function "+i.PHP.FUNCTION_NAME_PLACEHOLDER_+"($text, $where1, $at1, $where2, $at2) {","  if ($where1 == 'FROM_END') {","    $at1 = strlen($text) - 1 - $at1;","  } else if ($where1 == 'FIRST') {","    $at1 = 0;","  } else if ($where1 != 'FROM_START') {","    throw new Exception('Unhandled option (text_get_substring).');","  }","  $length = 0;","  if ($where2 == 'FROM_START') {","    $length = $at2 - $at1 + 1;","  } else if ($where2 == 'FROM_END') {","    $length = strlen($text) - $at1 - $at2;","  } else if ($where2 == 'LAST') {","    $length = strlen($text) - $at1;","  } else {","    throw new Exception('Unhandled option (text_get_substring).');","  }","  return substr($text, $at1, $length);","}"])+"("+g+", '"+h+"', "+d+", '"+c+"', "+f+")"}return[g,i.PHP.ORDER_FUNCTION_CALL]};i.PHP.text_changeCase=function(d){var a=i.PHP.valueToCode(d,"TEXT",i.PHP.ORDER_NONE)||"''";if("UPPERCASE"==d.getFieldValue("CASE"))var b="strtoupper("+a+")";else"LOWERCASE"==d.getFieldValue("CASE")?b="strtolower("+a+")":"TITLECASE"==d.getFieldValue("CASE")&&(b="ucwords(strtolower("+a+"))");return[b,i.PHP.ORDER_FUNCTION_CALL]};i.PHP.text_trim=function(c){var d={LEFT:"ltrim",RIGHT:"rtrim",BOTH:"trim"}[c.getFieldValue("MODE")];c=i.PHP.valueToCode(c,"TEXT",i.PHP.ORDER_NONE)||"''";return[d+"("+c+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.text_print=function(b){return"print("+(i.PHP.valueToCode(b,"TEXT",i.PHP.ORDER_NONE)||"''")+");\n"};i.PHP.text_prompt_ext=function(c){var a="readline("+(c.getField("TEXT")?i.PHP.quote_(c.getFieldValue("TEXT")):i.PHP.valueToCode(c,"TEXT",i.PHP.ORDER_NONE)||"''")+")";"NUMBER"==c.getFieldValue("TYPE")&&(a="floatval("+a+")");return[a,i.PHP.ORDER_FUNCTION_CALL]};i.PHP.text_prompt=i.PHP.text_prompt_ext;i.PHP.text_count=function(c){var d=i.PHP.valueToCode(c,"TEXT",i.PHP.ORDER_MEMBER)||"''";c=i.PHP.valueToCode(c,"SUB",i.PHP.ORDER_NONE)||"''";return["strlen("+c+") === 0 ? strlen("+d+") + 1 : substr_count("+d+", "+c+")",i.PHP.ORDER_CONDITIONAL]};i.PHP.text_replace=function(d){var e=i.PHP.valueToCode(d,"TEXT",i.PHP.ORDER_MEMBER)||"''",b=i.PHP.valueToCode(d,"FROM",i.PHP.ORDER_NONE)||"''";d=i.PHP.valueToCode(d,"TO",i.PHP.ORDER_NONE)||"''";return["str_replace("+b+", "+d+", "+e+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.text_reverse=function(b){return["strrev("+(i.PHP.valueToCode(b,"TEXT",i.PHP.ORDER_MEMBER)||"''")+")",i.PHP.ORDER_FUNCTION_CALL]};i.PHP.variables={};i.PHP.variables_get=function(b){return[i.PHP.variableDB_.getName(b.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME),i.PHP.ORDER_ATOMIC]};i.PHP.variables_set=function(c){var a=i.PHP.valueToCode(c,"VALUE",i.PHP.ORDER_ASSIGNMENT)||"0";return i.PHP.variableDB_.getName(c.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME)+" = "+a+";\n"};i.PHP.variablesDynamic={};i.PHP.variables_get_dynamic=i.PHP.variables_get;i.PHP.variables_set_dynamic=i.PHP.variables_set;return i.PHP});
//# sourceMappingURL=php_compressed.min.js.map
