{"version":3,"sources":["../src/ui_blockly.js"],"names":["define","$","Blockly","BlocklyUi","textareaId","width","height","templateParams","textArea","blocklyDiv","document","createElement","id","class","tabindex","style","toolbox","blocklyWorkspace","fail","prototype","getElement","inject","err","console","log","failed","failMessage","sync","destroy","resize","hasFocus","Constructor"],"mappings":"AAAAA,OAAM,+BAAC,CAAC,QAAD,CAAW,0BAAX,CAAD,CAAyC,SAASC,CAAT,CAAYC,CAAZ,CAAqB,CAS5D,QAASC,CAAAA,CAAT,CAAmBC,CAAnB,CAA+BC,CAA/B,CAAsCC,CAAtC,CAA8CC,CAA9C,CAA8D,CAC1D,KAAKC,QAAL,CAAgBP,CAAC,CAAC,IAAMG,CAAP,CAAjB,CACA,KAAKG,cAAL,CAAsBA,CAAtB,CAEA,KAAKE,UAAL,CAAkBC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAlB,CACA,KAAKF,UAAL,CAAgBG,EAAhB,CAAqB,WAAaR,CAAlC,CACA,KAAKK,UAAL,CAAgBI,KAAhB,CAAwB,oBAAxB,CACA,KAAKJ,UAAL,CAAgBK,QAAhB,CAA2B,CAA3B,CACA,KAAKL,UAAL,CAAgBM,KAAhB,CAAsBT,MAAtB,CAA+BA,CAA/B,CACA,KAAKG,UAAL,CAAgBM,KAAhB,CAAsBV,KAAtB,CAA8BA,CAA9B,CAEA,KAAKW,OAAL,CAAe,0CAAf,CACA,KAAKA,OAAL,EAAgB,oCAAhB,CACA,KAAKA,OAAL,EAAgB,4CAAhB,CACA,KAAKA,OAAL,EAAgB,sCAAhB,CACA,KAAKA,OAAL,EAAgB,oCAAhB,CACA,KAAKA,OAAL,EAAgB,wCAAhB,CACA,KAAKA,OAAL,EAAgB,6BAAhB,CACA,KAAKA,OAAL,EAAgB,mCAAhB,CACA,KAAKA,OAAL,EAAgB,QAAhB,CAEA,KAAKC,gBAAL,CAAwB,IAAxB,CACA,KAAKC,IAAL,GACH,CAKDf,CAAS,CAACgB,SAAV,CAAoBC,UAApB,CAAiC,UAAW,CACxC,KAAKF,IAAL,IACA,GAAI,CAAC,KAAKD,gBAAV,CAA4B,CACxB,GAAI,CACA,KAAKA,gBAAL,CAAwBf,CAAO,CAACmB,MAAR,CAAe,KAAKZ,UAApB,CAAgC,CAAC,QAAW,KAAKO,OAAjB,CAAhC,CAC3B,CACD,MAAMM,CAAN,CAAW,CACP,KAAKJ,IAAL,IACAK,OAAO,CAACC,GAAR,CAAYF,CAAZ,CACH,CACJ,CACD,MAAO,MAAKb,UACf,CAZD,CAqBAN,CAAS,CAACgB,SAAV,CAAoBM,MAApB,CAA6B,UAAW,CACpC,MAAO,MAAKP,IACf,CAFD,CAOAf,CAAS,CAACgB,SAAV,CAAoBO,WAApB,CAAkC,UAAW,CAE5C,CAFD,CAOAvB,CAAS,CAACgB,SAAV,CAAoBQ,IAApB,CAA2B,UAAW,CAErC,CAFD,CAQAxB,CAAS,CAACgB,SAAV,CAAoBS,OAApB,CAA8B,UAAW,CAExC,CAFD,CAOAzB,CAAS,CAACgB,SAAV,CAAoBU,MAApB,CAA6B,UAAW,CAEvC,CAFD,CAMA1B,CAAS,CAACgB,SAAV,CAAoBW,QAApB,CAA+B,UAAW,CAEzC,CAFD,CAOD,MAAO,CACFC,WAAW,CAAE5B,CADX,CAIb,CAxGK,CAAN","sourcesContent":["define(['jquery', 'qtype_coderunner/browser'], function($, Blockly) {\n/* 1. A constructor SomeUiName(textareaId, width, height, params) that\n *    builds an HTML component of the given width and height. textareaId is the\n *    ID of the textArea from which the UI element should obtain its initial\n *    serialisation and to which it should write the serialisation when its save\n *    or destroy methods are called. params is a JavaScript object,\n *    decoded from the JSON templateParams defined by the question plus any\n *    additional data required, such as the 'lang' in the case of Ace.\n */\n        function BlocklyUi(textareaId, width, height, templateParams) {\n            this.textArea = $(\"#\" + textareaId);\n            this.templateParams = templateParams;\n\n            this.blocklyDiv = document.createElement(\"div\");\n            this.blocklyDiv.id = \"blockly_\" + textareaId;\n            this.blocklyDiv.class = \"coderunner_blockly\";\n            this.blocklyDiv.tabindex = 1;\n            this.blocklyDiv.style.height = height;\n            this.blocklyDiv.style.width = width;\n\n            this.toolbox = \"<xml id='toolbox' style='display: none'>\";\n            this.toolbox += \"<block type='controls_if'></block>\";\n            this.toolbox += \"<block type='controls_repeat_ext'></block>\";\n            this.toolbox += \"<block type='logic_compare'></block>\";\n            this.toolbox += \"<block type='math_number'></block>\";\n            this.toolbox += \"<block type='math_arithmetic'></block>\";\n            this.toolbox += \"<block type='text'></block>\";\n            this.toolbox += \"<block type='text_print'></block>\";\n            this.toolbox += \"</xml>\";\n\n            this.blocklyWorkspace = null;\n            this.fail = false;\n        }\n\n/* 2. A getElement() method that returns the HTML element that the\n *    InterfaceWrapper is to insert into the document tree.\n */\n        BlocklyUi.prototype.getElement = function() {\n            this.fail = false;\n            if (!this.blocklyWorkspace) {\n                try {\n                    this.blocklyWorkspace = Blockly.inject(this.blocklyDiv, {\"toolbox\": this.toolbox});\n                }\n                catch(err) {\n                    this.fail = true;\n                    console.log(err);\n                }\n            }\n            return this.blocklyDiv;\n        };\n\n/* 3. A method failed() that should return true unless the constructor\n *    failed (e.g. because it was not able to de-serialise the text area's\n *    contents). The wrapper will call destroy() on the object if failed()\n *    returns true and abort the use of the UI element. The text area will\n *    have the uiloadfailed class added, which CSS will display in some\n *    error mode (e.g. a red border).\n */\n        BlocklyUi.prototype.failed = function() {\n            return this.fail;\n        };\n\n/* 4. A method failMessage() that will be called only when failed() returns\n *    True. It should be a defined CodeRunner language string key.\n */\n        BlocklyUi.prototype.failMessage = function() {\n\n        };\n\n/* 5. A sync() method that copies the serialised represention of the UI plugin's\n *    data to the related TextArea. This is used when submit is clicked.\n */\n        BlocklyUi.prototype.sync = function() {\n            // TODO: generate code in textArea\n        };\n\n/* 6. A destroy() method that should sync the contents to the text area then\n *    destroy any HTML elements or other created content. This method is called\n *    when CTRL-ALT-M is typed by the user to turn off all UI plugins\n */\n        BlocklyUi.prototype.destroy = function() {\n            // TODO\n        };\n\n/* 7. A resize(width, height) method that should resize the entire UI element\n *    to the given dimensions.\n */\n        BlocklyUi.prototype.resize = function() {\n            // TODO\n        };\n\n/* 8. A hasFocus() method that returns true if the UI element has focus.\n */\n        BlocklyUi.prototype.hasFocus = function() {\n\n        };\n\n/* The return value from the module define is a record with a single field\n * 'Constructor' that references the constructor (e.g. Graph, AceWrapper etc)\n */\n       return {\n            Constructor: BlocklyUi\n        };\n\n});\n"],"file":"ui_blockly.min.js"}